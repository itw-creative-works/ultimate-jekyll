"use strict";(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[601],{601:function(t,e,n){n.r(e),n.d(e,{Breadcrumbs:function(){return $o},BrowserClient:function(){return Ls},BrowserProfilingIntegration:function(){return Tf},BrowserTracing:function(){return jh},Dedupe:function(){return jo},Feedback:function(){return wp},FunctionToString:function(){return Qe},GlobalHandlers:function(){return Yo},HttpContext:function(){return Qo},Hub:function(){return Jt},InboundFilters:function(){return sn},Integrations:function(){return Cf},LinkedErrors:function(){return ni},ModuleMetadata:function(){return rr},Replay:function(){return ld},ReplayCanvas:function(){return zd},SDK_VERSION:function(){return Gt},SEMANTIC_ATTRIBUTE_SENTRY_OP:function(){return qr},SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:function(){return Wr},SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:function(){return zr},SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:function(){return Hr},Scope:function(){return qt},TryCatch:function(){return ii},WINDOW:function(){return _s},addBreadcrumb:function(){return ke},addEventProcessor:function(){return Dr},addGlobalEventProcessor:function(){return ft},addIntegration:function(){return Ye},addTracingExtensions:function(){return ys},breadcrumbsIntegration:function(){return Po},browserApiErrorsIntegration:function(){return oi},browserProfilingIntegration:function(){return xf},browserTracingIntegration:function(){return Dh},captureConsoleIntegration:function(){return Dp},captureEvent:function(){return be},captureException:function(){return _e},captureMessage:function(){return ve},captureSession:function(){return He},captureUserFeedback:function(){return _i},chromeStackLineParser:function(){return Vs},close:function(){return Ne},configureScope:function(){return Se},contextLinesIntegration:function(){return Pp},continueTrace:function(){return wn},createTransport:function(){return jr},createUserFeedbackEnvelope:function(){return Ns},debugIntegration:function(){return Fp},dedupeIntegration:function(){return jp},defaultIntegrations:function(){return di},defaultRequestInstrumentationOptions:function(){return ch},defaultStackLineParsers:function(){return so},defaultStackParser:function(){return oo},endSession:function(){return je},eventFromException:function(){return Rs},eventFromMessage:function(){return Ms},exceptionFromError:function(){return xs},extraErrorDataIntegration:function(){return Gp},extractTraceparentData:function(){return Dn},feedbackIntegration:function(){return kp},flush:function(){return De},forceLoad:function(){return mi},functionToStringIntegration:function(){return Ze},geckoStackLineParser:function(){return Xs},getActiveSpan:function(){return kn},getActiveTransaction:function(){return An},getClient:function(){return Pe},getCurrentHub:function(){return Zt},getCurrentScope:function(){return Fe},getDefaultIntegrations:function(){return pi},getHubFromCarrier:function(){return re},getReplay:function(){return pd},getSpanStatusFromHttpCode:function(){return Rn},globalHandlersIntegration:function(){return Go},httpClientIntegration:function(){return Ep},httpContextIntegration:function(){return Zo},inboundFiltersIntegration:function(){return rn},init:function(){return hi},instrumentOutgoingRequests:function(){return uh},isInitialized:function(){return $e},lastEventId:function(){return Le},linkedErrorsIntegration:function(){return ei},makeBrowserOfflineTransport:function(){return Xh},makeFetchTransport:function(){return Us},makeMain:function(){return Xt},makeMultiplexedTransport:function(){return Tr},makeXHRTransport:function(){return zs},metrics:function(){return vr},moduleMetadataIntegration:function(){return nr},onLoad:function(){return gi},onProfilingStartRouteTransaction:function(){return Sf},opera10StackLineParser:function(){return eo},opera11StackLineParser:function(){return ro},parameterize:function(){return Pn},replayCanvasIntegration:function(){return Hd},replayIntegration:function(){return ud},reportingObserverIntegration:function(){return Kp},rewriteFramesIntegration:function(){return rh},sendFeedback:function(){return tp},sessionTimingIntegration:function(){return oh},setContext:function(){return we},setCurrentClient:function(){return Ln},setExtra:function(){return Te},setExtras:function(){return xe},setHttpStatus:function(){return On},setMeasurement:function(){return Nn},setTag:function(){return Ce},setTags:function(){return Ee},setUser:function(){return Ie},showReportDialog:function(){return fi},spanStatusfromHttpCode:function(){return Mn},startBrowserTracingNavigationSpan:function(){return Lh},startBrowserTracingPageLoadSpan:function(){return Nh},startInactiveSpan:function(){return Sn},startSession:function(){return Be},startSpan:function(){return vn},startSpanManual:function(){return bn},startTransaction:function(){return Ae},trace:function(){return _n},winjsStackLineParser:function(){return Qs},withActiveSpan:function(){return Oe},withIsolationScope:function(){return Me},withScope:function(){return Re},wrap:function(){return yi}});var r={};n.r(r),n.d(r,{FunctionToString:function(){return Qe},InboundFilters:function(){return sn},LinkedErrors:function(){return fn}});var s={};n.r(s),n.d(s,{Breadcrumbs:function(){return $o},Dedupe:function(){return jo},GlobalHandlers:function(){return Yo},HttpContext:function(){return Qo},LinkedErrors:function(){return ni},TryCatch:function(){return ii}});const o=Object.prototype.toString;function i(t){switch(o.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return y(t,Error)}}function a(t,e){return o.call(t)===`[object ${e}]`}function c(t){return a(t,"ErrorEvent")}function u(t){return a(t,"DOMError")}function l(t){return a(t,"String")}function d(t){return"object"==typeof t&&null!==t&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function p(t){return null===t||d(t)||"object"!=typeof t&&"function"!=typeof t}function h(t){return a(t,"Object")}function f(t){return"undefined"!=typeof Event&&y(t,Event)}function m(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function g(t){return"number"==typeof t&&t!=t}function y(t,e){try{return t instanceof e}catch(t){return!1}}function _(t){return!("object"!=typeof t||null===t||!t.__isVue&&!t._isVue)}function v(t){return t&&t.Math==Math?t:void 0}const b="object"==typeof globalThis&&v(globalThis)||"object"==typeof window&&v(window)||"object"==typeof self&&v(self)||"object"==typeof n.g&&v(n.g)||function(){return this}()||{};function S(){return b}function k(t,e,n){const r=n||b,s=r.__SENTRY__=r.__SENTRY__||{};return s[t]||(s[t]=e())}const w=S(),x=80;function T(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,s=[];let o=0,i=0;const a=" > ",c=a.length;let u;const l=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||x;for(;n&&o++<r&&(u=E(n,l),!("html"===u||o>1&&i+s.length*c+u.length>=d));)s.push(u),i+=u.length,n=n.parentNode;return s.reverse().join(a)}catch(t){return"<unknown>"}}function E(t,e){const n=t,r=[];let s,o,i,a,c;if(!n||!n.tagName)return"";if(w.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const u=e&&e.length?e.filter((t=>n.getAttribute(t))).map((t=>[t,n.getAttribute(t)])):null;if(u&&u.length)u.forEach((t=>{r.push(`[${t[0]}="${t[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&l(s))for(o=s.split(/\s+/),c=0;c<o.length;c++)r.push(`.${o[c]}`);const d=["aria-label","type","name","title","alt"];for(c=0;c<d.length;c++)i=d[c],a=n.getAttribute(i),a&&r.push(`[${i}="${a}"]`);return r.join("")}function C(){try{return w.document.location.href}catch(t){return""}}function I(t){return w.document&&w.document.querySelector?w.document.querySelector(t):null}function R(t){if(!w.HTMLElement)return null;let e=t;for(let t=0;t<5;t++){if(!e)return null;if(e instanceof HTMLElement&&e.dataset.sentryComponent)return e.dataset.sentryComponent;e=e.parentNode}return null}const M="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,O=["debug","info","warn","error","log","assert","trace"],A={};function D(t){if(!("console"in b))return t();const e=b.console,n={},r=Object.keys(A);r.forEach((t=>{const r=A[t];n[t]=e[t],e[t]=r}));try{return t()}finally{r.forEach((t=>{e[t]=n[t]}))}}const N=function(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return M?O.forEach((n=>{e[n]=(...e)=>{t&&D((()=>{b.console[n](`Sentry Logger [${n}]:`,...e)}))}})):O.forEach((t=>{e[t]=()=>{}})),e}();function L(t,e=0){return"string"!=typeof t||0===e||t.length<=e?t:`${t.slice(0,e)}...`}function P(t,e){let n=t;const r=n.length;if(r<=150)return n;e>r&&(e=r);let s=Math.max(e-60,0);s<5&&(s=0);let o=Math.min(s+140,r);return o>r-5&&(o=r),o===r&&(s=Math.max(o-140,0)),n=n.slice(s,o),s>0&&(n=`'{snip} ${n}`),o<r&&(n+=" {snip}"),n}function $(t,e){if(!Array.isArray(t))return"";const n=[];for(let e=0;e<t.length;e++){const r=t[e];try{_(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(t){n.push("[value cannot be serialized]")}}return n.join(e)}function F(t,e,n=!1){return!!l(t)&&(a(e,"RegExp")?e.test(t):!!l(e)&&(n?t===e:t.includes(e)))}function B(t,e=[],n=!1){return e.some((e=>F(t,e,n)))}function j(t,e,n){if(!(e in t))return;const r=t[e],s=n(r);"function"==typeof s&&H(s,r),t[e]=s}function U(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch(n){M&&N.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function H(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,U(t,"__sentry_original__",e)}catch(t){}}function z(t){return t.__sentry_original__}function q(t){if(i(t))return{message:t.message,name:t.name,stack:t.stack,...G(t)};if(f(t)){const e={type:t.type,target:W(t.target),currentTarget:W(t.currentTarget),...G(t)};return"undefined"!=typeof CustomEvent&&y(t,CustomEvent)&&(e.detail=t.detail),e}return t}function W(t){try{return e=t,"undefined"!=typeof Element&&y(e,Element)?T(t):Object.prototype.toString.call(t)}catch(t){return"<unknown>"}var e}function G(t){if("object"==typeof t&&null!==t){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function Y(t){return V(t,new Map)}function V(t,e){if(function(t){if(!h(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||"Object"===e}catch(t){return!0}}(t)){const n=e.get(t);if(void 0!==n)return n;const r={};e.set(t,r);for(const n of Object.keys(t))void 0!==t[n]&&(r[n]=V(t[n],e));return r}if(Array.isArray(t)){const n=e.get(t);if(void 0!==n)return n;const r=[];return e.set(t,r),t.forEach((t=>{r.push(V(t,e))})),r}return t}const J="production",K="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function X(){const t=b,e=t.crypto||t.msCrypto;let n=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch(t){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(t=>(t^(15&n())>>t/4).toString(16)))}function Z(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Q(t){const{message:e,event_id:n}=t;if(e)return e;const r=Z(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function tt(t,e,n){const r=t.exception=t.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{};o.value||(o.value=e||""),o.type||(o.type=n||"Error")}function et(t,e){const n=Z(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const t={...r&&r.data,...e.data};n.mechanism.data=t}}function nt(t){if(t&&t.__sentry_captured__)return!0;try{U(t,"__sentry_captured__",!0)}catch(t){}return!1}function rt(t){return Array.isArray(t)?t:[t]}const st=1e3;function ot(){return Date.now()/st}const it=function(){const{performance:t}=b;if(!t||!t.now)return ot;const e=Date.now()-t.now(),n=null==t.timeOrigin?e:t.timeOrigin;return()=>(n+t.now())/st}();let at;const ct=(()=>{const{performance:t}=b;if(!t||!t.now)return void(at="none");const e=36e5,n=t.now(),r=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,o=s<e,i=t.timing&&t.timing.navigationStart,a="number"==typeof i?Math.abs(i+n-r):e;return o||a<e?s<=a?(at="timeOrigin",t.timeOrigin):(at="navigationStart",i):(at="dateNow",r)})();var ut;function lt(t){return new pt((e=>{e(t)}))}function dt(t){return new pt(((e,n)=>{n(t)}))}!function(t){t[t.PENDING=0]="PENDING";t[t.RESOLVED=1]="RESOLVED";t[t.REJECTED=2]="REJECTED"}(ut||(ut={}));class pt{constructor(t){pt.prototype.__init.call(this),pt.prototype.__init2.call(this),pt.prototype.__init3.call(this),pt.prototype.__init4.call(this),this._state=ut.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}then(t,e){return new pt(((n,r)=>{this._handlers.push([!1,e=>{if(t)try{n(t(e))}catch(t){r(t)}else n(e)},t=>{if(e)try{n(e(t))}catch(t){r(t)}else r(t)}]),this._executeHandlers()}))}catch(t){return this.then((t=>t),t)}finally(t){return new pt(((e,n)=>{let r,s;return this.then((e=>{s=!1,r=e,t&&t()}),(e=>{s=!0,r=e,t&&t()})).then((()=>{s?n(r):e(r)}))}))}__init(){this._resolve=t=>{this._setResult(ut.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(ut.REJECTED,t)}}__init3(){this._setResult=(t,e)=>{this._state===ut.PENDING&&(m(e)?e.then(this._resolve,this._reject):(this._state=t,this._value=e,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===ut.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach((t=>{t[0]||(this._state===ut.RESOLVED&&t[1](this._value),this._state===ut.REJECTED&&t[2](this._value),t[0]=!0)}))}}}function ht(){return k("globalEventProcessors",(()=>[]))}function ft(t){ht().push(t)}function mt(t,e,n,r=0){return new pt(((s,o)=>{const i=t[r];if(null===e||"function"!=typeof i)s(e);else{const a=i({...e},n);K&&i.id&&null===a&&N.log(`Event processor "${i.id}" dropped event`),m(a)?a.then((e=>mt(t,e,n,r+1).then(s))).then(null,o):mt(t,a,n,r+1).then(s).then(null,o)}}))}function gt(t){const e=it(),n={sid:X(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(t){return Y({sid:`${t.sid}`,init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}(n)};return t&&yt(n,t),n}function yt(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||it(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=32===e.sid.length?e.sid:X()),void 0!==e.init&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),"number"==typeof e.started&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof e.duration)t.duration=e.duration;else{const e=t.timestamp-t.started;t.duration=e>=0?e:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),"number"==typeof e.errors&&(t.errors=e.errors),e.status&&(t.status=e.status)}function _t(t,e){let n={};e?n={status:e}:"ok"===t.status&&(n={status:"exited"}),yt(t,n)}function vt(t){return t.transaction}const bt="baggage",St="sentry-",kt=/^sentry-/,wt=8192;function xt(t){if(!l(t)&&!Array.isArray(t))return;let e={};if(Array.isArray(t))e=t.reduce(((t,e)=>{const n=Et(e);for(const e of Object.keys(n))t[e]=n[e];return t}),{});else{if(!t)return;e=Et(t)}const n=Object.entries(e).reduce(((t,[e,n])=>{if(e.match(kt)){t[e.slice(St.length)]=n}return t}),{});return Object.keys(n).length>0?n:void 0}function Tt(t){if(!t)return;return function(t){if(0===Object.keys(t).length)return;return Object.entries(t).reduce(((t,[e,n],r)=>{const s=`${encodeURIComponent(e)}=${encodeURIComponent(n)}`,o=0===r?s:`${t},${s}`;return o.length>wt?(M&&N.warn(`Not adding key: ${e} with val: ${n} to baggage header due to exceeding baggage size limits.`),t):o}),"")}(Object.entries(t).reduce(((t,[e,n])=>(n&&(t[`${St}${e}`]=n),t)),{}))}function Et(t){return t.split(",").map((t=>t.split("=").map((t=>decodeURIComponent(t.trim()))))).reduce(((t,[e,n])=>(t[e]=n,t)),{})}const Ct=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function It(t){if(!t)return;const e=t.match(Ct);if(!e)return;let n;return"1"===e[3]?n=!0:"0"===e[3]&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function Rt(t,e){const n=It(t),r=xt(e),{traceId:s,parentSpanId:o,parentSampled:i}=n||{};return n?{traceId:s||X(),parentSpanId:o||X().substring(16),spanId:X().substring(16),sampled:i,dsc:r||{}}:{traceId:s||X(),spanId:X().substring(16)}}function Mt(t=X(),e=X().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${t}-${e}${r}`}const Ot=1;function At(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:s,parent_span_id:o,status:i,tags:a,origin:c}=Pt(t);return Y({data:r,op:s,parent_span_id:o,span_id:e,status:i,tags:a,trace_id:n,origin:c})}function Dt(t){const{traceId:e,spanId:n}=t.spanContext();return Mt(e,n,$t(t))}function Nt(t){return"number"==typeof t?Lt(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Lt(t.getTime()):it()}function Lt(t){return t>9999999999?t/1e3:t}function Pt(t){return function(t){return"function"==typeof t.getSpanJSON}(t)?t.getSpanJSON():"function"==typeof t.toJSON?t.toJSON():{}}function $t(t){const{traceFlags:e}=t.spanContext();return Boolean(e&Ot)}function Ft(t,e,n){const r=e.getOptions(),{publicKey:s}=e.getDsn()||{},{segment:o}=n&&n.getUser()||{},i=Y({environment:r.environment||J,release:r.release,user_segment:o,public_key:s,trace_id:t});return e.emit&&e.emit("createDsc",i),i}function Bt(t){const e=Pe();if(!e)return{};const n=Ft(Pt(t).trace_id||"",e,Fe()),r=vt(t);if(!r)return n;const s=r&&r._frozenDynamicSamplingContext;if(s)return s;const{sampleRate:o,source:i}=r.metadata;null!=o&&(n.sample_rate=`${o}`);const a=Pt(r);return i&&"url"!==i&&(n.transaction=a.description),n.sampled=String($t(r)),e.emit&&e.emit("createDsc",n),n}function jt(t,e){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:o}=e;!function(t,e){const{extra:n,tags:r,user:s,contexts:o,level:i,transactionName:a}=e,c=Y(n);c&&Object.keys(c).length&&(t.extra={...c,...t.extra});const u=Y(r);u&&Object.keys(u).length&&(t.tags={...u,...t.tags});const l=Y(s);l&&Object.keys(l).length&&(t.user={...l,...t.user});const d=Y(o);d&&Object.keys(d).length&&(t.contexts={...d,...t.contexts});i&&(t.level=i);a&&(t.transaction=a)}(t,e),r&&function(t,e){t.contexts={trace:At(e),...t.contexts};const n=vt(e);if(n){t.sdkProcessingMetadata={dynamicSamplingContext:Bt(e),...t.sdkProcessingMetadata};const r=Pt(n).description;r&&(t.tags={transaction:r,...t.tags})}}(t,r),function(t,e){t.fingerprint=t.fingerprint?rt(t.fingerprint):[],e&&(t.fingerprint=t.fingerprint.concat(e));t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}(t,n),function(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}(t,s),function(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}(t,o)}function Ut(t,e){const{extra:n,tags:r,user:s,contexts:o,level:i,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:p,transactionName:h,span:f}=e;Ht(t,"extra",n),Ht(t,"tags",r),Ht(t,"user",s),Ht(t,"contexts",o),Ht(t,"sdkProcessingMetadata",a),i&&(t.level=i),h&&(t.transactionName=h),f&&(t.span=f),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),u.length&&(t.fingerprint=[...t.fingerprint,...u]),l.length&&(t.eventProcessors=[...t.eventProcessors,...l]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...p}}function Ht(t,e,n){if(n&&Object.keys(n).length){t[e]={...t[e]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[e][r]=n[r])}}let zt;class qt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Wt()}static clone(t){return t?t.clone():new qt}clone(){const t=new qt;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&yt(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,e){return this._tags={...this._tags,[t]:e},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,e){return this._extra={...this._extra,[t]:e},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return null===e?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const e="function"==typeof t?t(this):t;if(e instanceof qt){const t=e.getScopeData();this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&Object.keys(t.user).length&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint.length&&(this._fingerprint=t.fingerprint),e.getRequestSession()&&(this._requestSession=e.getRequestSession()),t.propagationContext&&(this._propagationContext=t.propagationContext)}else if(h(e)){const e=t;this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Wt(),this}addBreadcrumb(t,e){const n="number"==typeof e?e:100;if(n<=0)return this;const r={timestamp:ot(),...t},s=this._breadcrumbs;return s.push(r),this._breadcrumbs=s.length>n?s.slice(-n):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:e,_contexts:n,_tags:r,_extra:s,_user:o,_level:i,_fingerprint:a,_eventProcessors:c,_propagationContext:u,_sdkProcessingMetadata:l,_transactionName:d,_span:p}=this;return{breadcrumbs:t,attachments:e,contexts:n,tags:r,extra:s,user:o,level:i,fingerprint:a||[],eventProcessors:c,propagationContext:u,sdkProcessingMetadata:l,transactionName:d,span:p}}applyToEvent(t,e={},n=[]){jt(t,this.getScopeData());return mt([...n,...ht(),...this._eventProcessors],t,e)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,e){const n=e&&e.event_id?e.event_id:X();if(!this._client)return N.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:r,...e,event_id:n},this),n}captureMessage(t,e,n){const r=n&&n.event_id?n.event_id:X();if(!this._client)return N.warn("No client configured on scope - will not capture message!"),r;const s=new Error(t);return this._client.captureMessage(t,e,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureEvent(t,e){const n=e&&e.event_id?e.event_id:X();return this._client?(this._client.captureEvent(t,{...e,event_id:n},this),n):(N.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((t=>{t(this)})),this._notifyingListeners=!1)}}function Wt(){return{traceId:X(),spanId:X().substring(16)}}const Gt="7.116.0",Yt=parseFloat(Gt),Vt=100;class Jt{constructor(t,e,n,r=Yt){let s,o;this._version=r,e?s=e:(s=new qt,s.setClient(t)),n?o=n:(o=new qt,o.setClient(t)),this._stack=[{scope:s}],t&&this.bindClient(t),this._isolationScope=o}isOlderThan(t){return this._version<t}bindClient(t){const e=this.getStackTop();e.client=t,e.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(t){const e=this.pushScope();let n;try{n=t(e)}catch(t){throw this.popScope(),t}return m(n)?n.then((t=>(this.popScope(),t)),(t=>{throw this.popScope(),t})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,e){const n=this._lastEventId=e&&e.event_id?e.event_id:X(),r=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:r,...e,event_id:n}),n}captureMessage(t,e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:X(),s=new Error(t);return this.getScope().captureMessage(t,e,{originalException:t,syntheticException:s,...n,event_id:r}),r}captureEvent(t,e){const n=e&&e.event_id?e.event_id:X();return t.type||(this._lastEventId=n),this.getScope().captureEvent(t,{...e,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(t,e){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=Vt}=r.getOptions&&r.getOptions()||{};if(o<=0)return;const i={timestamp:ot(),...t},a=s?D((()=>s(i,e))):i;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,e),n.addBreadcrumb(a,o))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,e){this.getScope().setTag(t,e),this.getIsolationScope().setTag(t,e)}setExtra(t,e){this.getScope().setExtra(t,e),this.getIsolationScope().setExtra(t,e)}setContext(t,e){this.getScope().setContext(t,e),this.getIsolationScope().setContext(t,e)}configureScope(t){const{scope:e,client:n}=this.getStackTop();n&&t(e)}run(t){const e=Xt(this);try{t(this)}finally{Xt(e)}}getIntegration(t){const e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return K&&N.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,e){const n=this._callExtensionMethod("startTransaction",t,e);if(K&&!n){this.getClient()?N.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):N.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const t=this.getStackTop().scope,e=t.getSession();e&&_t(e),this._sendSessionUpdate(),t.setSession()}startSession(t){const{scope:e,client:n}=this.getStackTop(),{release:r,environment:s=J}=n&&n.getOptions()||{},{userAgent:o}=b.navigator||{},i=gt({release:r,environment:s,user:e.getUser(),...o&&{userAgent:o},...t}),a=e.getSession&&e.getSession();return a&&"ok"===a.status&&yt(a,{status:"exited"}),this.endSession(),e.setSession(i),i}shouldSendDefaultPii(){const t=this.getClient(),e=t&&t.getOptions();return Boolean(e&&e.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:e}=this.getStackTop(),n=t.getSession();n&&e&&e.captureSession&&e.captureSession(n)}_callExtensionMethod(t,...e){const n=Kt().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[t])return n.extensions[t].apply(this,e);K&&N.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function Kt(){return b.__SENTRY__=b.__SENTRY__||{extensions:{},hub:void 0},b}function Xt(t){const e=Kt(),n=re(e);return se(e,t),n}function Zt(){const t=Kt();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return te(t)}function Qt(){return Zt().getIsolationScope()}function te(t=Kt()){return ne(t)&&!re(t).isOlderThan(Yt)||se(t,new Jt),re(t)}function ee(t,e={}){const n=Kt();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(t,e):t()}function ne(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function re(t){return k("hub",(()=>new Jt),t)}function se(t,e){if(!t)return!1;return(t.__SENTRY__=t.__SENTRY__||{}).hub=e,!0}const oe=50,ie=/\(error: (.*)\)/,ae=/captureMessage|captureException/;function ce(...t){const e=t.sort(((t,e)=>t[0]-e[0])).map((t=>t[1]));return(t,n=0)=>{const r=[],s=t.split("\n");for(let t=n;t<s.length;t++){const n=s[t];if(n.length>1024)continue;const o=ie.test(n)?n.replace(ie,"$1"):n;if(!o.match(/\S*Error: /)){for(const t of e){const e=t(o);if(e){r.push(e);break}}if(r.length>=oe)break}}return function(t){if(!t.length)return[];const e=Array.from(t);/sentryWrapped/.test(e[e.length-1].function||"")&&e.pop();e.reverse(),ae.test(e[e.length-1].function||"")&&(e.pop(),ae.test(e[e.length-1].function||"")&&e.pop());return e.slice(0,oe).map((t=>({...t,filename:t.filename||e[e.length-1].filename,function:t.function||"?"})))}(r)}}const ue="<anonymous>";function le(t){try{return t&&"function"==typeof t&&t.name||ue}catch(t){return ue}}function de(t,e=100,n=1/0){try{return he("",t,e,n)}catch(t){return{ERROR:`**non-serializable** (${t})`}}}function pe(t,e=3,n=102400){const r=de(t,e);return s=r,function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(s))>n?pe(t,e-1,n):r;var s}function he(t,e,r=1/0,s=1/0,o=function(){const t="function"==typeof WeakSet,e=t?new WeakSet:[];return[function(n){if(t)return!!e.has(n)||(e.add(n),!1);for(let t=0;t<e.length;t++)if(e[t]===n)return!0;return e.push(n),!1},function(n){if(t)e.delete(n);else for(let t=0;t<e.length;t++)if(e[t]===n){e.splice(t,1);break}}]}()){const[i,a]=o;if(null==e||["number","boolean","string"].includes(typeof e)&&!g(e))return e;const c=function(t,e){try{if("domain"===t&&e&&"object"==typeof e&&e._events)return"[Domain]";if("domainEmitter"===t)return"[DomainEmitter]";if(void 0!==n.g&&e===n.g)return"[Global]";if("undefined"!=typeof window&&e===window)return"[Window]";if("undefined"!=typeof document&&e===document)return"[Document]";if(_(e))return"[VueViewModel]";if(h(r=e)&&"nativeEvent"in r&&"preventDefault"in r&&"stopPropagation"in r)return"[SyntheticEvent]";if("number"==typeof e&&e!=e)return"[NaN]";if("function"==typeof e)return`[Function: ${le(e)}]`;if("symbol"==typeof e)return`[${String(e)}]`;if("bigint"==typeof e)return`[BigInt: ${String(e)}]`;const s=function(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}(e);return/^HTML(\w*)Element$/.test(s)?`[HTMLElement: ${s}]`:`[object ${s}]`}catch(t){return`**non-serializable** (${t})`}var r}(t,e);if(!c.startsWith("[object "))return c;if(e.__sentry_skip_normalization__)return e;const u="number"==typeof e.__sentry_override_normalization_depth__?e.__sentry_override_normalization_depth__:r;if(0===u)return c.replace("object ","");if(i(e))return"[Circular ~]";const l=e;if(l&&"function"==typeof l.toJSON)try{return he("",l.toJSON(),u-1,s,o)}catch(t){}const d=Array.isArray(e)?[]:{};let p=0;const f=q(e);for(const t in f){if(!Object.prototype.hasOwnProperty.call(f,t))continue;if(p>=s){d[t]="[MaxProperties ~]";break}const e=f[t];d[t]=he(t,e,u-1,s,o),p++}return a(e),d}function fe(t,e,n,r,s,o){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=t,c={...e,event_id:e.event_id||n.event_id||X(),timestamp:e.timestamp||ot()},u=n.integrations||t.integrations.map((t=>t.name));!function(t,e){const{environment:n,release:r,dist:s,maxValueLength:o=250}=e;"environment"in t||(t.environment="environment"in e?n:J);void 0===t.release&&void 0!==r&&(t.release=r);void 0===t.dist&&void 0!==s&&(t.dist=s);t.message&&(t.message=L(t.message,o));const i=t.exception&&t.exception.values&&t.exception.values[0];i&&i.value&&(i.value=L(i.value,o));const a=t.request;a&&a.url&&(a.url=L(a.url,o))}(c,t),function(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}(c,u),void 0===e.type&&function(t,e){const n=b._sentryDebugIds;if(!n)return;let r;const s=me.get(e);s?r=s:(r=new Map,me.set(e,r));const o=Object.keys(n).reduce(((t,s)=>{let o;const i=r.get(s);i?o=i:(o=e(s),r.set(s,o));for(let e=o.length-1;e>=0;e--){const r=o[e];if(r.filename){t[r.filename]=n[s];break}}return t}),{});try{t.exception.values.forEach((t=>{t.stacktrace.frames.forEach((t=>{t.filename&&(t.debug_id=o[t.filename])}))}))}catch(t){}}(c,t.stackParser);const l=function(t,e){if(!e)return t;const n=t?t.clone():new qt;return n.update(e),n}(r,n.captureContext);n.mechanism&&et(c,n.mechanism);const d=s&&s.getEventProcessors?s.getEventProcessors():[],p=(zt||(zt=new qt),zt).getScopeData();if(o){Ut(p,o.getScopeData())}if(l){Ut(p,l.getScopeData())}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),jt(c,p);return mt([...d,...ht(),...p.eventProcessors],c,n).then((t=>(t&&function(t){const e={};try{t.exception.values.forEach((t=>{t.stacktrace.frames.forEach((t=>{t.debug_id&&(t.abs_path?e[t.abs_path]=t.debug_id:t.filename&&(e[t.filename]=t.debug_id),delete t.debug_id)}))}))}catch(t){}if(0===Object.keys(e).length)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.keys(e).forEach((t=>{n.push({type:"sourcemap",code_file:t,debug_id:e[t]})}))}(t),"number"==typeof i&&i>0?function(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((t=>({...t,...t.data&&{data:de(t.data,e,n)}})))},...t.user&&{user:de(t.user,e,n)},...t.contexts&&{contexts:de(t.contexts,e,n)},...t.extra&&{extra:de(t.extra,e,n)}};t.contexts&&t.contexts.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=de(t.contexts.trace.data,e,n)));t.spans&&(r.spans=t.spans.map((t=>{const r=Pt(t).data;return r&&(t.data=de(r,e,n)),t})));return r}(t,i,a):t)))}const me=new WeakMap;function ge(t){if(t)return function(t){return t instanceof qt||"function"==typeof t}(t)||function(t){return Object.keys(t).some((t=>ye.includes(t)))}(t)?{captureContext:t}:t}const ye=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function _e(t,e){return Zt().captureException(t,ge(e))}function ve(t,e){const n="string"==typeof e?e:void 0,r="string"!=typeof e?{captureContext:e}:void 0;return Zt().captureMessage(t,n,r)}function be(t,e){return Zt().captureEvent(t,e)}function Se(t){Zt().configureScope(t)}function ke(t,e){Zt().addBreadcrumb(t,e)}function we(t,e){Zt().setContext(t,e)}function xe(t){Zt().setExtras(t)}function Te(t,e){Zt().setExtra(t,e)}function Ee(t){Zt().setTags(t)}function Ce(t,e){Zt().setTag(t,e)}function Ie(t){Zt().setUser(t)}function Re(...t){const e=Zt();if(2===t.length){const[n,r]=t;return n?e.withScope((()=>(e.getStackTop().scope=n,r(n)))):e.withScope(r)}return e.withScope(t[0])}function Me(t){return ee((()=>t(Qt())))}function Oe(t,e){return Re((n=>(n.setSpan(t),e(n))))}function Ae(t,e){return Zt().startTransaction({...t},e)}async function De(t){const e=Pe();return e?e.flush(t):(K&&N.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function Ne(t){const e=Pe();return e?e.close(t):(K&&N.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function Le(){return Zt().lastEventId()}function Pe(){return Zt().getClient()}function $e(){return!!Pe()}function Fe(){return Zt().getScope()}function Be(t){const e=Pe(),n=Qt(),r=Fe(),{release:s,environment:o=J}=e&&e.getOptions()||{},{userAgent:i}=b.navigator||{},a=gt({release:s,environment:o,user:r.getUser()||n.getUser(),...i&&{userAgent:i},...t}),c=n.getSession();return c&&"ok"===c.status&&yt(c,{status:"exited"}),je(),n.setSession(a),r.setSession(a),a}function je(){const t=Qt(),e=Fe(),n=e.getSession()||t.getSession();n&&_t(n),Ue(),t.setSession(),e.setSession()}function Ue(){const t=Qt(),e=Fe(),n=Pe(),r=e.getSession()||t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function He(t=!1){t?je():Ue()}const ze=[];function qe(t){const e=t.defaultIntegrations||[],n=t.integrations;let r;e.forEach((t=>{t.isDefaultInstance=!0})),r=Array.isArray(n)?[...e,...n]:"function"==typeof n?rt(n(e)):e;const s=function(t){const e={};return t.forEach((t=>{const{name:n}=t,r=e[n];r&&!r.isDefaultInstance&&t.isDefaultInstance||(e[n]=t)})),Object.keys(e).map((t=>e[t]))}(r),o=function(t,e){for(let n=0;n<t.length;n++)if(!0===e(t[n]))return n;return-1}(s,(t=>"Debug"===t.name));if(-1!==o){const[t]=s.splice(o,1);s.push(t)}return s}function We(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function Ge(t,e,n){if(n[e.name])K&&N.log(`Integration skipped because it was already installed: ${e.name}`);else{if(n[e.name]=e,-1===ze.indexOf(e.name)&&(e.setupOnce(ft,Zt),ze.push(e.name)),e.setup&&"function"==typeof e.setup&&e.setup(t),t.on&&"function"==typeof e.preprocessEvent){const n=e.preprocessEvent.bind(e);t.on("preprocessEvent",((e,r)=>n(e,r,t)))}if(t.addEventProcessor&&"function"==typeof e.processEvent){const n=e.processEvent.bind(e),r=Object.assign(((e,r)=>n(e,r,t)),{id:e.name});t.addEventProcessor(r)}K&&N.log(`Integration installed: ${e.name}`)}}function Ye(t){const e=Pe();e&&e.addIntegration?e.addIntegration(t):K&&N.warn(`Cannot add integration "${t.name}" because no SDK Client is available.`)}function Ve(t,e){return Object.assign((function(...t){return e(...t)}),{id:t})}let Je;const Ke="FunctionToString",Xe=new WeakMap,Ze=()=>({name:Ke,setupOnce(){Je=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=z(this),n=Xe.has(Pe())&&void 0!==e?e:this;return Je.apply(n,t)}}catch(t){}},setup(t){Xe.set(t,!0)}}),Qe=Ve(Ke,Ze),tn=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],en=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],nn="InboundFilters",rn=(t={})=>({name:nn,setupOnce(){},processEvent(e,n,r){const s=r.getOptions(),o=function(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:tn],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[],...t.disableTransactionDefaults?[]:en],ignoreInternal:void 0===t.ignoreInternal||t.ignoreInternal}}(t,s);return function(t,e){if(e.ignoreInternal&&function(t){try{return"SentryError"===t.exception.values[0].type}catch(t){}return!1}(t))return K&&N.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Q(t)}`),!0;if(function(t,e){if(t.type||!e||!e.length)return!1;return function(t){const e=[];t.message&&e.push(t.message);let n;try{n=t.exception.values[t.exception.values.length-1]}catch(t){}n&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`));K&&0===e.length&&N.error(`Could not extract message for event ${Q(t)}`);return e}(t).some((t=>B(t,e)))}(t,e.ignoreErrors))return K&&N.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Q(t)}`),!0;if(function(t,e){if("transaction"!==t.type||!e||!e.length)return!1;const n=t.transaction;return!!n&&B(n,e)}(t,e.ignoreTransactions))return K&&N.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Q(t)}`),!0;if(function(t,e){if(!e||!e.length)return!1;const n=on(t);return!!n&&B(n,e)}(t,e.denyUrls))return K&&N.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Q(t)}.\nUrl: ${on(t)}`),!0;if(!function(t,e){if(!e||!e.length)return!0;const n=on(t);return!n||B(n,e)}(t,e.allowUrls))return K&&N.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Q(t)}.\nUrl: ${on(t)}`),!0;return!1}(e,o)?null:e}}),sn=Ve(nn,rn);function on(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch(t){}return e?function(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(e):null}catch(e){return K&&N.error(`Cannot extract url for event ${Q(t)}`),null}}function an(t,e,n=250,r,s,o,i){if(!(o.exception&&o.exception.values&&i&&y(i.originalException,Error)))return;const a=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var c,u;a&&(o.exception.values=(c=cn(t,e,s,i.originalException,r,o.exception.values,a,0),u=n,c.map((t=>(t.value&&(t.value=L(t.value,u)),t)))))}function cn(t,e,n,r,s,o,i,a){if(o.length>=n+1)return o;let c=[...o];if(y(r[s],Error)){un(i,a);const o=t(e,r[s]),u=c.length;ln(o,s,u,a),c=cn(t,e,n,r[s],s,[o,...c],o,u)}return Array.isArray(r.errors)&&r.errors.forEach(((r,o)=>{if(y(r,Error)){un(i,a);const u=t(e,r),l=c.length;ln(u,`errors[${o}]`,l,a),c=cn(t,e,n,r,s,[u,...c],u,l)}})),c}function un(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,..."AggregateError"===t.type&&{is_exception_group:!0},exception_id:e}}function ln(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function dn(t,e){return t(e.stack||"",1)}function pn(t,e){const n={type:e.name||e.constructor.name,value:e.message},r=dn(t,e);return r.length&&(n.stacktrace={frames:r}),n}const hn="LinkedErrors",fn=Ve(hn,((t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:hn,setupOnce(){},preprocessEvent(t,r,s){const o=s.getOptions();an(pn,o.stackParser,o.maxValueLength,n,e,t,r)}}})),mn=r;function gn(t,e,n=(()=>{})){let r;try{r=t()}catch(t){throw e(t),n(),t}return function(t,e,n){if(m(t))return t.then((t=>(n(),t)),(t=>{throw e(t),n(),t}));return n(),t}(r,e,n)}function yn(t){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const e=Pe(),n=t||e&&e.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function _n(t,e,n=(()=>{}),r=(()=>{})){const s=Zt(),o=Fe(),i=o.getSpan(),a=Tn(t),c=xn(s,{parentSpan:i,spanContext:a,forceTransaction:!1,scope:o});return o.setSpan(c),gn((()=>e(c)),(t=>{c&&c.setStatus("internal_error"),n(t,c)}),(()=>{c&&c.end(),o.setSpan(i),r()}))}function vn(t,e){const n=Tn(t);return ee((()=>Re(t.scope,(r=>{const s=Zt(),o=r.getSpan(),i=t.onlyIfParent&&!o?void 0:xn(s,{parentSpan:o,spanContext:n,forceTransaction:t.forceTransaction,scope:r});return gn((()=>e(i)),(()=>{if(i){const{status:t}=Pt(i);t&&"ok"!==t||i.setStatus("internal_error")}}),(()=>i&&i.end()))}))))}function bn(t,e){const n=Tn(t);return ee((()=>Re(t.scope,(r=>{const s=Zt(),o=r.getSpan(),i=t.onlyIfParent&&!o?void 0:xn(s,{parentSpan:o,spanContext:n,forceTransaction:t.forceTransaction,scope:r});function a(){i&&i.end()}return gn((()=>e(i,a)),(()=>{if(i&&i.isRecording()){const{status:t}=Pt(i);t&&"ok"!==t||i.setStatus("internal_error")}}))}))))}function Sn(t){if(!yn())return;const e=Tn(t),n=Zt(),r=t.scope?t.scope.getSpan():kn();if(t.onlyIfParent&&!r)return;const s=(t.scope||Fe()).clone();return xn(n,{parentSpan:r,spanContext:e,forceTransaction:t.forceTransaction,scope:s})}function kn(){return Fe().getSpan()}const wn=({sentryTrace:t,baggage:e},n)=>{const r=Fe(),{traceparentData:s,dynamicSamplingContext:o,propagationContext:i}=function(t,e){const n=It(t),r=xt(e),{traceId:s,parentSpanId:o,parentSampled:i}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:s||X(),parentSpanId:o||X().substring(16),spanId:X().substring(16),sampled:i,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:s||X(),spanId:X().substring(16)}}}(t,e);r.setPropagationContext(i),K&&s&&N.log(`[Tracing] Continuing trace ${s.traceId}.`);const a={...s,metadata:Y({dynamicSamplingContext:o})};return n?ee((()=>n(a))):a};function xn(t,{parentSpan:e,spanContext:n,forceTransaction:r,scope:s}){if(!yn())return;const o=Qt();let i;if(e&&!r)i=e.startChild(n);else if(e){const r=Bt(e),{traceId:s,spanId:o}=e.spanContext(),a=$t(e);i=t.startTransaction({traceId:s,parentSpanId:o,parentSampled:a,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}else{const{traceId:e,dsc:r,parentSpanId:a,sampled:c}={...o.getPropagationContext(),...s.getPropagationContext()};i=t.startTransaction({traceId:e,parentSpanId:a,parentSampled:c,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}return s.setSpan(i),function(t,e,n){t&&(U(t,Cn,n),U(t,En,e))}(i,s,o),i}function Tn(t){if(t.startTime){const e={...t};return e.startTimestamp=Nt(t.startTime),delete e.startTime,e}return t}const En="_sentryScope",Cn="_sentryIsolationScope";var In;function Rn(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}!function(t){t.Ok="ok";t.DeadlineExceeded="deadline_exceeded";t.Unauthenticated="unauthenticated";t.PermissionDenied="permission_denied";t.NotFound="not_found";t.ResourceExhausted="resource_exhausted";t.InvalidArgument="invalid_argument";t.Unimplemented="unimplemented";t.Unavailable="unavailable";t.InternalError="internal_error";t.UnknownError="unknown_error";t.Cancelled="cancelled";t.AlreadyExists="already_exists";t.FailedPrecondition="failed_precondition";t.Aborted="aborted";t.OutOfRange="out_of_range";t.DataLoss="data_loss"}(In||(In={}));const Mn=Rn;function On(t,e){t.setTag("http.status_code",String(e)),t.setData("http.response.status_code",e);const n=Rn(e);"unknown_error"!==n&&t.setStatus(n)}function An(t){return(t||Zt()).getScope().getTransaction()}const Dn=It;function Nn(t,e,n){const r=An();r&&r.setMeasurement(t,e,n)}function Ln(t){const e=Zt().getStackTop();e.client=t,e.scope.setClient(t)}function Pn(t,...e){const n=new String(String.raw(t,...e));return n.__sentry_template_string__=t.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=e,n}const $n=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Fn(t,e=!1){const{host:n,path:r,pass:s,port:o,projectId:i,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&s?`:${s}`:""}@${n}${o?`:${o}`:""}/${r?`${r}/`:r}${i}`}function Bn(t){const e=$n.exec(t);if(!e)return void D((()=>{console.error(`Invalid Sentry Dsn: ${t}`)}));const[n,r,s="",o,i="",a]=e.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const t=u.match(/^\d+/);t&&(u=t[0])}return jn({host:o,pass:s,path:c,projectId:u,port:i,protocol:n,publicKey:r})}function jn(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Un(t){const e="string"==typeof t?Bn(t):jn(t);if(e&&function(t){if(!M)return!0;const{port:e,projectId:n,protocol:r}=t;return!(["protocol","publicKey","host","projectId"].find((e=>!t[e]&&(N.error(`Invalid Sentry Dsn: ${e} missing`),!0)))||(n.match(/^\d+$/)?function(t){return"http"===t||"https"===t}(r)?e&&isNaN(parseInt(e,10))&&(N.error(`Invalid Sentry Dsn: Invalid port ${e}`),1):(N.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(N.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(e))return e}function Hn(t,e=[]){return[t,e]}function zn(t,e){const[n,r]=t;return[n,[...r,e]]}function qn(t,e){const n=t[1];for(const t of n){if(e(t,t[0].type))return!0}return!1}function Wn(t,e){return(e||new TextEncoder).encode(t)}function Gn(t,e){const[n,r]=t;let s=JSON.stringify(n);function o(t){"string"==typeof s?s="string"==typeof t?s+t:[Wn(s,e),t]:s.push("string"==typeof t?Wn(t,e):t)}for(const t of r){const[e,n]=t;if(o(`\n${JSON.stringify(e)}\n`),"string"==typeof n||n instanceof Uint8Array)o(n);else{let t;try{t=JSON.stringify(n)}catch(e){t=JSON.stringify(de(n))}o(t)}}return"string"==typeof s?s:function(t){const e=t.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(e);let r=0;for(const e of t)n.set(e,r),r+=e.length;return n}(s)}function Yn(t,e){const n="string"==typeof t.data?Wn(t.data,e):t.data;return[Y({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const Vn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Jn(t){return Vn[t]}function Kn(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function Xn(t,e,n,r){const s=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:Fn(r)},...s&&{trace:Y({...s})}}}const Zn=new Map,Qn=new Set;function tr(t,e){return function(t){if(b._sentryModuleMetadata)for(const e of Object.keys(b._sentryModuleMetadata)){const n=b._sentryModuleMetadata[e];if(Qn.has(e))continue;Qn.add(e);const r=t(e);for(const t of r.reverse())if(t.filename){Zn.set(t.filename,n);break}}}(t),Zn.get(e)}const er="ModuleMetadata",nr=()=>({name:er,setupOnce(){},setup(t){"function"==typeof t.on&&t.on("beforeEnvelope",(t=>{qn(t,((t,e)=>{if("event"===e){const e=Array.isArray(t)?t[1]:void 0;e&&(!function(t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const e of t.stacktrace.frames||[])delete e.module_metadata}))}catch(t){}}(e),t[1]=e)}}))}))},processEvent(t,e,n){return function(t,e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const n of e.stacktrace.frames||[]){if(!n.filename)continue;const e=tr(t,n.filename);e&&(n.module_metadata=e)}}))}catch(t){}}(n.getOptions().stackParser,t),t}}),rr=Ve(er,nr),sr="c",or="g",ir="s",ar="d";function cr(t){return t.replace(/[^\w\-./]+/gi,"")}const ur=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function lr(t){return[...t].reduce(((t,e)=>t+function(t){for(const[e,n]of ur)if(t===e)return n;return t}(e)),"")}const dr={[sr]:class{constructor(t){this._value=t}get weight(){return 1}add(t){this._value+=t}toString(){return`${this._value}`}},[or]:class{constructor(t){this._last=t,this._min=t,this._max=t,this._sum=t,this._count=1}get weight(){return 5}add(t){this._last=t,t<this._min&&(this._min=t),t>this._max&&(this._max=t),this._sum+=t,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},[ar]:class{constructor(t){this._value=[t]}get weight(){return this._value.length}add(t){this._value.push(t)}toString(){return this._value.join(":")}},[ir]:class{constructor(t){this.first=t,this._value=new Set([t])}get weight(){return this._value.size}add(t){this._value.add(t)}toString(){return Array.from(this._value).map((t=>"string"==typeof t?function(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e>>>0}(t):t)).join(":")}}};let pr;function hr(t){return pr?pr.get(t):void 0}function fr(t){const e=hr(t);if(!e)return;const n={};for(const[,[t,r]]of e)n[t]||(n[t]=[]),n[t].push(Y(r));return n}class mr{constructor(t){this._client=t,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(t,e,n,r="none",s={},o=it()){const i=Math.floor(o),a=e.replace(/[^\w\-.]+/gi,"_");const c=function(t){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[cr(n)]=lr(String(t[n])));return e}(s),u=function(t){return t.replace(/[^\w]+/gi,"_")}(r),l=function(t,e,n,r){return`${t}${e}${n}${Object.entries(Y(r)).sort(((t,e)=>t[0].localeCompare(e[0])))}`}(t,a,u,c);let d=this._buckets.get(l);const p=d&&"s"===t?d.metric.weight:0;d?(d.metric.add(n),d.timestamp<i&&(d.timestamp=i)):(d={metric:new dr[t](n),timestamp:i,metricType:t,name:a,unit:u,tags:c},this._buckets.set(l,d));!function(t,e,n,r,s,o){const i=kn();if(i){const a=hr(i)||new Map,c=`${t}:${e}@${r}`,u=a.get(o);if(u){const[,t]=u;a.set(o,[c,{min:Math.min(t.min,n),max:Math.max(t.max,n),count:t.count+=1,sum:t.sum+=n,tags:t.tags}])}else a.set(o,[c,{min:n,max:n,count:1,sum:n,tags:s}]);pr||(pr=new WeakMap),pr.set(i,a)}}(t,a,"string"==typeof n?d.metric.weight-p:n,u,s,l)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const t=Array.from(this._buckets).map((([,t])=>t));this._client.captureAggregateMetrics(t)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const gr="MetricsAggregator",yr=()=>({name:gr,setupOnce(){},setup(t){t.metricsAggregator=new mr(t)}});function _r(t,e,n,r={}){const s=Pe(),o=Fe();if(s){if(!s.metricsAggregator)return void(K&&N.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:i,tags:a,timestamp:c}=r,{release:u,environment:l}=s.getOptions(),d=o.getTransaction(),p={};u&&(p.release=u),l&&(p.environment=l),d&&(p.transaction=Pt(d).description||""),K&&N.log(`Adding value of ${n} to ${t} metric ${e}`),s.metricsAggregator.add(t,e,n,i,{...p,...a},c)}}const vr={increment:function(t,e=1,n){_r("c",t,e,n)},distribution:function(t,e,n){_r("d",t,e,n)},set:function(t,e,n){_r("s",t,e,n)},gauge:function(t,e,n){_r("g",t,e,n)},MetricsAggregator:Ve(gr,yr),metricsAggregatorIntegration:yr},br="7";function Sr(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function kr(t,e){return n={sentry_key:t.publicKey,sentry_version:br,...e&&{sentry_client:`${e.name}/${e.version}`}},Object.keys(n).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(n[t])}`)).join("&");var n}function wr(t,e={}){const n="string"==typeof e?e:e.tunnel,r="string"!=typeof e&&e._metadata?e._metadata.sdk:void 0;return n||`${function(t){return`${Sr(t)}${t.projectId}/envelope/`}(t)}?${kr(t,r)}`}function xr(t,e){let n;return qn(t,((t,r)=>(e.includes(r)&&(n=Array.isArray(t)?t[1]:void 0),!!n))),n}function Tr(t,e){return n=>{const r=t(n),s=new Map;function o(e,r){const o=r?`${e}:${r}`:e;let i=s.get(o);if(!i){const a=Bn(e);if(!a)return;const c=wr(a,n.tunnel);i=r?function(t,e){return n=>{const r=t(n);return{...r,send:async t=>{const n=xr(t,["event","transaction","profile","replay_event"]);return n&&(n.release=e),r.send(t)}}}}(t,r)({...n,url:c}):t({...n,url:c}),s.set(o,i)}return[e,i]}return{send:async function(t){const n=e({envelope:t,getEvent:function(e){const n=e&&e.length?e:["event"];return xr(t,n)}}).map((t=>"string"==typeof t?o(t,void 0):o(t.dsn,t.release))).filter((t=>!!t));0===n.length&&n.push(["",r]);return(await Promise.all(n.map((([e,n])=>n.send(function(t,e){return Hn(e?{...t[0],dsn:e}:t[0],t[1])}(t,e))))))[0]},flush:async function(t){const e=[await r.flush(t)];for(const[,n]of s)e.push(await n.flush(t));return e.every((t=>t))}}}}class Er extends Error{constructor(t,e="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=e}}function Cr(t,e,n,r){const s=Kn(n),o=t.type&&"replay_event"!==t.type?t.type:"event";!function(t,e){e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]])}(t,n&&n.sdk);const i=Xn(t,s,r,e);delete t.sdkProcessingMetadata;return Hn(i,[[{type:o},t]])}function Ir(t,e,n,r){const s={sent_at:(new Date).toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),r&&e&&(s.dsn=Fn(e));const o=function(t){const e=function(t){let e="";for(const n of t){const t=Object.entries(n.tags),r=t.length>0?`|#${t.map((([t,e])=>`${t}:${e}`)).join(",")}`:"";e+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return e}(t);return[{type:"statsd",length:e.length},e]}(t);return Hn(s,[o])}const Rr="Not capturing exception because it's already been captured.";class Mr{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Un(t.dsn):K&&N.warn("No DSN provided, client will not send events."),this._dsn){const e=wr(this._dsn,t);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}}captureException(t,e,n){if(nt(t))return void(K&&N.log(Rr));let r=e&&e.event_id;return this._process(this.eventFromException(t,e).then((t=>this._captureEvent(t,e,n))).then((t=>{r=t}))),r}captureMessage(t,e,n,r){let s=n&&n.event_id;const o=d(t)?t:String(t),i=p(t)?this.eventFromMessage(o,e,n):this.eventFromException(t,n);return this._process(i.then((t=>this._captureEvent(t,n,r))).then((t=>{s=t}))),s}captureEvent(t,e,n){if(e&&e.originalException&&nt(e.originalException))return void(K&&N.log(Rr));let r=e&&e.event_id;const s=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,e,s||n).then((t=>{r=t}))),r}captureSession(t){"string"!=typeof t.release?K&&N.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),yt(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const e=this._transport;return e?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then((n=>e.flush(t).then((t=>n&&t))))):lt(!0)}close(t){return this.flush(t).then((t=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),t)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch(e){return K&&N.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){const e=this._integrations[t.name];Ge(this,t,this._integrations),e||We(this,[t])}sendEvent(t,e={}){this.emit("beforeSendEvent",t,e);let n=Cr(t,this._dsn,this._options._metadata,this._options.tunnel);for(const t of e.attachments||[])n=zn(n,Yn(t,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((e=>this.emit("afterSendEvent",t,e)),null)}sendSession(t){const e=function(t,e,n,r){const s=Kn(n);return Hn({sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!r&&e&&{dsn:Fn(e)}},["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()]])}(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}recordDroppedEvent(t,e,n){if(this._options.sendClientReports){const n=`${t}:${e}`;K&&N.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}captureAggregateMetrics(t){K&&N.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const e=Ir(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}on(t,e){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(e)}emit(t,...e){this._hooks[t]&&this._hooks[t].forEach((t=>t(...e)))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=function(t,e){const n={};return e.forEach((e=>{e&&Ge(t,e,n)})),n}(this,t),We(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,e){let n=!1,r=!1;const s=e.exception&&e.exception.values;if(s){r=!0;for(const t of s){const e=t.mechanism;if(e&&!1===e.handled){n=!0;break}}}const o="ok"===t.status;(o&&0===t.errors||o&&n)&&(yt(t,{...n&&{status:"crashed"},errors:t.errors||Number(r||n)}),this.captureSession(t))}_isClientDoneProcessing(t){return new pt((e=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),e(!0)):(n+=1,t&&n>=t&&(clearInterval(r),e(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(t,e,n,r=Qt()){const s=this.getOptions(),o=Object.keys(this._integrations);return!e.integrations&&o.length>0&&(e.integrations=o),this.emit("preprocessEvent",t,e),fe(s,t,e,n,this,r).then((t=>{if(null===t)return t;const e={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(t.contexts&&t.contexts.trace)&&e){const{traceId:r,spanId:s,parentSpanId:o,dsc:i}=e;t.contexts={trace:{trace_id:r,span_id:s,parent_span_id:o},...t.contexts};const a=i||Ft(r,this,n);t.sdkProcessingMetadata={dynamicSamplingContext:a,...t.sdkProcessingMetadata}}return t}))}_captureEvent(t,e={},n){return this._processEvent(t,e,n).then((t=>t.event_id),(t=>{if(K){const e=t;"log"===e.logLevel?N.log(e.message):N.warn(e)}}))}_processEvent(t,e,n){const r=this.getOptions(),{sampleRate:s}=r,o=Ar(t),i=Or(t),a=t.type||"error",c=`before send for type \`${a}\``;if(i&&"number"==typeof s&&Math.random()>s)return this.recordDroppedEvent("sample_rate","error",t),dt(new Er(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const u="replay_event"===a?"replay":a,l=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,e,n,l).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",u,t),new Er("An event processor returned `null`, will not send event.","log");if(e.data&&!0===e.data.__sentry__)return n;const s=function(t,e,n){const{beforeSend:r,beforeSendTransaction:s}=t;if(Or(e)&&r)return r(e,n);if(Ar(e)&&s)return s(e,n);return e}(r,n,e);return function(t,e){const n=`${e} must return \`null\` or a valid event.`;if(m(t))return t.then((t=>{if(!h(t)&&null!==t)throw new Er(n);return t}),(t=>{throw new Er(`${e} rejected with ${t}`)}));if(!h(t)&&null!==t)throw new Er(n);return t}(s,c)})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",u,t),new Er(`${c} returned \`null\`, will not send event.`,"log");const s=n&&n.getSession();!o&&s&&this._updateSessionFromEvent(s,r);const i=r.transaction_info;if(o&&i&&r.transaction!==t.transaction){const t="custom";r.transaction_info={...i,source:t}}return this.sendEvent(r,e),r})).then(null,(t=>{if(t instanceof Er)throw t;throw this.captureException(t,{data:{__sentry__:!0},originalException:t}),new Er(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)}))}_process(t){this._numProcessing++,t.then((t=>(this._numProcessing--,t)),(t=>(this._numProcessing--,t)))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,(t=>{K&&N.error("Error while sending event:",t)}));K&&N.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map((e=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t[e]}}))}}function Or(t){return void 0===t.type}function Ar(t){return"transaction"===t.type}function Dr(t){const e=Pe();e&&e.addEventProcessor&&e.addEventProcessor(t)}function Nr(t){const e=[];function n(t){return e.splice(e.indexOf(t),1)[0]}return{$:e,add:function(r){if(!(void 0===t||e.length<t))return dt(new Er("Not adding Promise because buffer limit was reached."));const s=r();return-1===e.indexOf(s)&&e.push(s),s.then((()=>n(s))).then(null,(()=>n(s).then(null,(()=>{})))),s},drain:function(t){return new pt(((n,r)=>{let s=e.length;if(!s)return n(!0);const o=setTimeout((()=>{t&&t>0&&n(!1)}),t);e.forEach((t=>{lt(t).then((()=>{--s||(clearTimeout(o),n(!0))}),r)}))}))}}}const Lr=6e4;function Pr(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${t}`);return isNaN(r)?Lr:r-e}function $r(t,e,n=Date.now()){return function(t,e){return t[e]||t.all||0}(t,e)>n}function Fr(t,{statusCode:e,headers:n},r=Date.now()){const s={...t},o=n&&n["x-sentry-rate-limits"],i=n&&n["retry-after"];if(o)for(const t of o.trim().split(",")){const[e,n,,,o]=t.split(":",5),i=parseInt(e,10),a=1e3*(isNaN(i)?60:i);if(n)for(const t of n.split(";"))"metric_bucket"===t&&o&&!o.split(";").includes("custom")||(s[t]=r+a);else s.all=r+a}else i?s.all=r+Pr(i,r):429===e&&(s.all=r+6e4);return s}const Br=30;function jr(t,e,n=Nr(t.bufferSize||Br)){let r={};function s(s){const o=[];if(qn(s,((e,n)=>{const s=Jn(n);if($r(r,s)){const r=Ur(e,n);t.recordDroppedEvent("ratelimit_backoff",s,r)}else o.push(e)})),0===o.length)return lt();const i=Hn(s[0],o),a=e=>{qn(i,((n,r)=>{const s=Ur(n,r);t.recordDroppedEvent(e,Jn(r),s)}))};return n.add((()=>e({body:Gn(i,t.textEncoder)}).then((t=>(void 0!==t.statusCode&&(t.statusCode<200||t.statusCode>=300)&&K&&N.warn(`Sentry responded with status code ${t.statusCode} to sent event.`),r=Fr(r,t),t)),(t=>{throw a("network_error"),t})))).then((t=>t),(t=>{if(t instanceof Er)return K&&N.error("Skipped sending event because buffer is full."),a("queue_overflow"),lt();throw t}))}return s.__sentry__baseTransport__=!0,{send:s,flush:t=>n.drain(t)}}function Ur(t,e){if("event"===e||"transaction"===e)return Array.isArray(t)?t[1]:void 0}const Hr="sentry.source",zr="sentry.sample_rate",qr="sentry.op",Wr="sentry.origin",Gr={},Yr={};function Vr(t,e){Gr[t]=Gr[t]||[],Gr[t].push(e)}function Jr(t,e){Yr[t]||(e(),Yr[t]=!0)}function Kr(t,e){const n=t&&Gr[t];if(n)for(const r of n)try{r(e)}catch(e){M&&N.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${le(r)}\nError:`,e)}}let Xr=null;function Zr(t){const e="error";Vr(e,t),Jr(e,Qr)}function Qr(){Xr=b.onerror,b.onerror=function(t,e,n,r,s){return Kr("error",{column:r,error:s,line:n,msg:t,url:e}),!(!Xr||Xr.__SENTRY_LOADER__)&&Xr.apply(this,arguments)},b.onerror.__SENTRY_INSTRUMENTED__=!0}let ts=null;function es(t){const e="unhandledrejection";Vr(e,t),Jr(e,ns)}function ns(){ts=b.onunhandledrejection,b.onunhandledrejection=function(t){return Kr("unhandledrejection",t),!(ts&&!ts.__SENTRY_LOADER__)||ts.apply(this,arguments)},b.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}let rs=!1;function ss(){const t=An();if(t){const e="internal_error";K&&N.log(`[Tracing] Transaction: ${e} -> Global error occured`),t.setStatus(e)}}ss.tag="sentry_tracingErrorCallback";class os{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class is{constructor(t={}){this._traceId=t.traceId||X(),this._spanId=t.spanId||X().substring(16),this._startTime=t.startTimestamp||it(),this.tags=t.tags?{...t.tags}:{},this.data=t.data?{...t.data}:{},this.instrumenter=t.instrumenter||"sentry",this._attributes={},this.setAttributes({[Wr]:t.origin||"manual",[qr]:t.op,...t.attributes}),this._name=t.name||t.description,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.status&&(this._status=t.status),t.endTimestamp&&(this._endTime=t.endTimestamp),void 0!==t.exclusiveTime&&(this._exclusiveTime=t.exclusiveTime),this._measurements=t.measurements?{...t.measurements}:{}}get name(){return this._name||""}set name(t){this.updateName(t)}get description(){return this._name}set description(t){this._name=t}get traceId(){return this._traceId}set traceId(t){this._traceId=t}get spanId(){return this._spanId}set spanId(t){this._spanId=t}set parentSpanId(t){this._parentSpanId=t}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(t){this._sampled=t}get attributes(){return this._attributes}set attributes(t){this._attributes=t}get startTimestamp(){return this._startTime}set startTimestamp(t){this._startTime=t}get endTimestamp(){return this._endTime}set endTimestamp(t){this._endTime=t}get status(){return this._status}set status(t){this._status=t}get op(){return this._attributes[qr]}set op(t){this.setAttribute(qr,t)}get origin(){return this._attributes[Wr]}set origin(t){this.setAttribute(Wr,t)}spanContext(){const{_spanId:t,_traceId:e,_sampled:n}=this;return{spanId:t,traceId:e,traceFlags:n?Ot:0}}startChild(t){const e=new is({...t,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});e.spanRecorder=this.spanRecorder,e.spanRecorder&&e.spanRecorder.add(e);const n=vt(this);if(e.transaction=n,K&&n){const r=`[Tracing] Starting '${t&&t.op||"< unknown op >"}' span on transaction '${Pt(e).description||"< unknown name >"}' (${n.spanContext().spanId}).`;N.log(r),this._logMessage=r}return e}setTag(t,e){return this.tags={...this.tags,[t]:e},this}setData(t,e){return this.data={...this.data,[t]:e},this}setAttribute(t,e){void 0===e?delete this._attributes[t]:this._attributes[t]=e}setAttributes(t){Object.keys(t).forEach((e=>this.setAttribute(e,t[e])))}setStatus(t){return this._status=t,this}setHttpStatus(t){return On(this,t),this}setName(t){this.updateName(t)}updateName(t){return this._name=t,this}isSuccess(){return"ok"===this._status}finish(t){return this.end(t)}end(t){if(this._endTime)return;const e=vt(this);if(K&&e&&e.spanContext().spanId!==this._spanId){const t=this._logMessage;t&&N.log(t.replace("Starting","Finishing"))}this._endTime=Nt(t)}toTraceparent(){return Dt(this)}toContext(){return Y({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(t){return this.data=t.data||{},this._name=t.name||t.description,this._endTime=t.endTimestamp,this.op=t.op,this._parentSpanId=t.parentSpanId,this._sampled=t.sampled,this._spanId=t.spanId||this._spanId,this._startTime=t.startTimestamp||this._startTime,this._status=t.status,this.tags=t.tags||{},this._traceId=t.traceId||this._traceId,this}getTraceContext(){return At(this)}getSpanJSON(){return Y({data:this._getData(),description:this._name,op:this._attributes[qr],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Wr],_metrics_summary:fr(this),profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:t,_attributes:e}=this,n=Object.keys(t).length>0,r=Object.keys(e).length>0;if(n||r)return n&&r?{...t,...e}:n?t:e}}class as extends is{constructor(t,e){super(t),this._contexts={},this._hub=e||Zt(),this._name=t.name||"",this._metadata={...t.metadata},this._trimEnd=t.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(t){this.setName(t)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Hr]&&{source:this._attributes[Hr]},...this._attributes[zr]&&{sampleRate:this._attributes[zr]}}}set metadata(t){this._metadata=t}setName(t,e="custom"){this._name=t,this.setAttribute(Hr,e)}updateName(t){return this._name=t,this}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new os(t)),this.spanRecorder.add(this)}setContext(t,e){null===e?delete this._contexts[t]:this._contexts[t]=e}setMeasurement(t,e,n=""){this._measurements[t]={value:e,unit:n}}setMetadata(t){this._metadata={...this._metadata,...t}}end(t){const e=Nt(t),n=this._finishTransaction(e);if(n)return this._hub.captureEvent(n)}toContext(){return Y({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this._name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){return Bt(this)}setHub(t){this._hub=t}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(t){if(void 0!==this._endTime)return;this._name||(K&&N.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(t);const e=this._hub.getClient();if(e&&e.emit&&e.emit("finishTransaction",this),!0!==this._sampled)return K&&N.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(e&&e.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((t=>t!==this&&Pt(t).timestamp)):[];if(this._trimEnd&&n.length>0){const t=n.map((t=>Pt(t).timestamp)).filter(Boolean);this._endTime=t.reduce(((t,e)=>t>e?t:e))}const{scope:r,isolationScope:s}={scope:(o=this)[En],isolationScope:o[Cn]};var o;const{metadata:i}=this,{source:a}=i,c={contexts:{...this._contexts,trace:At(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...i,capturedSpanScope:r,capturedSpanIsolationScope:s,...Y({dynamicSamplingContext:Bt(this)})},_metrics_summary:fr(this),...a&&{transaction_info:{source:a}}};return Object.keys(this._measurements).length>0&&(K&&N.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),K&&N.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const cs={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},us=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class ls extends os{constructor(t,e,n,r){super(r),this._pushActivity=t,this._popActivity=e,this.transactionSpanId=n}add(t){if(t.spanContext().spanId!==this.transactionSpanId){const e=t.end;t.end=(...n)=>(this._popActivity(t.spanContext().spanId),e.apply(t,n)),void 0===Pt(t).timestamp&&this._pushActivity(t.spanContext().spanId)}super.add(t)}}class ds extends as{constructor(t,e,n=cs.idleTimeout,r=cs.finalTimeout,s=cs.heartbeatInterval,o=!1,i=!1){super(t,e),this._idleHub=e,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=s,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=us[4],this._autoFinishAllowed=!i,o&&(K&&N.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),e.getScope().setSpan(this)),i||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=us[3],this.end())}),this._finalTimeout)}end(t){const e=Nt(t);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){K&&N.log("[Tracing] finishing IdleTransaction",new Date(1e3*e).toISOString(),this.op);for(const t of this._beforeFinishCallbacks)t(this,e);this.spanRecorder.spans=this.spanRecorder.spans.filter((t=>{if(t.spanContext().spanId===this.spanContext().spanId)return!0;Pt(t).timestamp||(t.setStatus("cancelled"),t.end(e),K&&N.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(t,void 0,2)));const{start_timestamp:n,timestamp:r}=Pt(t),s=n&&n<e,o=(this._finalTimeout+this._idleTimeout)/1e3,i=r&&n&&r-n<o;if(K){const e=JSON.stringify(t,void 0,2);s?i||N.log("[Tracing] discarding Span since it finished after Transaction final timeout",e):N.log("[Tracing] discarding Span since it happened after Transaction was finished",e)}return s&&i})),K&&N.log("[Tracing] flushing IdleTransaction")}else K&&N.log("[Tracing] No active IdleTransaction");if(this._onScope){const t=this._idleHub.getScope();t.getTransaction()===this&&t.setSpan(void 0)}return super.end(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const e=t=>{this._finished||this._pushActivity(t)},n=t=>{this._finished||this._popActivity(t)};this.spanRecorder=new ls(e,n,this.spanContext().spanId,t),K&&N.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:e}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===e,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=us[5],this.end(t)))}setFinishReason(t){this._finishReason=t}sendAutoFinishSignal(){this._autoFinishAllowed||(K&&N.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=us[1],this.end(t))}),this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),K&&N.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,K&&N.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(K&&N.log(`[Tracing] popActivity ${t}`),delete this.activities[t],K&&N.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const t=it();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=us[5],this.end(t)):this._restartIdleTimeout(t+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?this._autoFinishAllowed&&(K&&N.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=us[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){K&&N.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function ps(t,e,n){if(!yn(e))return t.sampled=!1,t;if(void 0!==t.sampled)return t.setAttribute(zr,Number(t.sampled)),t;let r;return"function"==typeof e.tracesSampler?(r=e.tracesSampler(n),t.setAttribute(zr,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==e.tracesSampleRate?(r=e.tracesSampleRate,t.setAttribute(zr,Number(r))):(r=1,t.setAttribute(zr,r)),hs(r)?r?(t.sampled=Math.random()<r,t.sampled?(K&&N.log(`[Tracing] starting ${t.op} transaction - ${Pt(t).description}`),t):(K&&N.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),t)):(K&&N.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),t.sampled=!1,t):(K&&N.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)}function hs(t){return g(t)||"number"!=typeof t&&"boolean"!=typeof t?(K&&N.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1):!(t<0||t>1)||(K&&N.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${t}.`),!1)}function fs(){const t=this.getScope().getSpan();return t?{"sentry-trace":Dt(t)}:{}}function ms(t,e){const n=this.getClient(),r=n&&n.getOptions()||{},s=r.instrumenter||"sentry",o=t.instrumenter||"sentry";s!==o&&(K&&N.error(`A transaction was started with instrumenter=\`${o}\`, but the SDK is configured with the \`${s}\` instrumenter.\nThe transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),t.sampled=!1);let i=new as(t,this);return i=ps(i,r,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...e}),i.isRecording()&&i.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",i),i}function gs(t,e,n,r,s,o,i,a=!1){const c=t.getClient(),u=c&&c.getOptions()||{};let l=new ds(e,t,n,r,i,s,a);return l=ps(l,u,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...o}),l.isRecording()&&l.initSpanRecorder(u._experiments&&u._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",l),l}function ys(){const t=Kt();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=ms),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=fs),rs||(rs=!0,Zr(ss),es(ss)))}const _s=b;let vs=0;function bs(){return vs>0}function Ss(t,e={},n){if("function"!=typeof t)return t;try{const e=t.__sentry_wrapped__;if(e)return e;if(z(t))return t}catch(e){return t}const r=function(){const r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const s=r.map((t=>Ss(t,e)));return t.apply(this,s)}catch(t){throw vs++,setTimeout((()=>{vs--})),Re((n=>{n.addEventProcessor((t=>(e.mechanism&&(tt(t,void 0,void 0),et(t,e.mechanism)),t.extra={...t.extra,arguments:r},t))),_e(t)})),t}};try{for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}catch(t){}H(r,t),U(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch(t){}return r}var ks=n(661);const ws="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function xs(t,e){const n=Es(t,e),r={type:e&&e.name,value:Is(e)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Ts(t,e){return{exception:{values:[xs(t,e)]}}}function Es(t,e){const n=e.stacktrace||e.stack||"",r=function(t){if(t){if("number"==typeof t.framesToPop)return t.framesToPop;if(Cs.test(t.message))return 1}return 0}(e);try{return t(n,r)}catch(t){}return[]}const Cs=/Minified React error #\d+;/i;function Is(t){const e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function Rs(t,e,n,r){const s=Os(t,e,n&&n.syntheticException||void 0,r);return et(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),lt(s)}function Ms(t,e,n="info",r,s){const o=As(t,e,r&&r.syntheticException||void 0,s);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),lt(o)}function Os(t,e,n,r,s){let o;if(c(e)&&e.error){return Ts(t,e.error)}if(u(e)||a(e,"DOMException")){const s=e;if("stack"in e)o=Ts(t,e);else{const e=s.name||(u(s)?"DOMError":"DOMException"),i=s.message?`${e}: ${s.message}`:e;o=As(t,i,n,r),tt(o,i)}return"code"in s&&(o.tags={...o.tags,"DOMException.code":`${s.code}`}),o}if(i(e))return Ts(t,e);if(h(e)||f(e)){return o=function(t,e,n,r){const s=Pe(),o=s&&s.getOptions().normalizeDepth,i={exception:{values:[{type:f(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:Ds(e,{isUnhandledRejection:r})}]},extra:{__serialized__:pe(e,o)}};if(n){const e=Es(t,n);e.length&&(i.exception.values[0].stacktrace={frames:e})}return i}(t,e,n,s),et(o,{synthetic:!0}),o}return o=As(t,e,n,r),tt(o,`${e}`,void 0),et(o,{synthetic:!0}),o}function As(t,e,n,r){const s={};if(r&&n){const r=Es(t,n);r.length&&(s.exception={values:[{value:e,stacktrace:{frames:r}}]})}if(d(e)){const{__sentry_template_string__:t,__sentry_template_values__:n}=e;return s.logentry={message:t,params:n},s}return s.message=e,s}function Ds(t,{isUnhandledRejection:e}){const n=function(t,e=40){const n=Object.keys(q(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return L(n[0],e);for(let t=n.length;t>0;t--){const r=n.slice(0,t).join(", ");if(!(r.length>e))return t===n.length?r:L(r,e)}return""}(t),r=e?"promise rejection":"exception";if(c(t))return`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``;if(f(t)){return`Event \`${function(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch(t){}}(t)}\` (type=${t.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function Ns(t,{metadata:e,tunnel:n,dsn:r}){const s={event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!n&&!!r&&{dsn:Fn(r)}},o=function(t){return[{type:"user_report"},t]}(t);return Hn(s,[o])}class Ls extends Mr{constructor(t){!function(t,e,n=[e],r="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:n.map((t=>({name:`${r}:@sentry/${t}`,version:Gt}))),version:Gt}),t._metadata=s}(t,"browser",["browser"],_s.SENTRY_SDK_SOURCE||(0,ks.S)()),super(t),t.sendClientReports&&_s.document&&_s.document.addEventListener("visibilitychange",(()=>{"hidden"===_s.document.visibilityState&&this._flushOutcomes()}))}eventFromException(t,e){return Rs(this._options.stackParser,t,e,this._options.attachStacktrace)}eventFromMessage(t,e="info",n){return Ms(this._options.stackParser,t,e,n,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled())return void(ws&&N.warn("SDK not enabled, will not capture user feedback."));const e=Ns(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(e)}_prepareEvent(t,e,n){return t.platform=t.platform||"javascript",super._prepareEvent(t,e,n)}_flushOutcomes(){const t=this._clearOutcomes();if(0===t.length)return void(ws&&N.log("No outcomes to send"));if(!this._dsn)return void(ws&&N.log("No dsn provided, will not send outcomes"));ws&&N.log("Sending outcomes:",t);const e=(n=t,Hn((r=this._options.tunnel&&Fn(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:s||ot(),discarded_events:n}]]));var n,r,s;this._sendEnvelope(e)}}const Ps=S();function $s(){if(!("fetch"in Ps))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(t){return!1}}function Fs(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Bs(){if("string"==typeof EdgeRuntime)return!0;if(!$s())return!1;if(Fs(Ps.fetch))return!0;let t=!1;const e=Ps.document;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=Fs(n.contentWindow.fetch)),e.head.removeChild(n)}catch(t){M&&N.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return t}let js;function Us(t,e=function(){if(js)return js;if(Fs(_s.fetch))return js=_s.fetch.bind(_s);const t=_s.document;let e=_s.fetch;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(e=r.fetch),t.head.removeChild(n)}catch(t){ws&&N.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return js=e.bind(_s)}()){let n=0,r=0;return jr(t,(function(s){const o=s.body.length;n+=o,r++;const i={body:s.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{return e(t.url,i).then((t=>(n-=o,r--,{statusCode:t.status,headers:{"x-sentry-rate-limits":t.headers.get("X-Sentry-Rate-Limits"),"retry-after":t.headers.get("Retry-After")}})))}catch(t){return js=void 0,n-=o,r--,dt(t)}}))}const Hs=4;function zs(t){return jr(t,(function(e){return new pt(((n,r)=>{const s=new XMLHttpRequest;s.onerror=r,s.onreadystatechange=()=>{s.readyState===Hs&&n({statusCode:s.status,headers:{"x-sentry-rate-limits":s.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":s.getResponseHeader("Retry-After")}})},s.open("POST",t.url);for(const e in t.headers)Object.prototype.hasOwnProperty.call(t.headers,e)&&s.setRequestHeader(e,t.headers[e]);s.send(e.body)}))}))}const qs="?";function Ws(t,e,n,r){const s={filename:t,function:e,in_app:!0};return void 0!==n&&(s.lineno=n),void 0!==r&&(s.colno=r),s}const Gs=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ys=/\((\S*)(?::(\d+))(?::(\d+))\)/,Vs=[30,t=>{const e=Gs.exec(t);if(e){if(e[2]&&0===e[2].indexOf("eval")){const t=Ys.exec(e[2]);t&&(e[2]=t[1],e[3]=t[2],e[4]=t[3])}const[t,n]=io(e[1]||qs,e[2]);return Ws(n,t,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],Js=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Ks=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Xs=[50,t=>{const e=Js.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const t=Ks.exec(e[3]);t&&(e[1]=e[1]||"eval",e[3]=t[1],e[4]=t[2],e[5]="")}let t=e[3],n=e[1]||qs;return[n,t]=io(n,t),Ws(t,n,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}],Zs=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Qs=[40,t=>{const e=Zs.exec(t);return e?Ws(e[2],e[1]||qs,+e[3],e[4]?+e[4]:void 0):void 0}],to=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,eo=[10,t=>{const e=to.exec(t);return e?Ws(e[2],e[3]||qs,+e[1]):void 0}],no=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,ro=[20,t=>{const e=no.exec(t);return e?Ws(e[5],e[3]||e[4]||qs,+e[1],+e[2]):void 0}],so=[Vs,Xs,Qs],oo=ce(...so),io=(t,e)=>{const n=-1!==t.indexOf("safari-extension"),r=-1!==t.indexOf("safari-web-extension");return n||r?[-1!==t.indexOf("@")?t.split("@")[0]:qs,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},ao=S();const co=b;let uo;function lo(t){const e="history";Vr(e,t),Jr(e,po)}function po(){if(!function(){const t=ao.chrome,e=t&&t.app&&t.app.runtime,n="history"in ao&&!!ao.history.pushState&&!!ao.history.replaceState;return!e&&n}())return;const t=co.onpopstate;function e(t){return function(...e){const n=e.length>2?e[2]:void 0;if(n){const t=uo,e=String(n);uo=e;Kr("history",{from:t,to:e})}return t.apply(this,e)}}co.onpopstate=function(...e){const n=co.location.href,r=uo;uo=n;if(Kr("history",{from:r,to:n}),t)try{return t.apply(this,e)}catch(t){}},j(co.history,"pushState",e),j(co.history,"replaceState",e)}function ho(t){const e="console";Vr(e,t),Jr(e,fo)}function fo(){"console"in b&&O.forEach((function(t){t in b.console&&j(b.console,t,(function(e){return A[t]=e,function(...e){Kr("console",{args:e,level:t});const n=A[t];n&&n.apply(b.console,e)}}))}))}const mo=b,go=1e3;let yo,_o,vo;function bo(t){Vr("dom",t),Jr("dom",So)}function So(){if(!mo.document)return;const t=Kr.bind(null,"dom"),e=ko(t,!0);mo.document.addEventListener("click",e,!1),mo.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((e=>{const n=mo[e]&&mo[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(j(n,"addEventListener",(function(e){return function(n,r,s){if("click"===n||"keypress"==n)try{const r=this,o=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},i=o[n]=o[n]||{refCount:0};if(!i.handler){const r=ko(t);i.handler=r,e.call(this,n,r,s)}i.refCount++}catch(t){}return e.call(this,n,r,s)}})),j(n,"removeEventListener",(function(t){return function(e,n,r){if("click"===e||"keypress"==e)try{const n=this,s=n.__sentry_instrumentation_handlers__||{},o=s[e];o&&(o.refCount--,o.refCount<=0&&(t.call(this,e,o.handler,r),o.handler=void 0,delete s[e]),0===Object.keys(s).length&&delete n.__sentry_instrumentation_handlers__)}catch(t){}return t.call(this,e,n,r)}})))}))}function ko(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(t){try{return t.target}catch(t){return null}}(n);if(function(t,e){return"keypress"===t&&(!e||!e.tagName||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!e.isContentEditable)}(n.type,r))return;U(n,"_sentryCaptured",!0),r&&!r._sentryId&&U(r,"_sentryId",X());const s="keypress"===n.type?"input":n.type;if(!function(t){if(t.type!==_o)return!1;try{if(!t.target||t.target._sentryId!==vo)return!1}catch(t){}return!0}(n)){t({event:n,name:s,global:e}),_o=n.type,vo=r?r._sentryId:void 0}clearTimeout(yo),yo=mo.setTimeout((()=>{vo=void 0,_o=void 0}),go)}}const wo=b,xo="__sentry_xhr_v3__";function To(t){Vr("xhr",t),Jr("xhr",Eo)}function Eo(){if(!wo.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;j(t,"open",(function(t){return function(...e){const n=Date.now(),r=l(e[0])?e[0].toUpperCase():void 0,s=function(t){if(l(t))return t;try{return t.toString()}catch(t){}return}(e[1]);if(!r||!s)return t.apply(this,e);this[xo]={method:r,url:s,request_headers:{}},"POST"===r&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const t=this[xo];if(t&&4===this.readyState){try{t.status_code=this.status}catch(t){}Kr("xhr",{args:[r,s],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?j(this,"onreadystatechange",(function(t){return function(...e){return o(),t.apply(this,e)}})):this.addEventListener("readystatechange",o),j(this,"setRequestHeader",(function(t){return function(...e){const[n,r]=e,s=this[xo];return s&&l(n)&&l(r)&&(s.request_headers[n.toLowerCase()]=r),t.apply(this,e)}})),t.apply(this,e)}})),j(t,"send",(function(t){return function(...e){const n=this[xo];if(!n)return t.apply(this,e);void 0!==e[0]&&(n.body=e[0]);return Kr("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),t.apply(this,e)}}))}function Co(t){const e="fetch";Vr(e,t),Jr(e,Io)}function Io(){Bs()&&j(b,"fetch",(function(t){return function(...e){const{method:n,url:r}=function(t){if(0===t.length)return{method:"GET",url:""};if(2===t.length){const[e,n]=t;return{url:Mo(e),method:Ro(n,"method")?String(n.method).toUpperCase():"GET"}}const e=t[0];return{url:Mo(e),method:Ro(e,"method")?String(e.method).toUpperCase():"GET"}}(e),s={args:e,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Kr("fetch",{...s}),t.apply(b,e).then((t=>(Kr("fetch",{...s,endTimestamp:Date.now(),response:t}),t)),(t=>{throw Kr("fetch",{...s,endTimestamp:Date.now(),error:t}),t}))}}))}function Ro(t,e){return!!t&&"object"==typeof t&&!!t[e]}function Mo(t){return"string"==typeof t?t:t?Ro(t,"url")?t.url:t.toString?t.toString():"":""}const Oo=["fatal","error","warning","log","info","debug"];function Ao(t){return"warn"===t?"warning":Oo.includes(t)?t:"log"}function Do(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}const No=1024,Lo="Breadcrumbs",Po=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:Lo,setupOnce(){},setup(t){e.console&&ho(function(t){return function(e){if(Pe()!==t)return;const n={category:"console",data:{arguments:e.args,logger:"console"},level:Ao(e.level),message:$(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;n.message=`Assertion failed: ${$(e.args.slice(1)," ")||"console.assert"}`,n.data.arguments=e.args.slice(1)}ke(n,{input:e.args,level:e.level})}}(t)),e.dom&&bo(function(t,e){return function(n){if(Pe()!==t)return;let r,s,o="object"==typeof e?e.serializeAttribute:void 0,i="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;i&&i>No&&(ws&&N.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=No),"string"==typeof o&&(o=[o]);try{const t=n.event,e=function(t){return!!t&&!!t.target}(t)?t.target:t;r=T(e,{keyAttrs:o,maxStringLength:i}),s=R(e)}catch(t){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};s&&(a.data={"ui.component_name":s}),ke(a,{event:n.event,name:n.name,global:n.global})}}(t,e.dom)),e.xhr&&To(function(t){return function(e){if(Pe()!==t)return;const{startTimestamp:n,endTimestamp:r}=e,s=e.xhr[xo];if(!n||!r||!s)return;const{method:o,url:i,status_code:a,body:c}=s;ke({category:"xhr",data:{method:o,url:i,status_code:a},type:"http"},{xhr:e.xhr,input:c,startTimestamp:n,endTimestamp:r})}}(t)),e.fetch&&Co(function(t){return function(e){if(Pe()!==t)return;const{startTimestamp:n,endTimestamp:r}=e;if(r&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.error){ke({category:"fetch",data:e.fetchData,level:"error",type:"http"},{data:e.error,input:e.args,startTimestamp:n,endTimestamp:r})}else{const t=e.response;ke({category:"fetch",data:{...e.fetchData,status_code:t&&t.status},type:"http"},{input:e.args,response:t,startTimestamp:n,endTimestamp:r})}}}(t)),e.history&&lo(function(t){return function(e){if(Pe()!==t)return;let n=e.from,r=e.to;const s=Do(_s.location.href);let o=n?Do(n):void 0;const i=Do(r);o&&o.path||(o=s),s.protocol===i.protocol&&s.host===i.host&&(r=i.relative),s.protocol===o.protocol&&s.host===o.host&&(n=o.relative),ke({category:"navigation",data:{from:n,to:r}})}}(t)),e.sentry&&t.on&&t.on("beforeSendEvent",function(t){return function(e){Pe()===t&&ke({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:Q(e)},{event:e})}}(t))}}},$o=Ve(Lo,Po);const Fo="Dedupe",Bo=()=>{let t;return{name:Fo,setupOnce(){},processEvent(e){if(e.type)return e;try{if(function(t,e){if(!e)return!1;if(function(t,e){const n=t.message,r=e.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Ho(t,e))return!1;if(!Uo(t,e))return!1;return!0}(t,e))return!0;if(function(t,e){const n=zo(e),r=zo(t);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Ho(t,e))return!1;if(!Uo(t,e))return!1;return!0}(t,e))return!0;return!1}(e,t))return ws&&N.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){}return t=e}}},jo=Ve(Fo,Bo);function Uo(t,e){let n=qo(t),r=qo(e);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let t=0;t<r.length;t++){const e=r[t],s=n[t];if(e.filename!==s.filename||e.lineno!==s.lineno||e.colno!==s.colno||e.function!==s.function)return!1}return!0}function Ho(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(t){return!1}}function zo(t){return t.exception&&t.exception.values&&t.exception.values[0]}function qo(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(t){return}}const Wo="GlobalHandlers",Go=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:Wo,setupOnce(){Error.stackTraceLimit=50},setup(t){e.onerror&&(!function(t){Zr((e=>{const{stackParser:n,attachStacktrace:r}=Ko();if(Pe()!==t||bs())return;const{msg:s,url:o,line:i,column:a,error:u}=e,d=void 0===u&&l(s)?function(t,e,n,r){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let o=c(t)?t.message:t,i="Error";const a=o.match(s);a&&(i=a[1],o=a[2]);const u={exception:{values:[{type:i,value:o}]}};return Vo(u,e,n,r)}(s,o,i,a):Vo(Os(n,u||s,void 0,r,!1),o,i,a);d.level="error",be(d,{originalException:u,mechanism:{handled:!1,type:"onerror"}})}))}(t),Jo("onerror")),e.onunhandledrejection&&(!function(t){es((e=>{const{stackParser:n,attachStacktrace:r}=Ko();if(Pe()!==t||bs())return;const s=function(t){if(p(t))return t;const e=t;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(t){}return t}(e),o=p(s)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(s)}`}]}}:Os(n,s,void 0,r,!0);o.level="error",be(o,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(t),Jo("onunhandledrejection"))}}},Yo=Ve(Wo,Go);function Vo(t,e,n,r){const s=t.exception=t.exception||{},o=s.values=s.values||[],i=o[0]=o[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,d=isNaN(parseInt(n,10))?void 0:n,p=l(e)&&e.length>0?e:C();return 0===c.length&&c.push({colno:u,filename:p,function:"?",in_app:!0,lineno:d}),t}function Jo(t){ws&&N.log(`Global Handler attached: ${t}`)}function Ko(){const t=Pe();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Xo="HttpContext",Zo=()=>({name:Xo,setupOnce(){},preprocessEvent(t){if(!_s.navigator&&!_s.location&&!_s.document)return;const e=t.request&&t.request.url||_s.location&&_s.location.href,{referrer:n}=_s.document||{},{userAgent:r}=_s.navigator||{},s={...t.request&&t.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},o={...t.request,...e&&{url:e},headers:s};t.request=o}}),Qo=Ve(Xo,Zo),ti="LinkedErrors",ei=(t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:ti,setupOnce(){},preprocessEvent(t,r,s){const o=s.getOptions();an(xs,o.stackParser,o.maxValueLength,n,e,t,r)}}},ni=Ve(ti,ei),ri=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],si="TryCatch",oi=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:si,setupOnce(){e.setTimeout&&j(_s,"setTimeout",ai),e.setInterval&&j(_s,"setInterval",ai),e.requestAnimationFrame&&j(_s,"requestAnimationFrame",ci),e.XMLHttpRequest&&"XMLHttpRequest"in _s&&j(XMLHttpRequest.prototype,"send",ui);const t=e.eventTarget;if(t){(Array.isArray(t)?t:ri).forEach(li)}}}},ii=Ve(si,oi);function ai(t){return function(...e){const n=e[0];return e[0]=Ss(n,{mechanism:{data:{function:le(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function ci(t){return function(e){return t.apply(this,[Ss(e,{mechanism:{data:{function:"requestAnimationFrame",handler:le(t)},handled:!1,type:"instrument"}})])}}function ui(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((t=>{t in n&&"function"==typeof n[t]&&j(n,t,(function(e){const n={mechanism:{data:{function:t,handler:le(e)},handled:!1,type:"instrument"}},r=z(e);return r&&(n.mechanism.data.handler=le(r)),Ss(e,n)}))})),t.apply(this,e)}}function li(t){const e=_s,n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(j(n,"addEventListener",(function(e){return function(n,r,s){try{"function"==typeof r.handleEvent&&(r.handleEvent=Ss(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:le(r),target:t},handled:!1,type:"instrument"}}))}catch(t){}return e.apply(this,[n,Ss(r,{mechanism:{data:{function:"addEventListener",handler:le(r),target:t},handled:!1,type:"instrument"}}),s])}})),j(n,"removeEventListener",(function(t){return function(e,n,r){const s=n;try{const n=s&&s.__sentry_wrapped__;n&&t.call(this,e,n,r)}catch(t){}return t.call(this,e,s,r)}})))}const di=[rn(),Ze(),oi(),Po(),Go(),ei(),Bo(),Zo()];function pi(t){return[...di]}function hi(t={}){void 0===t.defaultIntegrations&&(t.defaultIntegrations=pi()),void 0===t.release&&("string"==typeof __SENTRY_RELEASE__&&(t.release=__SENTRY_RELEASE__),_s.SENTRY_RELEASE&&_s.SENTRY_RELEASE.id&&(t.release=_s.SENTRY_RELEASE.id)),void 0===t.autoSessionTracking&&(t.autoSessionTracking=!0),void 0===t.sendClientReports&&(t.sendClientReports=!0);const e={...t,stackParser:(n=t.stackParser||oo,Array.isArray(n)?ce(...n):n),integrations:qe(t),transport:t.transport||($s()?Us:zs)};var n;!function(t,e){!0===e.debug&&(K?N.enable():D((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),Fe().update(e.initialScope);const n=new t(e);Ln(n),function(t){t.init?t.init():t.setupIntegrations&&t.setupIntegrations()}(n)}(Ls,e),t.autoSessionTracking&&function(){if(void 0===_s.document)return void(ws&&N.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));Be({ignoreDuration:!0}),He(),lo((({from:t,to:e})=>{void 0!==t&&t!==e&&(Be({ignoreDuration:!0}),He())}))}()}const fi=(t={},e=Zt())=>{if(!_s.document)return void(ws&&N.error("Global document not defined in showReportDialog call"));const{client:n,scope:r}=e.getStackTop(),s=t.dsn||n&&n.getDsn();if(!s)return void(ws&&N.error("DSN not configured for showReportDialog call"));r&&(t.user={...r.getUser(),...t.user}),t.eventId||(t.eventId=e.lastEventId());const o=_s.document.createElement("script");o.async=!0,o.crossOrigin="anonymous",o.src=function(t,e){const n=Un(t);if(!n)return"";const r=`${Sr(n)}embed/error-page/`;let s=`dsn=${Fn(n)}`;for(const t in e)if("dsn"!==t&&"onClose"!==t)if("user"===t){const t=e.user;if(!t)continue;t.name&&(s+=`&name=${encodeURIComponent(t.name)}`),t.email&&(s+=`&email=${encodeURIComponent(t.email)}`)}else s+=`&${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`;return`${r}?${s}`}(s,t),t.onLoad&&(o.onload=t.onLoad);const{onClose:i}=t;if(i){const t=e=>{if("__sentry_reportdialog_closed__"===e.data)try{i()}finally{_s.removeEventListener("message",t)}};_s.addEventListener("message",t)}const a=_s.document.head||_s.document.body;a?a.appendChild(o):ws&&N.error("Not injecting report dialog. No injection point found in HTML")};function mi(){}function gi(t){t()}function yi(t){return Ss(t)()}function _i(t){const e=Pe();e&&e.captureUserFeedback(t)}function vi(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}return n}function bi(t,e){const n=e&&function(t){return void 0!==t.getClient}(e)?e.getClient():e,r=n&&n.getDsn(),s=n&&n.getOptions().tunnel;return function(t,e){return!!e&&t.includes(e.host)}(t,r)||function(t,e){if(!e)return!1;return Si(t)===Si(e)}(t,s)}function Si(t){return"/"===t[t.length-1]?t.slice(0,-1):t}var ki=n(305);function wi(){return"undefined"!=typeof window&&(!(0,ki.KV)()||void 0!==b.process&&"renderer"===b.process.type)}const xi="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Ti=(t,e,n)=>{let r,s;return o=>{e.value>=0&&(o||n)&&(s=e.value-(r||0),(s||void 0===r)&&(r=e.value,e.delta=s,t(e)))}},Ei=b,Ci=()=>Ei.__WEB_VITALS_POLYFILL__?Ei.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const t=Ei.performance.timing,e=Ei.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==e?"back_forward":1===e?"reload":"navigate"};for(const e in t)"navigationStart"!==e&&"toJSON"!==e&&(n[e]=Math.max(t[e]-t.navigationStart,0));return n})()):Ei.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Ii=()=>{const t=Ci();return t&&t.activationStart||0},Ri=(t,e)=>{const n=Ci();let r="navigate";return n&&(r=Ei.document&&Ei.document.prerendering||Ii()>0?"prerender":n.type.replace(/_/g,"-")),{name:t,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Mi=(t,e,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver((t=>{e(t.getEntries())}));return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch(t){}},Oi=(t,e)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==Ei.document.visibilityState||(t(r),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};Ei.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))},Ai=(t,e={})=>{const n=Ri("CLS",0);let r,s=0,o=[];const i=t=>{t.forEach((t=>{if(!t.hadRecentInput){const e=o[0],i=o[o.length-1];s&&0!==o.length&&t.startTime-i.startTime<1e3&&t.startTime-e.startTime<5e3?(s+=t.value,o.push(t)):(s=t.value,o=[t]),s>n.value&&(n.value=s,n.entries=o,r&&r())}}))},a=Mi("layout-shift",i);if(a){r=Ti(t,n,e.reportAllChanges);const s=()=>{i(a.takeRecords()),r(!0)};return Oi(s),s}};let Di=-1;const Ni=()=>(Di<0&&(Ei.document&&Ei.document.visibilityState&&(Di="hidden"!==Ei.document.visibilityState||Ei.document.prerendering?1/0:0),Oi((({timeStamp:t})=>{Di=t}),!0)),{get firstHiddenTime(){return Di}}),Li=t=>{const e=Ni(),n=Ri("FID");let r;const s=t=>{t.startTime<e.firstHiddenTime&&(n.value=t.processingStart-t.startTime,n.entries.push(t),r(!0))},o=t=>{t.forEach(s)},i=Mi("first-input",o);r=Ti(t,n),i&&Oi((()=>{o(i.takeRecords()),i.disconnect()}),!0)};let Pi=0,$i=1/0,Fi=0;const Bi=t=>{t.forEach((t=>{t.interactionId&&($i=Math.min($i,t.interactionId),Fi=Math.max(Fi,t.interactionId),Pi=Fi?(Fi-$i)/7+1:0)}))};let ji;const Ui=()=>{"interactionCount"in performance||ji||(ji=Mi("event",Bi,{type:"event",buffered:!0,durationThreshold:0}))},Hi=()=>ji?Pi:performance.interactionCount||0,zi=[],qi={},Wi=t=>{const e=zi[zi.length-1],n=qi[t.interactionId];if(n||zi.length<10||t.duration>e.latency){if(n)n.entries.push(t),n.latency=Math.max(n.latency,t.duration);else{const e={id:t.interactionId,latency:t.duration,entries:[t]};qi[e.id]=e,zi.push(e)}zi.sort(((t,e)=>e.latency-t.latency)),zi.splice(10).forEach((t=>{delete qi[t.id]}))}},Gi=(t,e)=>{e=e||{},Ui();const n=Ri("INP");let r;const s=t=>{t.forEach((t=>{if(t.interactionId&&Wi(t),"first-input"===t.entryType){!zi.some((e=>e.entries.some((e=>t.duration===e.duration&&t.startTime===e.startTime))))&&Wi(t)}}));const e=(()=>{const t=Math.min(zi.length-1,Math.floor(Hi()/50));return zi[t]})();e&&e.latency!==n.value&&(n.value=e.latency,n.entries=e.entries,r())},o=Mi("event",s,{durationThreshold:e.durationThreshold||40});r=Ti(t,n,e.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),Oi((()=>{s(o.takeRecords()),n.value<0&&Hi()>0&&(n.value=0,n.entries=[]),r(!0)})))},Yi={},Vi=t=>{const e=Ni(),n=Ri("LCP");let r;const s=t=>{const s=t[t.length-1];if(s){const t=Math.max(s.startTime-Ii(),0);t<e.firstHiddenTime&&(n.value=t,n.entries=[s],r())}},o=Mi("largest-contentful-paint",s);if(o){r=Ti(t,n);const e=()=>{Yi[n.id]||(s(o.takeRecords()),o.disconnect(),Yi[n.id]=!0,r(!0))};return["keydown","click"].forEach((t=>{Ei.document&&addEventListener(t,e,{once:!0,capture:!0})})),Oi(e,!0),e}},Ji=t=>{Ei.document&&(Ei.document.prerendering?addEventListener("prerenderingchange",(()=>Ji(t)),!0):"complete"!==Ei.document.readyState?addEventListener("load",(()=>Ji(t)),!0):setTimeout(t,0))},Ki=(t,e)=>{e=e||{};const n=Ri("TTFB"),r=Ti(t,n,e.reportAllChanges);Ji((()=>{const t=Ci();if(t){if(n.value=Math.max(t.responseStart-Ii(),0),n.value<0||n.value>performance.now())return;n.entries=[t],r(!0)}}))},Xi={},Zi={};let Qi,ta,ea,na,ra;function sa(t,e=!1){return pa("lcp",t,ua,ea,e)}function oa(t,e){return ha(t,e),Zi[t]||(!function(t){const e={};"event"===t&&(e.durationThreshold=0);Mi(t,(e=>{ia(t,{entries:e})}),e)}(t),Zi[t]=!0),fa(t,e)}function ia(t,e){const n=Xi[t];if(n&&n.length)for(const r of n)try{r(e)}catch(e){xi&&N.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${le(r)}\nError:`,e)}}function aa(){return Ai((t=>{ia("cls",{metric:t}),Qi=t}),{reportAllChanges:!0})}function ca(){return Li((t=>{ia("fid",{metric:t}),ta=t}))}function ua(){return Vi((t=>{ia("lcp",{metric:t}),ea=t}))}function la(){return Ki((t=>{ia("ttfb",{metric:t}),na=t}))}function da(){return Gi((t=>{ia("inp",{metric:t}),ra=t}))}function pa(t,e,n,r,s=!1){let o;return ha(t,e),Zi[t]||(o=n(),Zi[t]=!0),r&&e({metric:r}),fa(t,e,s?o:void 0)}function ha(t,e){Xi[t]=Xi[t]||[],Xi[t].push(e)}function fa(t,e,n){return()=>{n&&n();const r=Xi[t];if(!r)return;const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}const ma=b,ga="sentryReplaySession",ya="replay_event",_a="Unable to send Replay",va=15e4,ba=5e3,Sa=2e7,ka=36e5;function wa(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}return n}var xa;function Ta(t){const e=wa([t,"optionalAccess",t=>t.host]);return Boolean(wa([e,"optionalAccess",t=>t.shadowRoot])===t)}function Ea(t){return"[object ShadowRoot]"===Object.prototype.toString.call(t)}function Ca(t){try{const n=t.rules||t.cssRules;return n?((e=Array.from(n,Ia).join("")).includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e):null}catch(t){return null}var e}function Ia(t){let e;if(function(t){return"styleSheet"in t}(t))try{e=Ca(t.styleSheet)||function(t){const{cssText:e}=t;if(e.split('"').length<3)return e;const n=["@import",`url(${JSON.stringify(t.href)})`];return""===t.layerName?n.push("layer"):t.layerName&&n.push(`layer(${t.layerName})`),t.supportsText&&n.push(`supports(${t.supportsText})`),t.media.length&&n.push(t.media.mediaText),n.join(" ")+";"}(t)}catch(t){}else if(function(t){return"selectorText"in t}(t)&&t.selectorText.includes(":"))return function(t){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}(t.cssText);return e||t.cssText}!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(xa||(xa={}));class Ra{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){if(!t)return-1;const e=wa([this,"access",t=>t.getMeta,"call",e=>e(t),"optionalAccess",t=>t.id]);return r=()=>-1,null!=(n=e)?n:r();var n,r}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const e=this.getId(t);this.idNodeMap.delete(e),t.childNodes&&t.childNodes.forEach((t=>this.removeNodeFromMap(t)))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,e){const n=e.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,e)}replace(t,e){const n=this.getNode(t);if(n){const t=this.nodeMetaMap.get(n);t&&this.nodeMetaMap.set(e,t)}this.idNodeMap.set(t,e)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Ma({maskInputOptions:t,tagName:e,type:n}){return"OPTION"===e&&(e="SELECT"),Boolean(t[e.toLowerCase()]||n&&t[n]||"password"===n||"INPUT"===e&&!n&&t.text)}function Oa({isMasked:t,element:e,value:n,maskInputFn:r}){let s=n||"";return t?(r&&(s=r(s,e)),"*".repeat(s.length)):s}function Aa(t){return t.toLowerCase()}function Da(t){return t.toUpperCase()}const Na="__rrweb_original__";function La(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?Aa(e):null}function Pa(t,e,n){return"INPUT"!==e||"radio"!==n&&"checkbox"!==n?t.value:t.getAttribute("value")||""}let $a=1;const Fa=new RegExp("[^a-z0-9-_:]"),Ba=-2;function ja(){return $a++}let Ua,Ha;const za=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,qa=/^(?:[a-z+]+:)?\/\//i,Wa=/^www\..*/i,Ga=/^(data:)([^,]*),(.*)/i;function Ya(t,e){return(t||"").replace(za,((t,n,r,s,o,i)=>{const a=r||o||i,c=n||s||"";if(!a)return t;if(qa.test(a)||Wa.test(a))return`url(${c}${a}${c})`;if(Ga.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(t){let e="";return e=t.indexOf("//")>-1?t.split("/").slice(0,3).join("/"):t.split("/")[0],e=e.split("?")[0],e}(e)+a}${c})`;const u=e.split("/"),l=a.split("/");u.pop();for(const t of l)"."!==t&&(".."===t?u.pop():u.push(t));return`url(${c}${u.join("/")}${c})`}))}const Va=/^[^ \t\n\r\u000c]+/,Ja=/^[, \t\n\r\u000c]+/;function Ka(t,e){if(!e||""===e.trim())return e;const n=t.createElement("a");return n.href=e,n.href}function Xa(t){return Boolean("svg"===t.tagName||t.ownerSVGElement)}function Za(){const t=document.createElement("a");return t.href="",t.href}function Qa(t,e,n,r,s,o){return r?"src"===n||"href"===n&&("use"!==e||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Ka(t,r):"background"!==n||"table"!==e&&"td"!==e&&"th"!==e?"srcset"===n?function(t,e){if(""===e.trim())return e;let n=0;function r(t){let r;const s=t.exec(e.substring(n));return s?(r=s[0],n+=r.length,r):""}const s=[];for(;r(Ja),!(n>=e.length);){let o=r(Va);if(","===o.slice(-1))o=Ka(t,o.substring(0,o.length-1)),s.push(o);else{let r="";o=Ka(t,o);let i=!1;for(;;){const t=e.charAt(n);if(""===t){s.push((o+r).trim());break}if(i)")"===t&&(i=!1);else{if(","===t){n+=1,s.push((o+r).trim());break}"("===t&&(i=!0)}r+=t,n+=1}}}return s.join(", ")}(t,r):"style"===n?Ya(r,Za()):"object"===e&&"data"===n?Ka(t,r):"function"==typeof o?o(n,r,s):r:Ka(t,r):r}function tc(t,e,n){return("video"===t||"audio"===t)&&"autoplay"===e}function ec(t,e,n=1/0,r=0){return t?t.nodeType!==t.ELEMENT_NODE||r>n?-1:e(t)?r:ec(t.parentNode,e,n,r+1):-1}function nc(t,e){return n=>{const r=n;if(null===r)return!1;try{if(t)if("string"==typeof t){if(r.matches(`.${t}`))return!0}else if(function(t,e){for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}return!1}(r,t))return!0;return!(!e||!r.matches(e))}catch(t){return!1}}}function rc(t,e,n,r,s,o){try{const i=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(null===i)return!1;if("INPUT"===i.tagName){const t=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(t))return!0}let a=-1,c=-1;if(o){if(c=ec(i,nc(r,s)),c<0)return!0;a=ec(i,nc(e,n),c>=0?c:1/0)}else{if(a=ec(i,nc(e,n)),a<0)return!1;c=ec(i,nc(r,s),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0)&&!!o}catch(t){}return!!o}function sc(t,e){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S=!1}=e,k=function(t,e){if(!e.hasNode(t))return;const n=e.getId(t);return 1===n?void 0:n}(n,r);switch(t.nodeType){case t.DOCUMENT_NODE:return"CSS1Compat"!==t.compatMode?{type:xa.Document,childNodes:[],compatMode:t.compatMode}:{type:xa.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:xa.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:k};case t.ELEMENT_NODE:return function(t,e){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:o,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:h,newlyAddedElement:f=!1,rootId:m,maskAllText:g,maskTextClass:y,unmaskTextClass:_,maskTextSelector:v,unmaskTextSelector:b}=e,S=function(t,e,n,r){try{if(r&&t.matches(r))return!1;if("string"==typeof e){if(t.classList.contains(e))return!0}else for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}if(n)return t.matches(n)}catch(t){}return!1}(t,r,s,o),k=function(t){if(t instanceof HTMLFormElement)return"form";const e=Aa(t.tagName);return Fa.test(e)?"div":e}(t);let w={};const x=t.attributes.length;for(let e=0;e<x;e++){const r=t.attributes[e];r.name&&!tc(k,r.name,r.value)&&(w[r.name]=Qa(n,k,Aa(r.name),r.value,t,c))}if("link"===k&&i){const e=Array.from(n.styleSheets).find((e=>e.href===t.href));let r=null;e&&(r=Ca(e)),r&&(delete w.rel,delete w.href,w._cssText=Ya(r,e.href))}if("style"===k&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const e=Ca(t.sheet);e&&(w._cssText=Ya(e,Za()))}if("input"===k||"textarea"===k||"select"===k||"option"===k){const e=t,n=La(e),r=Pa(e,Da(k),n),s=e.checked;if("submit"!==n&&"button"!==n&&r){const t=rc(e,y,v,_,b,Ma({type:n,tagName:Da(k),maskInputOptions:a}));w.value=Oa({isMasked:t,element:e,value:r,maskInputFn:u})}s&&(w.checked=s)}"option"===k&&(t.selected&&!a.select?w.selected=!0:delete w.selected);if("canvas"===k&&p)if("2d"===t.__context)(function(t){const e=t.getContext("2d");if(!e)return!0;for(let n=0;n<t.width;n+=50)for(let r=0;r<t.height;r+=50){const s=e.getImageData,o=Na in s?s[Na]:s;if(new Uint32Array(o.call(e,n,r,Math.min(50,t.width-n),Math.min(50,t.height-r)).data.buffer).some((t=>0!==t)))return!1}return!0})(t)||(w.rr_dataURL=t.toDataURL(l.type,l.quality));else if(!("__context"in t)){const e=t.toDataURL(l.type,l.quality),n=document.createElement("canvas");n.width=t.width,n.height=t.height;e!==n.toDataURL(l.type,l.quality)&&(w.rr_dataURL=e)}if("img"===k&&d){Ua||(Ua=n.createElement("canvas"),Ha=Ua.getContext("2d"));const e=t,r=e.crossOrigin;e.crossOrigin="anonymous";const s=()=>{e.removeEventListener("load",s);try{Ua.width=e.naturalWidth,Ua.height=e.naturalHeight,Ha.drawImage(e,0,0),w.rr_dataURL=Ua.toDataURL(l.type,l.quality)}catch(t){console.warn(`Cannot inline img src=${e.currentSrc}! Error: ${t}`)}r?w.crossOrigin=r:e.removeAttribute("crossorigin")};e.complete&&0!==e.naturalWidth?s():e.addEventListener("load",s)}"audio"!==k&&"video"!==k||(w.rr_mediaState=t.paused?"paused":"played",w.rr_mediaCurrentTime=t.currentTime);f||(t.scrollLeft&&(w.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(w.rr_scrollTop=t.scrollTop));if(S){const{width:e,height:n}=t.getBoundingClientRect();w={class:w.class,rr_width:`${e}px`,rr_height:`${n}px`}}"iframe"!==k||h(w.src)||(t.contentDocument||(w.rr_src=w.src),delete w.src);let T;try{customElements.get(k)&&(T=!0)}catch(t){}return{type:xa.Element,tagName:k,attributes:w,childNodes:[],isSVG:Xa(t)||void 0,needBlock:S,rootId:m,isCustom:T}}(t,{doc:n,blockClass:s,blockSelector:o,unblockSelector:i,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:f,maskInputFn:g,dataURLOptions:y,inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S,rootId:k,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p});case t.TEXT_NODE:return function(t,e){const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:o,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=e,d=t.parentNode&&t.parentNode.tagName;let p=t.textContent;const h="STYLE"===d||void 0,f="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(h&&p){try{t.nextSibling||t.previousSibling||wa([t,"access",t=>t.parentNode,"access",t=>t.sheet,"optionalAccess",t=>t.cssRules])&&(p=Ca(t.parentNode.sheet))}catch(e){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${e}`,t)}p=Ya(p,Za())}f&&(p="SCRIPT_PLACEHOLDER");const g=rc(t,r,o,s,i,n);h||f||m||!p||!g||(p=a?a(p,t.parentElement):p.replace(/[\S]/g,"*"));m&&p&&(c.textarea||g)&&(p=u?u(p,t.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=Oa({isMasked:rc(t,r,o,s,i,Ma({type:null,tagName:d,maskInputOptions:c})),element:t,value:p,maskInputFn:u})}return{type:xa.Text,textContent:p||"",isStyle:h,rootId:l}}(t,{maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:k});case t.CDATA_SECTION_NODE:return{type:xa.CDATA,textContent:"",rootId:k};case t.COMMENT_NODE:return{type:xa.Comment,textContent:t.textContent||"",rootId:k};default:return!1}}function oc(t){return null==t?"":t.toLowerCase()}function ic(t,e){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v={},inlineImages:b=!1,recordCanvas:S=!1,onSerialize:k,onIframeLoad:w,iframeLoadTimeout:x=5e3,onStylesheetLoad:T,stylesheetLoadTimeout:E=5e3,keepIframeSrcFn:C=(()=>!1),newlyAddedElement:I=!1}=e;let{preserveWhiteSpace:R=!0}=e;const M=sc(t,{doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,keepIframeSrcFn:C,newlyAddedElement:I});if(!M)return console.warn(t,"not serialized"),null;let O;O=r.hasNode(t)?r.getId(t):!function(t,e){if(e.comment&&t.type===xa.Comment)return!0;if(t.type===xa.Element){if(e.script&&("script"===t.tagName||"link"===t.tagName&&("preload"===t.attributes.rel||"modulepreload"===t.attributes.rel)&&"script"===t.attributes.as||"link"===t.tagName&&"prefetch"===t.attributes.rel&&"string"==typeof t.attributes.href&&t.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(oc(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===oc(t.attributes.name)||"icon"===oc(t.attributes.rel)||"apple-touch-icon"===oc(t.attributes.rel)||"shortcut icon"===oc(t.attributes.rel))))return!0;if("meta"===t.tagName){if(e.headMetaDescKeywords&&oc(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(oc(t.attributes.property).match(/^(og|twitter|fb):/)||oc(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===oc(t.attributes.name)))return!0;if(e.headMetaRobots&&("robots"===oc(t.attributes.name)||"googlebot"===oc(t.attributes.name)||"bingbot"===oc(t.attributes.name)))return!0;if(e.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(e.headMetaAuthorship&&("author"===oc(t.attributes.name)||"generator"===oc(t.attributes.name)||"framework"===oc(t.attributes.name)||"publisher"===oc(t.attributes.name)||"progid"===oc(t.attributes.name)||oc(t.attributes.property).match(/^article:/)||oc(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&("google-site-verification"===oc(t.attributes.name)||"yandex-verification"===oc(t.attributes.name)||"csrf-token"===oc(t.attributes.name)||"p:domain_verify"===oc(t.attributes.name)||"verify-v1"===oc(t.attributes.name)||"verification"===oc(t.attributes.name)||"shopify-checkout-api-token"===oc(t.attributes.name)))return!0}}return!1}(M,_)&&(R||M.type!==xa.Text||M.isStyle||M.textContent.replace(/^\s+|\s+$/gm,"").length)?ja():Ba;const A=Object.assign(M,{id:O});if(r.add(t,A),O===Ba)return null;k&&k(t);let D=!p;if(A.type===xa.Element){D=D&&!A.needBlock,delete A.needBlock;const e=t.shadowRoot;e&&Ea(e)&&(A.isShadowHost=!0)}if((A.type===xa.Document||A.type===xa.Element)&&D){_.headWhitespace&&A.type===xa.Element&&"head"===A.tagName&&(R=!1);const e={doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:k,onIframeLoad:w,iframeLoadTimeout:x,onStylesheetLoad:T,stylesheetLoadTimeout:E,keepIframeSrcFn:C};for(const n of Array.from(t.childNodes)){const t=ic(n,e);t&&A.childNodes.push(t)}if(function(t){return t.nodeType===t.ELEMENT_NODE}(t)&&t.shadowRoot)for(const n of Array.from(t.shadowRoot.childNodes)){const r=ic(n,e);r&&(Ea(t.shadowRoot)&&(r.isShadow=!0),A.childNodes.push(r))}}return t.parentNode&&Ta(t.parentNode)&&Ea(t.parentNode)&&(A.isShadow=!0),A.type===xa.Element&&"iframe"===A.tagName&&function(t,e,n){const r=t.contentWindow;if(!r)return;let s,o=!1;try{s=r.document.readyState}catch(t){return}if("complete"!==s){const r=setTimeout((()=>{o||(e(),o=!0)}),n);return void t.addEventListener("load",(()=>{clearTimeout(r),o=!0,e()}))}const i="about:blank";if(r.location.href!==i||t.src===i||""===t.src)return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}(t,(()=>{const e=t.contentDocument;if(e&&w){const n=ic(e,{doc:e,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:k,onIframeLoad:w,iframeLoadTimeout:x,onStylesheetLoad:T,stylesheetLoadTimeout:E,keepIframeSrcFn:C});n&&w(t,n)}}),x),A.type===xa.Element&&"link"===A.tagName&&"stylesheet"===A.attributes.rel&&function(t,e,n){let r,s=!1;try{r=t.sheet}catch(t){return}if(r)return;const o=setTimeout((()=>{s||(e(),s=!0)}),n);t.addEventListener("load",(()=>{clearTimeout(o),s=!0,e()}))}(t,(()=>{if(T){const e=ic(t,{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:k,onIframeLoad:w,iframeLoadTimeout:x,onStylesheetLoad:T,stylesheetLoadTimeout:E,keepIframeSrcFn:C});e&&T(t,e)}}),E),A}function ac(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}return n}function cc(t,e,n=document){const r={capture:!0,passive:!0};return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}const uc="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let lc={map:{},getId(){return console.error(uc),-1},getNode(){return console.error(uc),null},removeNodeFromMap(){console.error(uc)},has(){return console.error(uc),!1},reset(){console.error(uc)}};function dc(t,e,n={}){let r=null,s=0;return function(...o){const i=Date.now();s||!1!==n.leading||(s=i);const a=e-(i-s),c=this;a<=0||a>e?(r&&(!function(...t){Oc("clearTimeout")(...t)}(r),r=null),s=i,t.apply(c,o)):r||!1===n.trailing||(r=Ac((()=>{s=!1===n.leading?0:Date.now(),r=null,t.apply(c,o)}),a))}}function pc(t,e,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(t,e);return s.Object.defineProperty(t,e,r?n:{set(t){Ac((()=>{n.set.call(this,t)}),0),o&&o.set&&o.set.call(this,t)}}),()=>pc(t,e,o||{},!0)}function hc(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],s=n(r);return"function"==typeof s&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=s,()=>{t[e]=r}}catch(t){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(lc=new Proxy(lc,{get(t,e,n){return"map"===e&&console.error(uc),Reflect.get(t,e,n)}}));let fc=Date.now;function mc(t){const e=t.document;return{left:e.scrollingElement?e.scrollingElement.scrollLeft:void 0!==t.pageXOffset?t.pageXOffset:ac([e,"optionalAccess",t=>t.documentElement,"access",t=>t.scrollLeft])||ac([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.parentElement,"optionalAccess",t=>t.scrollLeft])||ac([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.scrollLeft])||0,top:e.scrollingElement?e.scrollingElement.scrollTop:void 0!==t.pageYOffset?t.pageYOffset:ac([e,"optionalAccess",t=>t.documentElement,"access",t=>t.scrollTop])||ac([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.parentElement,"optionalAccess",t=>t.scrollTop])||ac([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.scrollTop])||0}}function gc(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function yc(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function _c(t){if(!t)return null;return t.nodeType===t.ELEMENT_NODE?t:t.parentElement}function vc(t,e,n,r,s){if(!t)return!1;const o=_c(t);if(!o)return!1;const i=nc(e,n);if(!s){const t=r&&o.matches(r);return i(o)&&!t}const a=ec(o,i);let c=-1;return!(a<0)&&(r&&(c=ec(o,nc(null,r))),a>-1&&c<0||a<c)}function bc(t,e){return e.getId(t)===Ba}function Sc(t,e){if(Ta(t))return!1;const n=e.getId(t);return!e.has(n)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||Sc(t.parentNode,e))}function kc(t){return Boolean(t.changedTouches)}function wc(t,e){return Boolean("IFRAME"===t.nodeName&&e.getMeta(t))}function xc(t,e){return Boolean("LINK"===t.nodeName&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&"stylesheet"===t.getAttribute("rel")&&e.getMeta(t))}function Tc(t){return Boolean(ac([t,"optionalAccess",t=>t.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(fc=()=>(new Date).getTime());class Ec{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return e=this.styleIDMap.get(t),n=()=>-1,null!=e?e:n();var e,n}has(t){return this.styleIDMap.has(t)}add(t,e){if(this.has(t))return this.getId(t);let n;return n=void 0===e?this.id++:e,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Cc(t){let e=null;return ac([t,"access",t=>t.getRootNode,"optionalCall",t=>t(),"optionalAccess",t=>t.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(e=t.getRootNode().host),e}function Ic(t){const e=t.ownerDocument;if(!e)return!1;const n=function(t){let e,n=t;for(;e=Cc(n);)n=e;return n}(t);return e.contains(n)}function Rc(t){const e=t.ownerDocument;return!!e&&(e.contains(t)||Ic(t))}const Mc={};function Oc(t){const e=Mc[t];if(e)return e;const n=window.document;let r=window[t];if(n&&"function"==typeof n.createElement)try{const e=n.createElement("iframe");e.hidden=!0,n.head.appendChild(e);const s=e.contentWindow;s&&s[t]&&(r=s[t]),n.head.removeChild(e)}catch(t){}return Mc[t]=r.bind(window)}function Ac(...t){return Oc("setTimeout")(...t)}var Dc=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Dc||{}),Nc=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(Nc||{}),Lc=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(Lc||{}),Pc=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(Pc||{});function $c(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}return n}function Fc(t){return"__ln"in t}class Bc{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let e=this.head;for(let n=0;n<t;n++)e=$c([e,"optionalAccess",t=>t.next])||null;return e}addNode(t){const e={value:t,previous:null,next:null};if(t.__ln=e,t.previousSibling&&Fc(t.previousSibling)){const n=t.previousSibling.__ln.next;e.next=n,e.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=e,n&&(n.previous=e)}else if(t.nextSibling&&Fc(t.nextSibling)&&t.nextSibling.__ln.previous){const n=t.nextSibling.__ln.previous;e.previous=n,e.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=e,n&&(n.next=e)}else this.head&&(this.head.previous=e),e.next=this.head,this.head=e;null===e.next&&(this.tail=e),this.length++}removeNode(t){const e=t.__ln;this.head&&(e.previous?(e.previous.next=e.next,e.next?e.next.previous=e.previous:this.tail=e.previous):(this.head=e.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const jc=(t,e)=>`${t}@${e}`;class Uc{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],e=new Set,n=new Bc,r=t=>{let e=t,n=Ba;for(;n===Ba;)e=e&&e.nextSibling,n=e&&this.mirror.getId(e);return n},s=s=>{if(!s.parentNode||!Rc(s))return;const o=Ta(s.parentNode)?this.mirror.getId(Cc(s)):this.mirror.getId(s.parentNode),i=r(s);if(-1===o||-1===i)return n.addNode(s);const a=ic(s,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:t=>{wc(t,this.mirror)&&this.iframeManager.addIframe(t),xc(t,this.mirror)&&this.stylesheetManager.trackLinkElement(t),Tc(s)&&this.shadowDomManager.addShadowRoot(s.shadowRoot,this.doc)},onIframeLoad:(t,e)=>{this.iframeManager.attachIframe(t,e),this.shadowDomManager.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{this.stylesheetManager.attachLinkElement(t,e)}});a&&(t.push({parentId:o,nextId:i,node:a}),e.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const t of this.movedSet)zc(this.removes,t,this.mirror)&&!this.movedSet.has(t.parentNode)||s(t);for(const t of this.addedSet)Wc(this.droppedSet,t)||zc(this.removes,t,this.mirror)?Wc(this.movedSet,t)?s(t):this.droppedSet.add(t):s(t);let o=null;for(;n.length;){let t=null;if(o){const e=this.mirror.getId(o.value.parentNode),n=r(o.value);-1!==e&&-1!==n&&(t=o)}if(!t){let e=n.tail;for(;e;){const n=e;if(e=e.previous,n){const e=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==e){t=n;break}{const e=n.value;if(e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=e.parentNode.host;if(-1!==this.mirror.getId(r)){t=n;break}}}}}}if(!t){for(;n.head;)n.removeNode(n.head.value);break}o=t.previous,n.removeNode(t.value),s(t.value)}const i={texts:this.texts.map((t=>({id:this.mirror.getId(t.node),value:t.value}))).filter((t=>!e.has(t.id))).filter((t=>this.mirror.has(t.id))),attributes:this.attributes.map((t=>{const{attributes:e}=t;if("string"==typeof e.style){const n=JSON.stringify(t.styleDiff),r=JSON.stringify(t._unchangedStyles);n.length<e.style.length&&(n+r).split("var(").length===e.style.split("var(").length&&(e.style=t.styleDiff)}return{id:this.mirror.getId(t.node),attributes:e}})).filter((t=>!e.has(t.id))).filter((t=>this.mirror.has(t.id))),removes:this.removes,adds:t};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=t=>{if(!bc(t.target,this.mirror))switch(t.type){case"characterData":{const e=t.target.textContent;vc(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||e===t.oldValue||this.texts.push({value:rc(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&e?this.maskTextFn?this.maskTextFn(e,_c(t.target)):e.replace(/[\S]/g,"*"):e,node:t.target});break}case"attributes":{const e=t.target;let n=t.attributeName,r=t.target.getAttribute(n);if("value"===n){const n=La(e),s=e.tagName;r=Pa(e,s,n);const o=Ma({maskInputOptions:this.maskInputOptions,tagName:s,type:n});r=Oa({isMasked:rc(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,o),element:e,value:r,maskInputFn:this.maskInputFn})}if(vc(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===t.oldValue)return;let s=this.attributeMap.get(t.target);if("IFRAME"===e.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(e.contentDocument)return;n="rr_src"}if(s||(s={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(t.target,s)),"type"===n&&"INPUT"===e.tagName&&"password"===(t.oldValue||"").toLowerCase()&&e.setAttribute("data-rr-is-password","true"),!tc(e.tagName,n)&&(s.attributes[n]=Qa(this.doc,Aa(e.tagName),Aa(n),r,e,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(t){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");t.oldValue&&n.setAttribute("style",t.oldValue);for(const t of Array.from(e.style)){const r=e.style.getPropertyValue(t),o=e.style.getPropertyPriority(t);r!==n.style.getPropertyValue(t)||o!==n.style.getPropertyPriority(t)?s.styleDiff[t]=""===o?r:[r,o]:s._unchangedStyles[t]=[r,o]}for(const t of Array.from(n.style))""===e.style.getPropertyValue(t)&&(s.styleDiff[t]=!1)}break}case"childList":if(vc(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach((e=>this.genAdds(e,t.target))),t.removedNodes.forEach((e=>{const n=this.mirror.getId(e),r=Ta(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);vc(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||bc(e,this.mirror)||!function(t,e){return-1!==e.getId(t)}(e,this.mirror)||(this.addedSet.has(e)?(Hc(this.addedSet,e),this.droppedSet.add(e)):this.addedSet.has(t.target)&&-1===n||Sc(t.target,this.mirror)||(this.movedSet.has(e)&&this.movedMap[jc(n,r)]?Hc(this.movedSet,e):this.removes.push({parentId:r,id:n,isShadow:!(!Ta(t.target)||!Ea(t.target))||void 0})),this.mapRemoves.push(e))}))}},this.genAdds=(t,e)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!this.addedSet.has(t)&&!this.movedSet.has(t)){if(this.mirror.hasNode(t)){if(bc(t,this.mirror))return;this.movedSet.add(t);let n=null;e&&this.mirror.hasNode(e)&&(n=this.mirror.getId(e)),n&&-1!==n&&(this.movedMap[jc(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);vc(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach((t=>this.genAdds(t))),Tc(t)&&t.shadowRoot.childNodes.forEach((e=>{this.processedNodeManager.add(e,this),this.genAdds(e,t)})))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((e=>{this[e]=t[e]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Hc(t,e){t.delete(e),e.childNodes.forEach((e=>Hc(t,e)))}function zc(t,e,n){return 0!==t.length&&qc(t,e,n)}function qc(t,e,n){const{parentNode:r}=e;if(!r)return!1;const s=n.getId(r);return!!t.some((t=>t.id===s))||qc(t,r,n)}function Wc(t,e){return 0!==t.size&&Gc(t,e)}function Gc(t,e){const{parentNode:n}=e;return!!n&&(!!t.has(n)||Gc(t,n))}let Yc;function Vc(t){Yc=t}function Jc(){Yc=void 0}const Kc=t=>{if(!Yc)return t;return(...e)=>{try{return t(...e)}catch(t){if(Yc&&!0===Yc(t))return()=>{};throw t}}};function Xc(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}return n}const Zc=[];function Qc(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch(t){}return t&&t.target}function tu(t,e){const n=new Uc;Zc.push(n),n.init(t);let r=window.MutationObserver||window.__rrMutationObserver;const s=Xc([window,"optionalAccess",t=>t.Zone,"optionalAccess",t=>t.__symbol__,"optionalCall",t=>t("MutationObserver")]);s&&window[s]&&(r=window[s]);const o=new r(Kc((e=>{t.onMutation&&!1===t.onMutation(e)||n.processMutations.bind(n)(e)})));return o.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function eu({mouseInteractionCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,c=[];let u=null;return Object.keys(Lc).filter((t=>Number.isNaN(Number(t))&&!t.endsWith("_Departed")&&!1!==a[t])).forEach((i=>{let a=Aa(i);const l=(e=>i=>{const a=Qc(i);if(vc(a,r,s,o,!0))return;let c=null,l=e;if("pointerType"in i){switch(i.pointerType){case"mouse":c=Pc.Mouse;break;case"touch":c=Pc.Touch;break;case"pen":c=Pc.Pen}c===Pc.Touch?Lc[e]===Lc.MouseDown?l="TouchStart":Lc[e]===Lc.MouseUp&&(l="TouchEnd"):Pc.Pen}else kc(i)&&(c=Pc.Touch);null!==c?(u=c,(l.startsWith("Touch")&&c===Pc.Touch||l.startsWith("Mouse")&&c===Pc.Mouse)&&(c=null)):Lc[e]===Lc.Click&&(c=u,u=null);const d=kc(i)?i.changedTouches[0]:i;if(!d)return;const p=n.getId(a),{clientX:h,clientY:f}=d;Kc(t)({type:Lc[l],id:p,x:h,y:f,...null!==c&&{pointerType:c}})})(i);if(window.PointerEvent)switch(Lc[i]){case Lc.MouseDown:case Lc.MouseUp:a=a.replace("mouse","pointer");break;case Lc.TouchStart:case Lc.TouchEnd:return}c.push(cc(a,l,e))})),Kc((()=>{c.forEach((t=>t()))}))}function nu({scrollCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){return cc("scroll",Kc(dc(Kc((i=>{const a=Qc(i);if(!a||vc(a,r,s,o,!0))return;const c=n.getId(a);if(a===e&&e.defaultView){const n=mc(e.defaultView);t({id:c,x:n.left,y:n.top})}else t({id:c,x:a.scrollLeft,y:a.scrollTop})})),i.scroll||100)),e)}const ru=["INPUT","TEXTAREA","SELECT"],su=new WeakMap;function ou({inputCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:h,maskTextSelector:f,unmaskTextSelector:m}){function g(t){let n=Qc(t);const l=t.isTrusted,g=n&&Da(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||ru.indexOf(g)<0||vc(n,r,s,o,!0))return;const _=n;if(_.classList.contains(i)||a&&_.matches(a))return;const v=La(n);let b=Pa(_,g,v),S=!1;const k=Ma({maskInputOptions:c,tagName:g,type:v}),w=rc(n,p,f,h,m,k);"radio"!==v&&"checkbox"!==v||(S=n.checked),b=Oa({isMasked:w,element:n,value:b,maskInputFn:u}),y(n,d?{text:b,isChecked:S,userTriggered:l}:{text:b,isChecked:S});const x=n.name;"radio"===v&&x&&S&&e.querySelectorAll(`input[type="radio"][name="${x}"]`).forEach((t=>{if(t!==n){const e=Oa({isMasked:w,element:t,value:Pa(t,g,v),maskInputFn:u});y(t,d?{text:e,isChecked:!S,userTriggered:!1}:{text:e,isChecked:!S})}}))}function y(e,r){const s=su.get(e);if(!s||s.text!==r.text||s.isChecked!==r.isChecked){su.set(e,r);const s=n.getId(e);Kc(t)({...r,id:s})}}const _=("last"===l.input?["change"]:["input","change"]).map((t=>cc(t,Kc(g),e))),v=e.defaultView;if(!v)return()=>{_.forEach((t=>t()))};const b=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),S=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&_.push(...S.map((t=>pc(t[0],t[1],{set(){Kc(g)({target:this,isTrusted:!1})}},!1,v)))),Kc((()=>{_.forEach((t=>t()))}))}function iu(t){return function(t,e){if(lu("CSSGroupingRule")&&t.parentRule instanceof CSSGroupingRule||lu("CSSMediaRule")&&t.parentRule instanceof CSSMediaRule||lu("CSSSupportsRule")&&t.parentRule instanceof CSSSupportsRule||lu("CSSConditionRule")&&t.parentRule instanceof CSSConditionRule){const n=Array.from(t.parentRule.cssRules).indexOf(t);e.unshift(n)}else if(t.parentStyleSheet){const n=Array.from(t.parentStyleSheet.cssRules).indexOf(t);e.unshift(n)}return e}(t,[])}function au(t,e,n){let r,s;return t?(t.ownerNode?r=e.getId(t.ownerNode):s=n.getId(t),{styleId:s,id:r}):{}}function cu({mirror:t,stylesheetManager:e},n){let r=null;r="#document"===n.nodeName?t.getId(n):t.getId(n.host);const s="#document"===n.nodeName?Xc([n,"access",t=>t.defaultView,"optionalAccess",t=>t.Document]):Xc([n,"access",t=>t.ownerDocument,"optionalAccess",t=>t.defaultView,"optionalAccess",t=>t.ShadowRoot]),o=Xc([s,"optionalAccess",t=>t.prototype])?Object.getOwnPropertyDescriptor(Xc([s,"optionalAccess",t=>t.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&s&&o?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){return Xc([o,"access",t=>t.get,"optionalAccess",t=>t.call,"call",t=>t(this)])},set(t){const n=Xc([o,"access",t=>t.set,"optionalAccess",t=>t.call,"call",e=>e(this,t)]);if(null!==r&&-1!==r)try{e.adoptStyleSheets(t,r)}catch(t){}return n}}),Kc((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))):()=>{}}function uu(t,e={}){const n=t.doc.defaultView;if(!n)return()=>{};const r=tu(t,t.doc),s=function({mousemoveCb:t,sampling:e,doc:n,mirror:r}){if(!1===e.mousemove)return()=>{};const s="number"==typeof e.mousemove?e.mousemove:50,o="number"==typeof e.mousemoveCallback?e.mousemoveCallback:500;let i,a=[];const c=dc(Kc((e=>{const n=Date.now()-i;t(a.map((t=>(t.timeOffset-=n,t))),e),a=[],i=null})),o),u=Kc(dc(Kc((t=>{const e=Qc(t),{clientX:n,clientY:s}=kc(t)?t.changedTouches[0]:t;i||(i=fc()),a.push({x:n,y:s,id:r.getId(e),timeOffset:fc()-i}),c("undefined"!=typeof DragEvent&&t instanceof DragEvent?Nc.Drag:t instanceof MouseEvent?Nc.MouseMove:Nc.TouchMove)})),s,{trailing:!1})),l=[cc("mousemove",u,n),cc("touchmove",u,n),cc("drag",u,n)];return Kc((()=>{l.forEach((t=>t()))}))}(t),o=eu(t),i=nu(t),a=function({viewportResizeCb:t},{win:e}){let n=-1,r=-1;return cc("resize",Kc(dc(Kc((()=>{const e=gc(),s=yc();n===e&&r===s||(t({width:Number(s),height:Number(e)}),n=e,r=s)})),200)),e)}(t,{win:n}),c=ou(t),u=function({mediaInteractionCb:t,blockClass:e,blockSelector:n,unblockSelector:r,mirror:s,sampling:o,doc:i}){const a=Kc((i=>dc(Kc((o=>{const a=Qc(o);if(!a||vc(a,e,n,r,!0))return;const{currentTime:c,volume:u,muted:l,playbackRate:d}=a;t({type:i,id:s.getId(a),currentTime:c,volume:u,muted:l,playbackRate:d})})),o.media||500))),c=[cc("play",a(0),i),cc("pause",a(1),i),cc("seeked",a(2),i),cc("volumechange",a(3),i),cc("ratechange",a(4),i)];return Kc((()=>{c.forEach((t=>t()))}))}(t),l=function({styleSheetRuleCb:t,mirror:e,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:Kc(((r,s,o)=>{const[i,a]=o,{id:c,styleId:u}=au(s,e,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&t({id:c,styleId:u,adds:[{rule:i,index:a}]}),r.apply(s,o)}))});const o=r.CSSStyleSheet.prototype.deleteRule;let i,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:Kc(((r,s,o)=>{const[i]=o,{id:a,styleId:c}=au(s,e,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&t({id:a,styleId:c,removes:[{index:i}]}),r.apply(s,o)}))}),r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:Kc(((r,s,o)=>{const[i]=o,{id:a,styleId:c}=au(s,e,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&t({id:a,styleId:c,replace:i}),r.apply(s,o)}))})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Kc(((r,s,o)=>{const[i]=o,{id:a,styleId:c}=au(s,e,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&t({id:a,styleId:c,replaceSync:i}),r.apply(s,o)}))}));const c={};du("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(du("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),du("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),du("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach((([r,s])=>{u[r]={insertRule:s.prototype.insertRule,deleteRule:s.prototype.deleteRule},s.prototype.insertRule=new Proxy(u[r].insertRule,{apply:Kc(((r,s,o)=>{const[i,a]=o,{id:c,styleId:u}=au(s.parentStyleSheet,e,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&t({id:c,styleId:u,adds:[{rule:i,index:[...iu(s),a||0]}]}),r.apply(s,o)}))}),s.prototype.deleteRule=new Proxy(u[r].deleteRule,{apply:Kc(((r,s,o)=>{const[i]=o,{id:a,styleId:c}=au(s.parentStyleSheet,e,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&t({id:a,styleId:c,removes:[{index:[...iu(s),i]}]}),r.apply(s,o)}))})})),Kc((()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=o,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([t,e])=>{e.prototype.insertRule=u[t].insertRule,e.prototype.deleteRule=u[t].deleteRule}))}))}(t,{win:n}),d=cu(t,t.doc),p=function({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const o=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:Kc(((s,i,a)=>{const[c,u,l]=a;if(n.has(c))return o.apply(i,[c,u,l]);const{id:d,styleId:p}=au(Xc([i,"access",t=>t.parentRule,"optionalAccess",t=>t.parentStyleSheet]),e,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&t({id:d,styleId:p,set:{property:c,value:u,priority:l},index:iu(i.parentRule)}),s.apply(i,a)}))});const i=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:Kc(((s,o,a)=>{const[c]=a;if(n.has(c))return i.apply(o,[c]);const{id:u,styleId:l}=au(Xc([o,"access",t=>t.parentRule,"optionalAccess",t=>t.parentStyleSheet]),e,r.styleMirror);return(u&&-1!==u||l&&-1!==l)&&t({id:u,styleId:l,remove:{property:c},index:iu(o.parentRule)}),s.apply(o,a)}))}),Kc((()=>{s.CSSStyleDeclaration.prototype.setProperty=o,s.CSSStyleDeclaration.prototype.removeProperty=i}))}(t,{win:n}),h=t.collectFonts?function({fontCb:t,doc:e}){const n=e.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,o=n.FontFace;n.FontFace=function(t,e,n){const r=new o(t,e,n);return s.set(r,{family:t,buffer:"string"!=typeof e,descriptors:n,fontSource:"string"==typeof e?e:JSON.stringify(Array.from(new Uint8Array(e)))}),r};const i=hc(e.fonts,"add",(function(e){return function(n){return Ac(Kc((()=>{const e=s.get(n);e&&(t(e),s.delete(n))})),0),e.apply(this,[n])}}));return r.push((()=>{n.FontFace=o})),r.push(i),Kc((()=>{r.forEach((t=>t()))}))}(t):()=>{},f=function(t){const{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,selectionCb:i}=t;let a=!0;const c=Kc((()=>{const t=e.getSelection();if(!t||a&&Xc([t,"optionalAccess",t=>t.isCollapsed]))return;a=t.isCollapsed||!1;const c=[],u=t.rangeCount||0;for(let e=0;e<u;e++){const i=t.getRangeAt(e),{startContainer:a,startOffset:u,endContainer:l,endOffset:d}=i;vc(a,r,s,o,!0)||vc(l,r,s,o,!0)||c.push({start:n.getId(a),startOffset:u,end:n.getId(l),endOffset:d})}i({ranges:c})}));return c(),cc("selectionchange",c)}(t),m=function({doc:t,customElementCb:e}){const n=t.defaultView;return n&&n.customElements?hc(n.customElements,"define",(function(t){return function(n,r,s){try{e({define:{name:n}})}catch(t){}return t.apply(this,[n,r,s])}})):()=>{}}(t),g=[];for(const e of t.plugins)g.push(e.observer(e.callback,n,e.options));return Kc((()=>{Zc.forEach((t=>t.reset())),r.disconnect(),s(),o(),i(),a(),c(),u(),l(),d(),p(),h(),f(),m(),g.forEach((t=>t()))}))}function lu(t){return void 0!==window[t]}function du(t){return Boolean(void 0!==window[t]&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class pu{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,e,n,r){const s=n||this.getIdToRemoteIdMap(t),o=r||this.getRemoteIdToIdMap(t);let i=s.get(e);return i||(i=this.generateIdFn(),s.set(e,i),o.set(i,e)),i}getIds(t,e){const n=this.getIdToRemoteIdMap(t),r=this.getRemoteIdToIdMap(t);return e.map((e=>this.getId(t,e,n,r)))}getRemoteId(t,e,n){const r=n||this.getRemoteIdToIdMap(t);if("number"!=typeof e)return e;const s=r.get(e);return s||-1}getRemoteIds(t,e){const n=this.getRemoteIdToIdMap(t);return e.map((e=>this.getRemoteId(t,e,n)))}reset(t){if(!t)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let e=this.iframeIdToRemoteIdMap.get(t);return e||(e=new Map,this.iframeIdToRemoteIdMap.set(t,e)),e}getRemoteIdToIdMap(t){let e=this.iframeRemoteIdToIdMap.get(t);return e||(e=new Map,this.iframeRemoteIdToIdMap.set(t,e)),e}}function hu(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}return n}class fu{constructor(){this.crossOriginIframeMirror=new pu(ja),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class mu{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new pu(ja),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new pu(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,e){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:e}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),hu([this,"access",t=>t.loadListener,"optionalCall",e=>e(t)]),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const e=t;if("rrweb"!==e.data.type||e.origin!==e.data.origin)return;if(!t.source)return;const n=this.crossOriginIframeMap.get(t.source);if(!n)return;const r=this.transformCrossOriginEvent(n,e.data.event);r&&this.wrappedEmit(r,e.data.isCheckout)}transformCrossOriginEvent(t,e){switch(e.type){case Dc.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(e.data.node,t);const n=e.data.node.id;return this.crossOriginIframeRootIdMap.set(t,n),this.patchRootIdOnNode(e.data.node,n),{timestamp:e.timestamp,type:Dc.IncrementalSnapshot,data:{source:Nc.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:e.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Dc.Meta:case Dc.Load:case Dc.DomContentLoaded:return!1;case Dc.Plugin:return e;case Dc.Custom:return this.replaceIds(e.data.payload,t,["id","parentId","previousId","nextId"]),e;case Dc.IncrementalSnapshot:switch(e.data.source){case Nc.Mutation:return e.data.adds.forEach((e=>{this.replaceIds(e,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(e.node,t);const n=this.crossOriginIframeRootIdMap.get(t);n&&this.patchRootIdOnNode(e.node,n)})),e.data.removes.forEach((e=>{this.replaceIds(e,t,["parentId","id"])})),e.data.attributes.forEach((e=>{this.replaceIds(e,t,["id"])})),e.data.texts.forEach((e=>{this.replaceIds(e,t,["id"])})),e;case Nc.Drag:case Nc.TouchMove:case Nc.MouseMove:return e.data.positions.forEach((e=>{this.replaceIds(e,t,["id"])})),e;case Nc.ViewportResize:return!1;case Nc.MediaInteraction:case Nc.MouseInteraction:case Nc.Scroll:case Nc.CanvasMutation:case Nc.Input:return this.replaceIds(e.data,t,["id"]),e;case Nc.StyleSheetRule:case Nc.StyleDeclaration:return this.replaceIds(e.data,t,["id"]),this.replaceStyleIds(e.data,t,["styleId"]),e;case Nc.Font:return e;case Nc.Selection:return e.data.ranges.forEach((e=>{this.replaceIds(e,t,["start","end"])})),e;case Nc.AdoptedStyleSheet:return this.replaceIds(e.data,t,["id"]),this.replaceStyleIds(e.data,t,["styleIds"]),hu([e,"access",t=>t.data,"access",t=>t.styles,"optionalAccess",t=>t.forEach,"call",e=>e((e=>{this.replaceStyleIds(e,t,["styleId"])}))]),e}}return!1}replace(t,e,n,r){for(const s of r)(Array.isArray(e[s])||"number"==typeof e[s])&&(Array.isArray(e[s])?e[s]=t.getIds(n,e[s]):e[s]=t.getId(n,e[s]));return e}replaceIds(t,e,n){return this.replace(this.crossOriginIframeMirror,t,e,n)}replaceStyleIds(t,e,n){return this.replace(this.crossOriginIframeStyleMirror,t,e,n)}replaceIdOnNode(t,e){this.replaceIds(t,e,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach((t=>{this.replaceIdOnNode(t,e)}))}patchRootIdOnNode(t,e){t.type===xa.Document||t.rootId||(t.rootId=e),"childNodes"in t&&t.childNodes.forEach((t=>{this.patchRootIdOnNode(t,e)}))}}class gu{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class yu{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,e){if(!Ea(t))return;if(this.shadowDoms.has(t))return;this.shadowDoms.add(t);const n=tu({...this.bypassOptions,doc:e,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(nu({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),Ac((()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(cu({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))}),0)}observeAttachShadow(t){t.contentWindow&&t.contentDocument&&this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,e){const n=this;this.restoreHandlers.push(hc(t.prototype,"attachShadow",(function(t){return function(r){const s=t.call(this,r);return this.shadowRoot&&Rc(this)&&n.addShadowRoot(this.shadowRoot,e),s}})))}reset(){this.restoreHandlers.forEach((t=>{try{t()}catch(t){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class _u{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class vu{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new Ec,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,e){"_cssText"in e.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:e.id,attributes:e.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,e){if(0===t.length)return;const n={id:e,styleIds:[]},r=[];for(const e of t){let t;this.styleMirror.has(e)?t=this.styleMirror.getId(e):(t=this.styleMirror.add(e),r.push({styleId:t,rules:Array.from(e.rules||CSSRule,((t,e)=>({rule:Ia(t),index:e})))})),n.styleIds.push(t)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class bu{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...t){Oc("requestAnimationFrame")(...t)}((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(t,e){const n=this.nodeMap.get(t);return n&&Array.from(n).some((t=>t!==e))}add(t,e){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(e))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let Su,ku;const wu=new Ra;function xu(t={}){const{emit:e,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:o=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:h=null,inlineStylesheet:f=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,maxCanvasSize:S=null,packFn:k,sampling:w={},dataURLOptions:x={},mousemoveWait:T,recordCanvas:E=!1,recordCrossOriginIframes:C=!1,recordAfter:I=("DOMContentLoaded"===t.recordAfter?t.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:M=!1,inlineImages:O=!1,plugins:A,keepIframeSrcFn:D=(()=>!1),ignoreCSSAttributes:N=new Set([]),errorHandler:L,onMutation:P,getCanvasManager:$}=t;Vc(L);const F=!C||window.parent===window;let B=!1;if(!F)try{window.parent.document&&(B=!1)}catch(t){B=!0}if(F&&!e)throw new Error("emit function is required");void 0!==T&&void 0===w.mousemove&&(w.mousemove=T),wu.reset();const j=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},U=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};let H;!function(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let e=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1})}();let z=0;const q=t=>{for(const e of A||[])e.eventProcessor&&(t=e.eventProcessor(t));return k&&!B&&(t=k(t)),t};Su=(t,s)=>{const o=t;if(o.timestamp=fc(),!vi([Zc,"access",t=>t[0],"optionalAccess",t=>t.isFrozen,"call",t=>t()])||o.type===Dc.FullSnapshot||o.type===Dc.IncrementalSnapshot&&o.data.source===Nc.Mutation||Zc.forEach((t=>t.unfreeze())),F)vi([e,"optionalCall",t=>t(q(o),s)]);else if(B){const t={type:"rrweb",event:q(o),origin:window.location.origin,isCheckout:s};window.parent.postMessage(t,"*")}if(o.type===Dc.FullSnapshot)H=o,z=0;else if(o.type===Dc.IncrementalSnapshot){if(o.data.source===Nc.Mutation&&o.data.isAttachIframe)return;z++;const t=r&&z>=r,e=n&&H&&o.timestamp-H.timestamp>n;(t||e)&&Q(!0)}};const W=t=>{Su({type:Dc.IncrementalSnapshot,data:{source:Nc.Mutation,...t}})},G=t=>Su({type:Dc.IncrementalSnapshot,data:{source:Nc.Scroll,...t}}),Y=t=>Su({type:Dc.IncrementalSnapshot,data:{source:Nc.CanvasMutation,...t}}),V=new vu({mutationCb:W,adoptedStyleSheetCb:t=>Su({type:Dc.IncrementalSnapshot,data:{source:Nc.AdoptedStyleSheet,...t}})}),J="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new fu:new mu({mirror:wu,mutationCb:W,stylesheetManager:V,recordCrossOriginIframes:C,wrappedEmit:Su});for(const t of A||[])t.getMirror&&t.getMirror({nodeMirror:wu,crossOriginIframeMirror:J.crossOriginIframeMirror,crossOriginIframeStyleMirror:J.crossOriginIframeStyleMirror});const K=new bu,X=function(t,e){try{return t?t(e):new _u}catch(t){return console.warn("Unable to initialize CanvasManager"),new _u}}($,{mirror:wu,win:window,mutationCb:t=>Su({type:Dc.IncrementalSnapshot,data:{source:Nc.CanvasMutation,...t}}),recordCanvas:E,blockClass:s,blockSelector:o,unblockSelector:i,maxCanvasSize:S,sampling:w.canvas,dataURLOptions:x,errorHandler:L}),Z="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new gu:new yu({mutationCb:W,scrollCb:G,bypassOptions:{onMutation:P,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskInputOptions:j,dataURLOptions:x,maskAttributeFn:_,maskTextFn:b,maskInputFn:v,recordCanvas:E,inlineImages:O,sampling:w,slimDOMOptions:U,iframeManager:J,stylesheetManager:V,canvasManager:X,keepIframeSrcFn:D,processedNodeManager:K},mirror:wu}),Q=(t=!1)=>{Su({type:Dc.Meta,data:{href:window.location.href,width:yc(),height:gc()}},t),V.reset(),Z.init(),Zc.forEach((t=>t.lock()));const e=function(t,e){const{mirror:n=new Ra,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:o=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:h=!1,maskAllInputs:f=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:_=!1,dataURLOptions:v,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:k,iframeLoadTimeout:w,onStylesheetLoad:x,stylesheetLoadTimeout:T,keepIframeSrcFn:E=(()=>!1)}=e||{};return ic(t,{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===_,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===_?{}:_,dataURLOptions:v,inlineImages:p,recordCanvas:h,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:k,iframeLoadTimeout:w,onStylesheetLoad:x,stylesheetLoadTimeout:T,keepIframeSrcFn:E,newlyAddedElement:!1})}(document,{mirror:wu,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskAllInputs:j,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,slimDOM:U,dataURLOptions:x,recordCanvas:E,inlineImages:O,onSerialize:t=>{wc(t,wu)&&J.addIframe(t),xc(t,wu)&&V.trackLinkElement(t),Tc(t)&&Z.addShadowRoot(t.shadowRoot,document)},onIframeLoad:(t,e)=>{J.attachIframe(t,e),Z.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{V.attachLinkElement(t,e)},keepIframeSrcFn:D});if(!e)return console.warn("Failed to snapshot the document");Su({type:Dc.FullSnapshot,data:{node:e,initialOffset:mc(window)}}),Zc.forEach((t=>t.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&V.adoptStyleSheets(document.adoptedStyleSheets,wu.getId(document))};ku=Q;try{const t=[],e=t=>Kc(uu)({onMutation:P,mutationCb:W,mousemoveCb:(t,e)=>Su({type:Dc.IncrementalSnapshot,data:{source:e,positions:t}}),mouseInteractionCb:t=>Su({type:Dc.IncrementalSnapshot,data:{source:Nc.MouseInteraction,...t}}),scrollCb:G,viewportResizeCb:t=>Su({type:Dc.IncrementalSnapshot,data:{source:Nc.ViewportResize,...t}}),inputCb:t=>Su({type:Dc.IncrementalSnapshot,data:{source:Nc.Input,...t}}),mediaInteractionCb:t=>Su({type:Dc.IncrementalSnapshot,data:{source:Nc.MediaInteraction,...t}}),styleSheetRuleCb:t=>Su({type:Dc.IncrementalSnapshot,data:{source:Nc.StyleSheetRule,...t}}),styleDeclarationCb:t=>Su({type:Dc.IncrementalSnapshot,data:{source:Nc.StyleDeclaration,...t}}),canvasMutationCb:Y,fontCb:t=>Su({type:Dc.IncrementalSnapshot,data:{source:Nc.Font,...t}}),selectionCb:t=>{Su({type:Dc.IncrementalSnapshot,data:{source:Nc.Selection,...t}})},customElementCb:t=>{Su({type:Dc.IncrementalSnapshot,data:{source:Nc.CustomElement,...t}})},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,maskInputOptions:j,inlineStylesheet:f,sampling:w,recordCanvas:E,inlineImages:O,userTriggeredOnInput:R,collectFonts:M,doc:t,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,keepIframeSrcFn:D,blockSelector:o,unblockSelector:i,slimDOMOptions:U,dataURLOptions:x,mirror:wu,iframeManager:J,stylesheetManager:V,shadowDomManager:Z,processedNodeManager:K,canvasManager:X,ignoreCSSAttributes:N,plugins:vi([A,"optionalAccess",t=>t.filter,"call",t=>t((t=>t.observer)),"optionalAccess",t=>t.map,"call",t=>t((t=>({observer:t.observer,options:t.options,callback:e=>Su({type:Dc.Plugin,data:{plugin:t.name,payload:e}})})))])||[]},{});J.addLoadListener((n=>{try{t.push(e(n.contentDocument))}catch(t){console.warn(t)}}));const n=()=>{Q(),t.push(e(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(t.push(cc("DOMContentLoaded",(()=>{Su({type:Dc.DomContentLoaded,data:{}}),"DOMContentLoaded"===I&&n()}))),t.push(cc("load",(()=>{Su({type:Dc.Load,data:{}}),"load"===I&&n()}),window))),()=>{t.forEach((t=>t())),K.destroy(),ku=void 0,Jc()}}catch(t){console.warn(t)}}xu.mirror=wu,xu.takeFullSnapshot=function(t){if(!ku)throw new Error("please take full snapshot after start recording");ku(t)};const Tu=3;function Eu(t){return t>9999999999?t:1e3*t}function Cu(t){return t>9999999999?t/1e3:t}function Iu(t,e){"sentry.transaction"!==e.category&&(["ui.click","ui.input"].includes(e.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate((()=>(t.throttledAddEvent({type:Dc.Custom,timestamp:1e3*(e.timestamp||0),data:{tag:"breadcrumb",payload:de(e,10,1e3)}}),"console"===e.category))))}const Ru="button,a";function Mu(t){return t.closest(Ru)||t}function Ou(t){const e=Au(t);return e&&e instanceof Element?Mu(e):e}function Au(t){return function(t){return"object"==typeof t&&!!t&&"target"in t}(t)?t.target:t}let Du;function Nu(t){return Du||(Du=[],j(ma,"open",(function(t){return function(...e){if(Du)try{Du.forEach((t=>t()))}catch(t){}return t.apply(ma,e)}}))),Du.push(t),()=>{const e=Du?Du.indexOf(t):-1;e>-1&&Du.splice(e,1)}}class Lu{constructor(t,e,n=Iu){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=e.timeout/1e3,this._threshold=e.threshold/1e3,this._scollTimeout=e.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=e.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const t=Nu((()=>{this._lastMutation=$u()}));this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,e){if(function(t,e){if(!Pu.includes(t.tagName))return!0;if("INPUT"===t.tagName&&!["submit","button"].includes(t.getAttribute("type")||""))return!0;if("A"===t.tagName&&(t.hasAttribute("download")||t.hasAttribute("target")&&"_self"!==t.getAttribute("target")))return!0;if(e&&t.matches(e))return!0;return!1}(e,this._ignoreSelector)||!function(t){return!(!t.data||"number"!=typeof t.data.nodeId||!t.timestamp)}(t))return;const n={timestamp:Cu(t.timestamp),clickBreadcrumb:t,clickCount:0,node:e};this._clicks.some((t=>t.node===n.node&&Math.abs(t.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=Cu(t)}registerScroll(t=Date.now()){this._lastScroll=Cu(t)}registerClick(t){const e=Mu(t);this._handleMultiClick(e)}_handleMultiClick(t){this._getClicks(t).forEach((t=>{t.clickCount++}))}_getClicks(t){return this._clicks.filter((e=>e.node===t))}_checkClicks(){const t=[],e=$u();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=e&&t.push(n)}));for(const e of t){const t=this._clicks.indexOf(e);t>-1&&(this._generateBreadcrumbs(e),this._clicks.splice(t,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const e=this._replay,n=t.scrollAfter&&t.scrollAfter<=this._scollTimeout,r=t.mutationAfter&&t.mutationAfter<=this._threshold,s=!n&&!r,{clickCount:o,clickBreadcrumb:i}=t;if(s){const n=1e3*Math.min(t.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",s={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.slowClickDetected",data:{...i.data,url:ma.location.href,route:e.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:o||1}};this._addBreadcrumbEvent(e,s)}else if(o>1){const t={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.multiClick",data:{...i.data,url:ma.location.href,route:e.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(e,t)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const Pu=["A","BUTTON","INPUT"];function $u(){return Date.now()/1e3}function Fu(t,e){try{if(!function(t){return t.type===Tu}(e))return;const{source:n}=e.data;if(n===Nc.Mutation&&t.registerMutation(e.timestamp),n===Nc.Scroll&&t.registerScroll(e.timestamp),function(t){return t.data.source===Nc.MouseInteraction}(e)){const{type:n,id:r}=e.data,s=xu.mirror.getNode(r);s instanceof HTMLElement&&n===Lc.Click&&t.registerClick(s)}}catch(t){}}function Bu(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var ju;!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(ju||(ju={}));const Uu=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Hu(t){const e={};for(const n in t)if(Uu.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),e[r]=t[n]}return e}const zu=t=>e=>{if(!t.isEnabled())return;const n=function(t){const{target:e,message:n}=function(t){const e="click"===t.name;let n,r=null;try{r=e?Ou(t.event):Au(t.event),n=T(r,{maxStringLength:200})||"<unknown>"}catch(t){n="<unknown>"}return{target:r,message:n}}(t);return Bu({category:`ui.${t.name}`,...qu(e,n)})}(e);if(!n)return;const r="click"===e.name,s=r?e.event:void 0;!(r&&t.clickDetector&&s&&s.target)||s.altKey||s.metaKey||s.ctrlKey||s.shiftKey||function(t,e,n){t.handleClick(e,n)}(t.clickDetector,n,Ou(e.event)),Iu(t,n)};function qu(t,e){const n=xu.mirror.getId(t),r=n&&xu.mirror.getNode(n),s=r&&xu.mirror.getMeta(r),o=s&&function(t){return t.type===ju.Element}(s)?s:null;return{message:e,data:o?{nodeId:n,node:{id:n,tagName:o.tagName,textContent:Array.from(o.childNodes).map((t=>t.type===ju.Text&&t.textContent)).filter(Boolean).map((t=>t.trim())).join(""),attributes:Hu(o.attributes)}}:{}}}function Wu(t,e){if(!t.isEnabled())return;t.updateUserActivity();const n=function(t){const{metaKey:e,shiftKey:n,ctrlKey:r,altKey:s,key:o,target:i}=t;if(!i||function(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable}(i)||!o)return null;const a=e||r||s,c=1===o.length;if(!a&&c)return null;const u=T(i,{maxStringLength:200})||"<unknown>",l=qu(i,u);return Bu({category:"ui.keyDown",message:u,data:{...l.data,metaKey:e,shiftKey:n,ctrlKey:r,altKey:s,key:o}})}(e);n&&Iu(t,n)}const Gu={resource:function(t){const{entryType:e,initiatorType:n,name:r,responseEnd:s,startTime:o,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:u}=t;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${e}.${n}`,start:Vu(o),end:Vu(s),name:r,data:{size:u,statusCode:c,decodedBodySize:i,encodedBodySize:a}}},paint:function(t){const{duration:e,entryType:n,name:r,startTime:s}=t,o=Vu(s);return{type:n,name:r,start:o,end:o+e,data:void 0}},navigation:function(t){const{entryType:e,name:n,decodedBodySize:r,duration:s,domComplete:o,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:p,startTime:h,transferSize:f,type:m}=t;if(0===s)return null;return{type:`${e}.${m}`,start:Vu(h),end:Vu(o),name:n,data:{size:f,decodedBodySize:r,encodedBodySize:i,duration:s,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:o,redirectCount:p}}}};function Yu(t){return Gu[t.entryType]?Gu[t.entryType](t):null}function Vu(t){return((ct||ma.performance.timeOrigin)+t)/1e3}function Ju(t){function e(e){t.performanceEntries.includes(e)||t.performanceEntries.push(e)}function n({entries:t}){t.forEach(e)}const r=[];return["navigation","paint","resource"].forEach((t=>{r.push(oa(t,n))})),r.push(sa((({metric:e})=>{t.replayPerformanceEntries.push(function(t){const e=t.entries,n=e[e.length-1],r=n?n.element:void 0,s=t.value,o=Vu(s);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:o,end:o,data:{value:s,size:s,nodeId:r?xu.mirror.getId(r):void 0}}}(e))}))),()=>{r.forEach((t=>t()))}}const Ku="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Xu='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function Zu(t,e){Ku&&(N.info(t),e&&tl(t))}function Qu(t,e){Ku&&(N.info(t),e&&setTimeout((()=>{tl(t)}),0))}function tl(t){ke({category:"console",data:{logger:"replay"},level:"info",message:t},{level:"info"})}class el extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class nl{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const e=JSON.stringify(t).length;if(this._totalSize+=e,this._totalSize>Sa)throw new el;this.events.push(t)}finish(){return new Promise((t=>{const e=this.events;this.clear(),t(JSON.stringify(e))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map((t=>t.timestamp)).sort()[0];return t?Eu(t):null}}class rl{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((t,e)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?t():e()}),{once:!0}),this._worker.addEventListener("error",(t=>{e(t)}),{once:!0})}))),this._ensureReadyPromise}destroy(){Zu("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(t,e){const n=this._getAndIncrementId();return new Promise(((r,s)=>{const o=({data:e})=>{const i=e;if(i.method===t&&i.id===n){if(this._worker.removeEventListener("message",o),!i.success)return Ku&&N.error("[Replay]",i.response),void s(new Error("Error in compression worker"));r(i.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:n,method:t,arg:e})}))}_getAndIncrementId(){return this._id++}}class sl{constructor(t){this._worker=new rl(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const e=Eu(t.timestamp);(!this._earliestTimestamp||e<this._earliestTimestamp)&&(this._earliestTimestamp=e);const n=JSON.stringify(t);return this._totalSize+=n.length,this._totalSize>Sa?Promise.reject(new el):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(t=>{Ku&&N.warn('[Replay] Sending "clear" message to worker failed',t)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class ol{constructor(t){this._fallback=new nl,this._compression=new sl(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){return void Zu("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:e}=this._fallback,n=[];for(const e of t)n.push(this._compression.addEvent(e));this._compression.hasCheckout=e,this._used=this._compression;try{await Promise.all(n)}catch(t){Ku&&N.warn("[Replay] Failed to add events when switching buffers.",t)}}}function il({useCompression:t,workerUrl:e}){if(t&&window.Worker){const t=function(t){try{const e=t||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const t=new Blob([Xu]);return URL.createObjectURL(t)}();return""}();if(!e)return;Zu("[Replay] Using compression worker"+(t?` from ${t}`:""));const n=new Worker(e);return new ol(n)}catch(t){Zu("[Replay] Failed to create compression worker")}}(e);if(t)return t}return Zu("[Replay] Using simple buffer"),new nl}function al(){try{return"sessionStorage"in ma&&!!ma.sessionStorage}catch(t){return!1}}function cl(t){!function(){if(!al())return;try{ma.sessionStorage.removeItem(ga)}catch(t){}}(),t.session=void 0}function ul(t){return void 0!==t&&Math.random()<t}function ll(t){const e=Date.now();return{id:t.id||X(),started:t.started||e,lastActivity:t.lastActivity||e,segmentId:t.segmentId||0,sampled:t.sampled,previousSessionId:t.previousSessionId}}function dl(t){if(al())try{ma.sessionStorage.setItem(ga,JSON.stringify(t))}catch(t){}}function pl({sessionSampleRate:t,allowBuffering:e,stickySession:n=!1},{previousSessionId:r}={}){const s=function(t,e){return ul(t)?"session":!!e&&"buffer"}(t,e),o=ll({sampled:s,previousSessionId:r});return n&&dl(o),o}function hl(t,e,n=+new Date){return null===t||void 0===e||e<0||0!==e&&t+e<=n}function fl(t,{maxReplayDuration:e,sessionIdleExpire:n,targetTime:r=Date.now()}){return hl(t.started,e,r)||hl(t.lastActivity,n,r)}function ml(t,{sessionIdleExpire:e,maxReplayDuration:n}){return!!fl(t,{sessionIdleExpire:e,maxReplayDuration:n})&&("buffer"!==t.sampled||0!==t.segmentId)}function gl({traceInternals:t,sessionIdleExpire:e,maxReplayDuration:n,previousSessionId:r},s){const o=s.stickySession&&function(t){if(!al())return null;try{const e=ma.sessionStorage.getItem(ga);if(!e)return null;const n=JSON.parse(e);return Qu("[Replay] Loading existing session",t),ll(n)}catch(t){return null}}(t);return o?ml(o,{sessionIdleExpire:e,maxReplayDuration:n})?(Qu("[Replay] Session in sessionStorage is expired, creating new one..."),pl(s,{previousSessionId:o.id})):o:(Qu("[Replay] Creating new session",t),pl(s,{previousSessionId:r}))}function yl(t,e,n){return!!vl(t,e)&&(_l(t,e,n),!0)}async function _l(t,e,n){if(!t.eventBuffer)return null;try{n&&"buffer"===t.recordingMode&&t.eventBuffer.clear(),n&&(t.eventBuffer.hasCheckout=!0);const r=function(t,e){try{if("function"==typeof e&&function(t){return t.type===Dc.Custom}(t))return e(t)}catch(t){return Ku&&N.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",t),null}return t}(e,t.getOptions().beforeAddRecordingEvent);if(!r)return;return await t.eventBuffer.addEvent(r)}catch(e){const n=e&&e instanceof el?"addEventSizeExceeded":"addEvent";Ku&&N.error(e),await t.stop({reason:n});const r=Pe();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function vl(t,e){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const n=Eu(e.timestamp);return!(n+t.timeouts.sessionIdlePause<Date.now())&&(!(n>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration)||(Zu(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,t.getOptions()._experiments.traceInternals),!1))}function bl(t){return!t.type}function Sl(t){return"transaction"===t.type}function kl(t){return"feedback"===t.type}function wl(t){const e=function(){const t=Pe();if(!t)return!1;const e=t.getTransport();if(!e)return!1;return e.send.__sentry__baseTransport__||!1}();return(n,r)=>{if(!t.isEnabled()||!bl(n)&&!Sl(n))return;const s=r&&r.statusCode;e&&(!s||s<200||s>=300)||(Sl(n)?function(t,e){const n=t.getContext();e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(e.contexts.trace.trace_id)}(t,n):function(t,e){const n=t.getContext();e.event_id&&n.errorIds.size<100&&n.errorIds.add(e.event_id);if("buffer"!==t.recordingMode||!e.tags||!e.tags.replayId)return;const{beforeErrorSampling:r}=t.getOptions();if("function"==typeof r&&!r(e))return;setTimeout((()=>{t.sendBufferedReplayOrFlush()}))}(t,n))}}function xl(t){return e=>{t.isEnabled()&&bl(e)&&function(t,e){const n=e.exception&&e.exception.values&&e.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){Iu(t,Bu({category:"replay.hydrate-error"}))}}(t,e)}}function Tl(t,e=!1){const n=e?wl(t):void 0;return Object.assign(((e,r)=>{if(!t.isEnabled())return e;if(function(t){return"replay_event"===t.type}(e))return delete e.breadcrumbs,e;if(!bl(e)&&!Sl(e)&&!kl(e))return e;if(!t.checkAndHandleExpiredSession())return e;if(kl(e))return t.flush(),e.contexts.feedback.replay_id=t.getSessionId(),function(t,e){t.triggerUserActivity(),t.addUpdate((()=>!e.timestamp||(t.throttledAddEvent({type:Dc.Custom,timestamp:1e3*e.timestamp,data:{tag:"breadcrumb",payload:{timestamp:e.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:e.event_id}}}}),!1)))}(t,e),e;if(function(t,e){return!(t.type||!t.exception||!t.exception.values||!t.exception.values.length||!e.originalException||!e.originalException.__rrweb__)}(e,r)&&!t.getOptions()._experiments.captureExceptions)return Ku&&N.log("[Replay] Ignoring error from rrweb internals",e),null;const s=function(t,e){return"buffer"===t.recordingMode&&e.message!==_a&&!(!e.exception||e.type)&&ul(t.getOptions().errorSampleRate)}(t,e);return(s||"session"===t.recordingMode)&&(e.tags={...e.tags,replayId:t.getSessionId()}),n&&n(e,{statusCode:200}),e}),{id:"Replay"})}function El(t,e){return e.map((({type:e,start:n,end:r,name:s,data:o})=>{const i=t.throttledAddEvent({type:Dc.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:e,description:s,startTimestamp:n,endTimestamp:r,data:o}}});return"string"==typeof i?Promise.resolve(null):i}))}function Cl(t){return e=>{if(!t.isEnabled())return;const n=function(t){const{from:e,to:n}=t,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:e}}}(e);null!==n&&(t.getContext().urls.push(n.name),t.triggerUserActivity(),t.addUpdate((()=>(El(t,[n]),!1))))}}function Il(t,e){t.isEnabled()&&null!==e&&(function(t,e){return(!Ku||!t.getOptions()._experiments.traceInternals)&&bi(e,Pe())}(t,e.name)||t.addUpdate((()=>(El(t,[e]),!0))))}function Rl(t){return e=>{if(!t.isEnabled())return;const n=function(t){const{startTimestamp:e,endTimestamp:n,xhr:r}=t,s=r[xo];if(!e||!n||!s)return null;const{method:o,url:i,status_code:a}=s;return void 0===i?null:{type:"resource.xhr",name:i,start:e/1e3,end:n/1e3,data:{method:o,statusCode:a}}}(e);Il(t,n)}}function Ml(t,e){if(t)try{if("string"==typeof t)return e.encode(t).length;if(t instanceof URLSearchParams)return e.encode(t.toString()).length;if(t instanceof FormData){const n=Fl(t);return e.encode(n).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch(t){}}function Ol(t){if(!t)return;const e=parseInt(t,10);return isNaN(e)?void 0:e}function Al(t){try{if("string"==typeof t)return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[Fl(t)];if(!t)return[void 0]}catch(e){return Ku&&N.warn("[Replay] Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return Ku&&N.info("[Replay] Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Dl(t,e){if(!t)return{headers:{},size:void 0,_meta:{warnings:[e]}};const n={...t._meta},r=n.warnings||[];return n.warnings=[...r,e],t._meta=n,t}function Nl(t,e){if(!e)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:o,statusCode:i,request:a,response:c}=e;return{type:t,start:n/1e3,end:r/1e3,name:s,data:Y({method:o,statusCode:i,request:a,response:c})}}function Ll(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function Pl(t,e,n){if(!e&&0===Object.keys(t).length)return;if(!e)return{headers:t};if(!n)return{headers:t,size:e};const r={headers:t,size:e},{body:s,warnings:o}=function(t){if(!t||"string"!=typeof t)return{body:t};const e=t.length>va,n=function(t){const e=t[0],n=t[t.length-1];return"["===e&&"]"===n||"{"===e&&"}"===n}(t);if(e){const e=t.slice(0,va);return n?{body:e,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${e}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(t)}}catch(t){}return{body:t}}(n);return r.body=s,o&&o.length>0&&(r._meta={warnings:o}),r}function $l(t,e){return Object.keys(t).reduce(((n,r)=>{const s=r.toLowerCase();return e.includes(s)&&t[r]&&(n[s]=t[r]),n}),{})}function Fl(t){return new URLSearchParams(t).toString()}function Bl(t,e){const n=function(t,e=ma.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(ma.location.origin))return t;const n=new URL(t,e);if(n.origin!==new URL(e).origin)return t;const r=n.href;if(!t.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(t);return B(n,e)}async function jl(t,e,n){try{const r=await async function(t,e,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r}=e,{url:i,method:a,status_code:c=0,request_body_size:u,response_body_size:l}=t.data,d=Bl(i,n.networkDetailAllowUrls)&&!Bl(i,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:t,networkRequestHeaders:e},n,r){const s=n?function(t,e){if(1===t.length&&"string"!=typeof t[0])return zl(t[0],e);if(2===t.length)return zl(t[1],e);return{}}(n,e):{};if(!t)return Pl(s,r,void 0);const o=Ul(n),[i,a]=Al(o),c=Pl(s,r,i);if(a)return Dl(c,a);return c}(n,e.input,u):Ll(u),h=await async function(t,{networkCaptureBodies:e,textEncoder:n,networkResponseHeaders:r},s,o){if(!t&&void 0!==o)return Ll(o);const i=s?Hl(s.headers,r):{};if(!s||!e&&void 0!==o)return Pl(i,o,void 0);const[a,c]=await async function(t){const e=function(t){try{return t.clone()}catch(t){Ku&&N.warn("[Replay] Failed to clone response body",t)}}(t);if(!e)return[void 0,"BODY_PARSE_ERROR"];try{const t=await function(t){return new Promise(((e,n)=>{const r=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(t){return await t.text()})(t).then((t=>e(t)),(t=>n(t))).finally((()=>clearTimeout(r)))}))}(e);return[t]}catch(t){return Ku&&N.warn("[Replay] Failed to get text body from response",t),[void 0,"BODY_PARSE_ERROR"]}}(s),u=function(t,{networkCaptureBodies:e,textEncoder:n,responseBodySize:r,captureDetails:s,headers:o}){try{const i=t&&t.length&&void 0===r?Ml(t,n):r;return s?Pl(o,i,e?t:void 0):Ll(i)}catch(t){return Ku&&N.warn("[Replay] Failed to serialize response body",t),Pl(o,r,void 0)}}(a,{networkCaptureBodies:e,textEncoder:n,responseBodySize:o,captureDetails:t,headers:i});if(c)return Dl(u,c);return u}(d,n,e.response,l);return{startTimestamp:s,endTimestamp:o,url:i,method:a,statusCode:c,request:p,response:h}}(t,e,n),s=Nl("resource.fetch",r);Il(n.replay,s)}catch(t){Ku&&N.error("[Replay] Failed to capture fetch breadcrumb",t)}}function Ul(t=[]){if(2===t.length&&"object"==typeof t[1])return t[1].body}function Hl(t,e){const n={};return e.forEach((e=>{t.get(e)&&(n[e]=t.get(e))})),n}function zl(t,e){if(!t)return{};const n=t.headers;return n?n instanceof Headers?Hl(n,e):Array.isArray(n)?{}:$l(n,e):{}}async function ql(t,e,n){try{const r=function(t,e,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r,input:i,xhr:a}=e,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:p}=t.data;if(!c)return null;if(!a||!Bl(c,n.networkDetailAllowUrls)||Bl(c,n.networkDetailDenyUrls)){return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:l,request:Ll(d),response:Ll(p)}}const h=a[xo],f=h?$l(h.request_headers,n.networkRequestHeaders):{},m=$l(function(t){const e=t.getAllResponseHeaders();if(!e)return{};return e.split("\r\n").reduce(((t,e)=>{const[n,r]=e.split(": ");return t[n.toLowerCase()]=r,t}),{})}(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?Al(i):[void 0],[_,v]=n.networkCaptureBodies?function(t){const e=[];try{return[t.responseText]}catch(t){e.push(t)}try{return function(t,e){try{if("string"==typeof t)return[t];if(t instanceof Document)return[t.body.outerHTML];if("json"===e&&t&&"object"==typeof t)return[JSON.stringify(t)];if(!t)return[void 0]}catch(e){return Ku&&N.warn("[Replay] Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return Ku&&N.info("[Replay] Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}(t.response,t.responseType)}catch(t){e.push(t)}return Ku&&N.warn("[Replay] Failed to get xhr response body",...e),[void 0]}(a):[void 0],b=Pl(f,d,g),S=Pl(m,p,_);return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:l,request:y?Dl(b,y):b,response:v?Dl(S,v):S}}(t,e,n),s=Nl("resource.xhr",r);Il(n.replay,s)}catch(t){Ku&&N.error("[Replay] Failed to capture xhr breadcrumb",t)}}function Wl(t,e,n){const{xhr:r,input:s}=e;if(!r)return;const o=Ml(s,n.textEncoder),i=r.getResponseHeader("content-length")?Ol(r.getResponseHeader("content-length")):function(t,e,n){try{return Ml("json"===e&&t&&"object"==typeof t?JSON.stringify(t):t,n)}catch(t){return}}(r.response,r.responseType,n.textEncoder);void 0!==o&&(t.data.request_body_size=o),void 0!==i&&(t.data.response_body_size=i)}function Gl(t){const e=Pe();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:a}=t.getOptions(),c={replay:t,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:a};e&&e.on?e.on("beforeAddBreadcrumb",((t,e)=>function(t,e,n){if(!e.data)return;try{(function(t){return"xhr"===t.category})(e)&&function(t){return t&&t.xhr}(n)&&(Wl(e,n,t),ql(e,n,t)),function(t){return"fetch"===t.category}(e)&&function(t){return t&&t.response}(n)&&(!function(t,e,n){const{input:r,response:s}=e,o=Ml(r?Ul(r):void 0,n.textEncoder),i=s?Ol(s.headers.get("content-length")):void 0;void 0!==o&&(t.data.request_body_size=o),void 0!==i&&(t.data.response_body_size=i)}(e,n,t),jl(e,n,t))}catch(t){Ku&&N.warn("Error when enriching network breadcrumb")}}(c,t,e))):(Co(function(t){return e=>{if(!t.isEnabled())return;const n=function(t){const{startTimestamp:e,endTimestamp:n,fetchData:r,response:s}=t;if(!n)return null;const{method:o,url:i}=r;return{type:"resource.fetch",start:e/1e3,end:n/1e3,name:i,data:{method:o,statusCode:s?s.status:void 0}}}(e);Il(t,n)}}(t)),To(Rl(t)))}catch(t){}}let Yl=null;const Vl=t=>e=>{if(!t.isEnabled())return;const n=function(t){const e=t.getLastBreadcrumb&&t.getLastBreadcrumb();if(Yl===e||!e)return null;if(Yl=e,!function(t){return!!t.category}(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui."))return null;if("console"===e.category)return function(t){const e=t.data&&t.data.arguments;if(!Array.isArray(e)||0===e.length)return Bu(t);let n=!1;const r=e.map((t=>{if(!t)return t;if("string"==typeof t)return t.length>ba?(n=!0,`${t.slice(0,ba)}…`):t;if("object"==typeof t)try{const e=de(t,7);return JSON.stringify(e).length>ba?(n=!0,`${JSON.stringify(e,null,2).slice(0,ba)}…`):e}catch(t){}return t}));return Bu({...t,data:{...t.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(e);return Bu(e)}(e);n&&Iu(t,n)};function Jl(t){return!(!t||!t.on)}function Kl(t){const{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}=t,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Xl(t){let e=!1;return(n,r)=>{if(!t.checkAndHandleExpiredSession())return void(Ku&&N.warn("[Replay] Received replay event after session expired."));const s=r||!e;e=!0,t.clickDetector&&Fu(t.clickDetector,n),t.addUpdate((()=>{if("buffer"===t.recordingMode&&s&&t.setInitialState(),!yl(t,n,s))return!0;if(!s)return!1;if(function(t,e){if(!e||!t.session||0!==t.session.segmentId)return;yl(t,function(t){const e=t.getOptions();return{type:Dc.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:t.isRecordingCanvas(),sessionSampleRate:e.sessionSampleRate,errorSampleRate:e.errorSampleRate,useCompressionOption:e.useCompression,blockAllMedia:e.blockAllMedia,maskAllText:e.maskAllText,maskAllInputs:e.maskAllInputs,useCompression:!!t.eventBuffer&&"worker"===t.eventBuffer.type,networkDetailHasUrls:e.networkDetailAllowUrls.length>0,networkCaptureBodies:e.networkCaptureBodies,networkRequestHasHeaders:e.networkRequestHeaders.length>0,networkResponseHasHeaders:e.networkResponseHeaders.length>0}}}}(t),!1)}(t,s),t.session&&t.session.previousSessionId)return!0;if("buffer"===t.recordingMode&&t.session&&t.eventBuffer){const e=t.eventBuffer.getEarliestTimestamp();e&&(Zu(`[Replay] Updating session start time to earliest event in buffer to ${new Date(e)}`,t.getOptions()._experiments.traceInternals),t.session.started=e,t.getOptions().stickySession&&dl(t.session))}return"session"===t.recordingMode&&t.flush(),!0}))}}async function Zl({recordingData:t,replayId:e,segmentId:n,eventContext:r,timestamp:s,session:o}){const i=function({recordingData:t,headers:e}){let n;const r=`${JSON.stringify(e)}\n`;if("string"==typeof t)n=`${r}${t}`;else{const e=(new TextEncoder).encode(r);n=new Uint8Array(e.length+t.length),n.set(e),n.set(t,e.length)}return n}({recordingData:t,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=Pe(),p=Fe(),h=d&&d.getTransport(),f=d&&d.getDsn();if(!(d&&h&&f&&o.sampled))return;const m={type:ya,replay_start_timestamp:l/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:e,segment_id:n,replay_type:o.sampled},g=await async function({client:t,scope:e,replayId:n,event:r}){const s={event_id:n,integrations:"object"!=typeof t._integrations||null===t._integrations||Array.isArray(t._integrations)?void 0:Object.keys(t._integrations)};t.emit&&t.emit("preprocessEvent",r,s);const o=await fe(t.getOptions(),r,s,e,t,Qt());if(!o)return null;o.platform=o.platform||"javascript";const i=t.getSdkMetadata&&t.getSdkMetadata(),{name:a,version:c}=i&&i.sdk||{};return o.sdk={...o.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},o}({scope:p,client:d,replayId:e,event:m});if(!g)return d.recordDroppedEvent("event_processor","replay",m),void Zu("An event processor returned `null`, will not send event.");delete g.sdkProcessingMetadata;const y=function(t,e,n,r){return Hn(Xn(t,Kn(t),r,n),[[{type:"replay_event"},t],[{type:"replay_recording",length:"string"==typeof e?(new TextEncoder).encode(e).length:e.length},e]])}(g,i,f,d.getOptions().tunnel);let _;try{_=await h.send(y)}catch(t){const e=new Error(_a);try{e.cause=t}catch(t){}throw e}if(!_)return _;if("number"==typeof _.statusCode&&(_.statusCode<200||_.statusCode>=300))throw new Ql(_.statusCode);const v=Fr({},_);if($r(v,"replay"))throw new td(v);return _}class Ql extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class td extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function ed(t,e={count:0,interval:5e3}){const{recordingData:n,options:r}=t;if(n.length)try{return await Zl(t),!0}catch(n){if(n instanceof Ql||n instanceof td)throw n;if(we("Replays",{_retryCount:e.count}),Ku&&r._experiments&&r._experiments.captureExceptions&&_e(n),e.count>=3){const t=new Error(`${_a} - max retries exceeded`);try{t.cause=n}catch(t){}throw t}return e.interval*=++e.count,new Promise(((n,r)=>{setTimeout((async()=>{try{await ed(t,e),n(!0)}catch(t){r(t)}}),e.interval)}))}}const nd="__THROTTLED";function rd(t,e,n){const r=new Map;let s=!1;return(...o)=>{const i=Math.floor(Date.now()/1e3);if((t=>{const e=t-n;r.forEach(((t,n)=>{n<e&&r.delete(n)}))})(i),[...r.values()].reduce(((t,e)=>t+e),0)>=e){const t=s;return s=!0,t?"__SKIPPED":nd}s=!1;const a=r.get(i)||0;return r.set(i,a+1),t(...o)}}class sd{constructor({options:t,recordingOptions:e}){sd.prototype.__init.call(this),sd.prototype.__init2.call(this),sd.prototype.__init3.call(this),sd.prototype.__init4.call(this),sd.prototype.__init5.call(this),sd.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=e,this._options=t,this._debouncedFlush=function(t,e,n){let r,s,o;const i=n&&n.maxWait?Math.max(n.maxWait,e):0;function a(){return c(),r=t(),r}function c(){void 0!==s&&clearTimeout(s),void 0!==o&&clearTimeout(o),s=o=void 0}function u(){return s&&clearTimeout(s),s=setTimeout(a,e),i&&void 0===o&&(o=setTimeout(a,i)),r}return u.cancel=c,u.flush=function(){return void 0!==s||void 0!==o?a():r},u}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=rd(((t,e)=>function(t,e,n){return vl(t,e)?_l(t,e,n):Promise.resolve(null)}(this,t,e)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),s=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;s&&(this.clickDetector=new Lu(this,s))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(t){const{errorSampleRate:e,sessionSampleRate:n}=this._options;e<=0&&n<=0||(this._initializeSessionForSampling(t),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Qu(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Qu("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const t=gl({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Qu("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const t=gl({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=xu({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:Xl(this),onMutation:this._onMutationHandler,...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this._handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this._handleException(t),!1}}async stop({forceFlush:t=!1,reason:e}={}){if(this._isEnabled){this._isEnabled=!1;try{Zu("[Replay] Stopping Replay"+(e?` triggered by ${e}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,cl(this)}catch(t){this._handleException(t)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Zu("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),Zu("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const e=Date.now();Zu("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();t&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(e),this._updateSessionActivity(e),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const e=t();"buffer"!==this.recordingMode&&!0!==e&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&hl(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const t=`${ma.location.pathname}${ma.location.hash}${ma.location.search}`,e=`${ma.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=e,this._context.initialTimestamp=Date.now(),this._context.urls.push(e)}throttledAddEvent(t,e){const n=this._throttledAddEvent(t,e);if(n===nd){const t=Bu({category:"replay.throttled"});this.addUpdate((()=>!yl(this,{type:5,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t,metric:!0}})))}return n}getCurrentRoute(){const t=this.lastTransaction||Fe().getTransaction(),e=(t&&Pt(t).data||{})[Hr];if(t&&e&&["route","custom"].includes(e))return Pt(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=il({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(t){Ku&&N.error("[Replay]",t),Ku&&this._options._experiments&&this._options._experiments.captureExceptions&&_e(t)}_initializeSessionForSampling(t){const e=this._options.errorSampleRate>0,n=gl({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:e});this.session=n}_checkSession(){if(!this.session)return!1;const t=this.session;return!ml(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(t),!1)}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{ma.document.addEventListener("visibilitychange",this._handleVisibilityChange),ma.addEventListener("blur",this._handleWindowBlur),ma.addEventListener("focus",this._handleWindowFocus),ma.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(t){const e=Fe(),n=Pe();e.addScopeListener(Vl(t)),bo(zu(t)),lo(Cl(t)),Gl(t);const r=Tl(t,!Jl(n));n&&n.addEventProcessor?n.addEventProcessor(r):Dr(r),Jl(n)&&(n.on("beforeSendEvent",xl(t)),n.on("afterSendEvent",wl(t)),n.on("createDsc",(e=>{const n=t.getSessionId();n&&t.isEnabled()&&"session"===t.recordingMode&&t.checkAndHandleExpiredSession()&&(e.replay_id=n)})),n.on("startTransaction",(e=>{t.lastTransaction=e})),n.on("finishTransaction",(e=>{t.lastTransaction=e})),n.on("beforeSendFeedback",((e,n)=>{const r=t.getSessionId();n&&n.includeReplay&&t.isEnabled()&&r&&e.contexts&&e.contexts.feedback&&(e.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(t){this._handleException(t)}this._performanceCleanupCallback=Ju(this)}_removeListeners(){try{ma.document.removeEventListener("visibilitychange",this._handleVisibilityChange),ma.removeEventListener("blur",this._handleWindowBlur),ma.removeEventListener("focus",this._handleWindowFocus),ma.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this._handleException(t)}}__init(){this._handleVisibilityChange=()=>{"visible"===ma.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const t=Bu({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{const t=Bu({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{Wu(this,t)}}_doChangeToBackgroundTasks(t){if(!this.session)return;fl(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;this.checkAndHandleExpiredSession()?t&&this._createCustomBreadcrumb(t):Zu("[Replay] Document has become active, but session has expired")}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate((()=>{this.throttledAddEvent({type:Dc.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})}))}_addPerformanceEntries(){const t=(e=this.performanceEntries,e.map(Yu).filter(Boolean)).concat(this.replayPerformanceEntries);var e;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(El(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:e}=this;if(!t||!e)return;if(t.segmentId)return;const n=e.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(this.session&&this.eventBuffer&&t){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(t){try{return Promise.all(El(t,[Kl(ma.performance.memory)]))}catch(t){return[]}}(this),this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const e=Date.now();if(e-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const s=await this.eventBuffer.finish();await ed({replayId:t,recordingData:s,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:e})}catch(t){this._handleException(t),this.stop({reason:"sendReplay"});const e=Pe();e&&e.recordDroppedEvent("send_error","replay")}}else Ku&&N.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession())return void(Ku&&N.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const e=this.session.started,n=Date.now()-e;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,s=n>this._options.maxReplayDuration+5e3;if(r||s)return Zu(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const o=this.eventBuffer;if(o&&0===this.session.segmentId&&!o.hasCheckout&&Zu("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(t){Ku&&N.error(t)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&dl(this.session)}__init6(){this._onMutationHandler=t=>{const e=t.length,n=this._options.mutationLimit,r=n&&e>n;if(e>this._options.mutationBreadcrumbLimit||r){const t=Bu({category:"replay.mutations",data:{count:e,limit:r}});this._createCustomBreadcrumb(t)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function od(t,e,n,r){const s=[...t,..."string"==typeof r?r.split(","):[],...e];return void 0!==n&&("string"==typeof n&&s.push(`.${n}`),D((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),s.join(",")}const id='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',ad=["content-length","content-type","accept"];let cd=!1;const ud=t=>new ld(t);class ld{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=5e3,flushMaxDelay:e=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:s=!0,useCompression:o=!0,workerUrl:i,_experiments:a={},sessionSampleRate:c,errorSampleRate:u,maskAllText:l=!0,maskAllInputs:d=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:h=750,mutationLimit:f=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:y=[],networkDetailDenyUrls:_=[],networkCaptureBodies:v=!0,networkRequestHeaders:b=[],networkResponseHeaders:S=[],mask:k=[],maskAttributes:w=["title","placeholder"],unmask:x=[],block:T=[],unblock:E=[],ignore:C=[],maskFn:I,beforeAddRecordingEvent:R,beforeErrorSampling:M,blockClass:O,blockSelector:A,maskInputOptions:D,maskTextClass:N,maskTextSelector:L,ignoreClass:P}={}){this.name=ld.id;const $=function({mask:t,unmask:e,block:n,unblock:r,ignore:s,blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:c,ignoreClass:u}){const l={maskTextSelector:od(t,[".sentry-mask","[data-sentry-mask]"],a,c),unmaskTextSelector:od(e,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:od(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],o,i),unblockSelector:od(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:od(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],u)};return o instanceof RegExp&&(l.blockClass=o),a instanceof RegExp&&(l.maskTextClass=a),l}({mask:k,unmask:x,block:T,unblock:E,ignore:C,blockClass:O,blockSelector:A,maskTextClass:N,maskTextSelector:L,ignoreClass:P});if(this._recordingOptions={maskAllInputs:d,maskAllText:l,maskInputOptions:{...D||{},password:!0},maskTextFn:I,maskInputFn:I,maskAttributeFn:(t,e,n)=>function({el:t,key:e,maskAttributes:n,maskAllText:r,privacyOptions:s,value:o}){return r?s.unmaskTextSelector&&t.matches(s.unmaskTextSelector)?o:n.includes(e)||"value"===e&&"INPUT"===t.tagName&&["submit","button"].includes(t.getAttribute("type")||"")?o.replace(/[\S]/g,"*"):o:o}({maskAttributes:w,maskAllText:l,privacyOptions:$,key:t,value:e,el:n}),...$,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:t=>{try{t.__rrweb__=!0}catch(t){}}},this._initialOptions={flushMinDelay:t,flushMaxDelay:e,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,ka),stickySession:s,sessionSampleRate:c,errorSampleRate:u,useCompression:o,workerUrl:i,blockAllMedia:p,maskAllInputs:d,maskAllText:l,mutationBreadcrumbLimit:h,mutationLimit:f,slowClickTimeout:m,slowClickIgnoreSelectors:g,networkDetailAllowUrls:y,networkDetailDenyUrls:_,networkCaptureBodies:v,networkRequestHeaders:dd(b),networkResponseHeaders:dd(S),beforeAddRecordingEvent:R,beforeErrorSampling:M,_experiments:a},"number"==typeof c&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${c} })`),this._initialOptions.sessionSampleRate=c),"number"==typeof u&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${u} })`),this._initialOptions.errorSampleRate=u),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${id}`:id),this._isInitialized&&wi())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return cd}set _isInitialized(t){cd=t}setupOnce(){wi()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(t){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const t=function(t){const e=Pe(),n=e&&e.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Y(t)};if(!n)return D((()=>{console.warn("SDK client is not available.")})),r;null==t.sessionSampleRate&&null==t.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&D((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new sd({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const t=Pe().getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch(t){}}}function dd(t){return[...ad,...t.map((t=>t.toLowerCase()))]}function pd(){const t=Pe();return t&&t.getIntegrationByName&&t.getIntegrationByName("Replay")}ld.__initStatic();var hd;function fd(t,e,n=1/0,r=0){return t?t.nodeType!==t.ELEMENT_NODE||r>n?-1:e(t)?r:fd(t.parentNode,e,n,r+1):-1}function md(t,e){return n=>{const r=n;if(null===r)return!1;try{if(t)if("string"==typeof t){if(r.matches(`.${t}`))return!0}else if(function(t,e){for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}return!1}(r,t))return!0;return!(!e||!r.matches(e))}catch(t){return!1}}}!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(hd||(hd={}));const gd="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let yd={map:{},getId(){return console.error(gd),-1},getNode(){return console.error(gd),null},removeNodeFromMap(){console.error(gd)},has(){return console.error(gd),!1},reset(){console.error(gd)}};function _d(t,e,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(t,e);return s.Object.defineProperty(t,e,r?n:{set(t){xd((()=>{n.set.call(this,t)}),0),o&&o.set&&o.set.call(this,t)}}),()=>_d(t,e,o||{},!0)}function vd(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],s=n(r);return"function"==typeof s&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=s,()=>{t[e]=r}}catch(t){return()=>{}}}function bd(t,e,n,r,s){if(!t)return!1;const o=function(t){return t?t.nodeType===t.ELEMENT_NODE?t:t.parentElement:null}(t);if(!o)return!1;const i=md(e,n);if(!s){const t=r&&o.matches(r);return i(o)&&!t}const a=fd(o,i);let c=-1;return!(a<0)&&(r&&(c=fd(o,md(null,r))),a>-1&&c<0||a<c)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(yd=new Proxy(yd,{get(t,e,n){return"map"===e&&console.error(gd),Reflect.get(t,e,n)}})),/[1-9][0-9]{12}/.test(Date.now().toString());const Sd={};function kd(t){const e=Sd[t];if(e)return e;const n=window.document;let r=window[t];if(n&&"function"==typeof n.createElement)try{const e=n.createElement("iframe");e.hidden=!0,n.head.appendChild(e);const s=e.contentWindow;s&&s[t]&&(r=s[t]),n.head.removeChild(e)}catch(t){}return Sd[t]=r.bind(window)}function wd(...t){return kd("requestAnimationFrame")(...t)}function xd(...t){return kd("setTimeout")(...t)}var Td=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(Td||{});let Ed;const Cd=t=>{if(!Ed)return t;return(...e)=>{try{return t(...e)}catch(t){if(Ed&&!0===Ed(t))return()=>{};throw t}}};for(var Id="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rd="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Md=0;Md<64;Md++)Rd[Id.charCodeAt(Md)]=Md;const Od=new Map;const Ad=(t,e,n)=>{if(!t||!Ld(t,e)&&"object"!=typeof t)return;const r=function(t,e){let n=Od.get(t);return n||(n=new Map,Od.set(t,n)),n.has(e)||n.set(e,[]),n.get(e)}(n,t.constructor.name);let s=r.indexOf(t);return-1===s&&(s=r.length,r.push(t)),s};function Dd(t,e,n){if(t instanceof Array)return t.map((t=>Dd(t,e,n)));if(null===t)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray){return{rr_type:t.constructor.name,args:[Object.values(t)]}}if(t instanceof ArrayBuffer){const e=t.constructor.name,n=function(t){var e,n=new Uint8Array(t),r=n.length,s="";for(e=0;e<r;e+=3)s+=Id[n[e]>>2],s+=Id[(3&n[e])<<4|n[e+1]>>4],s+=Id[(15&n[e+1])<<2|n[e+2]>>6],s+=Id[63&n[e+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s}(t);return{rr_type:e,base64:n}}if(t instanceof DataView){return{rr_type:t.constructor.name,args:[Dd(t.buffer,e,n),t.byteOffset,t.byteLength]}}if(t instanceof HTMLImageElement){const e=t.constructor.name,{src:n}=t;return{rr_type:e,src:n}}if(t instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:t.toDataURL()}}if(t instanceof ImageData){return{rr_type:t.constructor.name,args:[Dd(t.data,e,n),t.width,t.height]}}if(Ld(t,e)||"object"==typeof t){return{rr_type:t.constructor.name,index:Ad(t,e,n)}}return t}const Nd=(t,e,n)=>t.map((t=>Dd(t,e,n))),Ld=(t,e)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((t=>"function"==typeof e[t]));return Boolean(n.find((n=>t instanceof e[n])))};function Pd(t,e,n,r,s){const o=[];try{const i=vd(t.HTMLCanvasElement.prototype,"getContext",(function(t){return function(o,...i){if(!bd(this,e,n,r,!0)){const t=function(t){return"experimental-webgl"===t?"webgl":t}(o);if("__context"in this||(this.__context=t),s&&["webgl","webgl2"].includes(t))if(i[0]&&"object"==typeof i[0]){const t=i[0];t.preserveDrawingBuffer||(t.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return t.apply(this,[o,...i])}}));o.push(i)}catch(t){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach((t=>t()))}}function $d(t,e,n,r,s,o,i,a){const c=[],u=Object.getOwnPropertyNames(t);for(const i of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof t[i])continue;const u=vd(t,i,(function(t){return function(...c){const u=t.apply(this,c);if(Ad(u,a,this),"tagName"in this.canvas&&!bd(this.canvas,r,s,o,!0)){const t=Nd(c,a,this),r={type:e,property:i,args:t};n(this.canvas,r)}return u}}));c.push(u)}catch(r){const s=_d(t,i,{set(t){n(this.canvas,{type:e,property:i,args:[t],setter:!0})}});c.push(s)}return c}class Fd{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(t,e)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(t)||this.pendingCanvasMutations.set(t,[]),this.pendingCanvasMutations.get(t).push(e)};const{sampling:e="all",win:n,blockClass:r,blockSelector:s,unblockSelector:o,maxCanvasSize:i,recordCanvas:a,dataURLOptions:c,errorHandler:u}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,u&&(Ed=u),t.enableManualSnapshot||Cd((()=>{a&&"all"===e&&this.initCanvasMutationObserver(n,r,s,o),a&&"number"==typeof e&&this.initCanvasFPSObserver(e,n,r,s,o,i,{dataURLOptions:c})}))()}initCanvasFPSObserver(t,e,n,r,s,o,i){const a=Pd(e,n,r,s,!0),c=this.takeSnapshot(!1,t,e,n,r,s,o,i.dataURLOptions);this.resetObservers=()=>{a(),cancelAnimationFrame(c)}}initCanvasMutationObserver(t,e,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const s=Pd(t,e,n,r,!1),o=function(t,e,n,r,s){const o=[],i=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof e.CanvasRenderingContext2D.prototype[a])continue;const i=vd(e.CanvasRenderingContext2D.prototype,a,(function(o){return function(...i){return bd(this.canvas,n,r,s,!0)||xd((()=>{const n=Nd(i,e,this);t(this.canvas,{type:Td["2D"],property:a,args:n})}),0),o.apply(this,i)}}));o.push(i)}catch(n){const r=_d(e.CanvasRenderingContext2D.prototype,a,{set(e){t(this.canvas,{type:Td["2D"],property:a,args:[e],setter:!0})}});o.push(r)}return()=>{o.forEach((t=>t()))}}(this.processMutation.bind(this),t,e,n,r),i=function(t,e,n,r,s,o){const i=[];return i.push(...$d(e.WebGLRenderingContext.prototype,Td.WebGL,t,n,r,s,0,e)),void 0!==e.WebGL2RenderingContext&&i.push(...$d(e.WebGL2RenderingContext.prototype,Td.WebGL2,t,n,r,s,0,e)),()=>{i.forEach((t=>t()))}}(this.processMutation.bind(this),t,e,n,r,this.mirror);this.resetObservers=()=>{s(),o(),i()}}snapshot(t){const{options:e}=this,n=this.takeSnapshot(!0,"all"===e.sampling?2:e.sampling||2,e.win,e.blockClass,e.blockSelector,e.unblockSelector,e.maxCanvasSize,e.dataURLOptions,t);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(t,e,n,r,s,o,i,a,c){const u=new Map,l=new Worker(function(){const t=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(t)}());l.onmessage=t=>{const e=t.data,{id:n}=e;if(u.set(n,!1),!("base64"in e))return;const{base64:r,type:s,width:o,height:i}=e;this.mutationCb({id:n,type:Td["2D"],commands:[{property:"clearRect",args:[0,0,o,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:s}]},0,0,o,i]}]})};const d=1e3/e;let p,h=0;const f=e=>{h&&e-h<d||(h=e,(t=>{if(t)return[t];const e=[];return n.document.querySelectorAll("canvas").forEach((t=>{bd(t,r,s,o,!0)||e.push(t)})),e})(c).forEach((e=>{const n=this.mirror.getId(e);if(!u.get(n)&&e.width&&e.height){if(u.set(n,!0),!t&&["webgl","webgl2"].includes(e.__context)){const t=e.getContext(e.__context);!1===vi([t,"optionalAccess",t=>t.getContextAttributes,"call",t=>t(),"optionalAccess",t=>t.preserveDrawingBuffer])&&t.clear(t.COLOR_BUFFER_BIT)}createImageBitmap(e).then((t=>{l.postMessage({id:n,bitmap:t,width:e.width,height:e.height,dataURLOptions:a,maxCanvasSize:i},[t])})).catch((t=>{Cd((()=>{throw t}))()}))}}))),p=wd(f)};return p=wd(f),p}startPendingCanvasMutationFlusher(){wd((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const t=e=>{this.rafStamps.latestId=e,wd(t)};wd(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((t,e)=>{const n=this.mirror.getId(e);this.flushPendingCanvasMutationFor(e,n)})),wd((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(t,e){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(t);if(!n||-1===e)return;const r=n.map((t=>{const{type:e,...n}=t;return n})),{type:s}=n[0];this.mutationCb({id:e,type:s,commands:r}),this.pendingCanvasMutations.delete(t)}}const Bd={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},jd="ReplayCanvas",Ud=1280,Hd=(t={})=>{const[e,n]=t.maxCanvasSize||[],r={quality:t.quality||"medium",enableManualSnapshot:t.enableManualSnapshot,maxCanvasSize:[e?Math.min(e,Ud):Ud,n?Math.min(n,Ud):Ud]};let s;const o=new Promise((t=>s=t));return{name:jd,setupOnce(){},getOptions(){const{quality:t,enableManualSnapshot:e,maxCanvasSize:n}=r;return{enableManualSnapshot:e,recordCanvas:!0,getCanvasManager:t=>{const r=new Fd({...t,enableManualSnapshot:e,maxCanvasSize:n,errorHandler:t=>{try{"object"==typeof t&&(t.__rrweb__=!0)}catch(t){}}});return s(r),r},...Bd[t||"medium"]||Bd.medium}},async snapshot(t){(await o).snapshot(t)}}},zd=Ve(jd,Hd),qd=b,Wd="#ffffff",Gd="inherit",Yd="rgba(108, 95, 199, 1)",Vd={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:Wd,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"25px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:Yd,submitBorder:Yd,submitOutlineFocus:"#29232f",submitForeground:Wd,submitForegroundHover:Wd,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:Gd,inputForeground:Gd,inputBorder:"var(--border)",inputOutlineFocus:Yd,formBorderRadius:"20px",formContentBorderRadius:"6px"},Jd=Vd,Kd={...Vd,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},Xd="widget",Zd="api";async function Qd({feedback:{message:t,email:e,name:n,source:r,url:s}},{includeReplay:o=!0}={}){const i=Pe(),a=i&&i.getTransport(),c=i&&i.getDsn();if(!i||!a||!c)return;const u={contexts:{feedback:{contact_email:e,name:n,message:t,url:s,source:r}},type:"feedback"};return Re((async t=>{t.clearBreadcrumbs(),[Zd,Xd].includes(String(r))&&t.setLevel("info");const e=await async function({client:t,scope:e,event:n}){const r={};t.emit&&t.emit("preprocessEvent",n,r);const s=await fe(t.getOptions(),n,r,e,t,Qt());return null===s?(t.recordDroppedEvent("event_processor","feedback",n),null):(s.platform=s.platform||"javascript",s)}({scope:t,client:i,event:u});if(!e)return;i.emit&&i.emit("beforeSendFeedback",e,{includeReplay:Boolean(o)});const n=Cr(e,c,i.getOptions()._metadata,i.getOptions().tunnel);let s;try{s=await a.send(n)}catch(t){const e=new Error("Unable to send Feedback");try{e.cause=t}catch(t){}throw e}if(s){if("number"==typeof s.statusCode&&(s.statusCode<200||s.statusCode>=300))throw new Error("Unable to send Feedback");return s}}))}function tp({name:t,email:e,message:n,source:r=Zd,url:s=C()},o={}){if(!n)throw new Error("Unable to submit feedback with empty message");return Qd({feedback:{name:t,email:e,message:n,url:s,source:r}},o)}const ep="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function np(t,e){return{...t,...e,themeDark:{...t.themeDark,...e.themeDark},themeLight:{...t.themeLight,...e.themeLight}}}function rp(t){return`\n  --background: ${t.background};\n  --background-hover: ${t.backgroundHover};\n  --foreground: ${t.foreground};\n  --error: ${t.error};\n  --success: ${t.success};\n  --border: ${t.border};\n  --border-radius: ${t.borderRadius};\n  --box-shadow: ${t.boxShadow};\n\n  --submit-background: ${t.submitBackground};\n  --submit-background-hover: ${t.submitBackgroundHover};\n  --submit-border: ${t.submitBorder};\n  --submit-outline-focus: ${t.submitOutlineFocus};\n  --submit-foreground: ${t.submitForeground};\n  --submit-foreground-hover: ${t.submitForegroundHover};\n\n  --cancel-background: ${t.cancelBackground};\n  --cancel-background-hover: ${t.cancelBackgroundHover};\n  --cancel-border: ${t.cancelBorder};\n  --cancel-outline-focus: ${t.cancelOutlineFocus};\n  --cancel-foreground: ${t.cancelForeground};\n  --cancel-foreground-hover: ${t.cancelForegroundHover};\n\n  --input-background: ${t.inputBackground};\n  --input-foreground: ${t.inputForeground};\n  --input-border: ${t.inputBorder};\n  --input-outline-focus: ${t.inputOutlineFocus};\n\n  --form-border-radius: ${t.formBorderRadius};\n  --form-content-border-radius: ${t.formContentBorderRadius};\n  `}function sp({id:t,colorScheme:e,themeDark:n,themeLight:r}){try{const s=qd.document,o=s.createElement("div");o.id=t;const i=o.attachShadow({mode:"open"});return i.appendChild(function(t,e,n){const r=t.createElement("style");return r.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${rp("dark"===e?n.dark:n.light)}\n}\n\n${"system"===e?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${rp(n.dark)}\n  }\n}`:""}\n}`,r}(s,e,{dark:n,light:r})),i.appendChild(function(t){const e=t.createElement("style");return e.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  color: var(--input-foreground);\n  opacity: 0.65;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",e}(s)),{shadow:i,host:o}}catch(t){throw N.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function op(t,e,n){if(!t)return;t.hideError();try{return await tp({...e,source:Xd},n)}catch(e){ep&&N.error(e),t&&t.showError("There was a problem submitting feedback, please wait and try again.")}}function ip(t,e){return Object.entries(e).forEach((([e,n])=>{t.setAttributeNS(null,e,n)})),t}const ap=20,cp="http://www.w3.org/2000/svg";function up(t,e,...n){const r=qd.document.createElement(t);e&&Object.entries(e).forEach((([t,e])=>{"className"===t&&"string"==typeof e?r.setAttribute("class",e):"boolean"==typeof e&&e?r.setAttribute(t,""):"string"==typeof e?r.setAttribute(t,e):t.startsWith("on")&&"function"==typeof e&&r.addEventListener(t.substring(2).toLowerCase(),e)}));for(const t of n)lp(r,t);return r}function lp(t,e){const n=qd.document;if(null!=e)if(Array.isArray(e))for(const n of e)lp(t,n);else!1===e||("string"==typeof e?t.appendChild(n.createTextNode(e)):e instanceof Node?t.appendChild(e):t.appendChild(n.createTextNode(String(e))))}function dp({buttonLabel:t,onClick:e}){const n=up("button",{type:"button",className:"widget__actor","aria-label":t,"aria-hidden":"false"},function(){const t=t=>qd.document.createElementNS(cp,t),e=ip(t("svg"),{class:"feedback-icon",width:`${ap}`,height:`${ap}`,viewBox:`0 0 ${ap} ${ap}`,fill:"none"}),n=ip(t("g"),{clipPath:"url(#clip0_57_80)"}),r=ip(t("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});e.appendChild(n).appendChild(r);const s=t("defs"),o=ip(t("clipPath"),{id:"clip0_57_80"}),i=ip(t("rect"),{width:`${ap}`,height:`${ap}`,fill:"white"});return o.appendChild(i),s.appendChild(o),e.appendChild(s).appendChild(o).appendChild(i),{get el(){return e}}}().el,t?up("span",{className:"widget__actor__text"},t):null);return n.addEventListener("click",(function(t){e&&e(t)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function pp(t,e){const n=t.get(e);return"string"==typeof n?n.trim():""}function hp({nameLabel:t,namePlaceholder:e,emailLabel:n,emailPlaceholder:r,messageLabel:s,messagePlaceholder:o,isRequiredLabel:i,cancelButtonLabel:a,submitButtonLabel:c,showName:u,showEmail:l,isNameRequired:d,isEmailRequired:p,defaultName:h,defaultEmail:f,onCancel:m,onSubmit:g}){const{el:y}=function({label:t}){return{el:up("button",{type:"submit",className:"btn btn--primary","aria-label":t},t)}}({label:c});const _=up("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const v=up("input",{id:"name",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"name",required:d,className:"form__input",placeholder:e,value:h}),b=up("input",{id:"email",type:l?"text":"hidden","aria-hidden":l?"false":"true",name:"email",required:p,className:"form__input",placeholder:r,value:f}),S=up("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:o}),k=up("button",{type:"button",className:"btn btn--default","aria-label":a,onClick:t=>{m&&m(t)}},a),w=up("form",{className:"form",onSubmit:function(t){if(t.preventDefault(),t.target instanceof HTMLFormElement)try{if(g){const e=new FormData(t.target),n={name:pp(e,"name"),email:pp(e,"email"),message:pp(e,"message")};g(n)}}catch(t){}}},[_,u&&up("label",{htmlFor:"name",className:"form__label"},[up("span",{className:"form__label__text"},t,d&&up("span",{className:"form__label__text--required"},` ${i}`)),v]),!u&&v,l&&up("label",{htmlFor:"email",className:"form__label"},[up("span",{className:"form__label__text"},n,p&&up("span",{className:"form__label__text--required"},` ${i}`)),b]),!l&&b,up("label",{htmlFor:"message",className:"form__label"},[up("span",{className:"form__label__text"},s,up("span",{className:"form__label__text--required"},` ${i}`)),S]),up("div",{className:"btn-group"},[y,k])]);return{get el(){return w},showError:function(t){_.textContent=t,_.classList.remove("form__error-container--hidden"),_.setAttribute("aria-hidden","false")},hideError:function(){_.textContent="",_.classList.add("form__error-container--hidden"),_.setAttribute("aria-hidden","true")}}}const fp="http://www.w3.org/2000/svg";function mp({formTitle:t,showBranding:e,showName:n,showEmail:r,isNameRequired:s,isEmailRequired:o,colorScheme:i,defaultName:a,defaultEmail:c,onClosed:u,onCancel:l,onSubmit:d,...p}){let h=null;function f(){h&&(h.open=!1)}const{el:m,showError:g,hideError:y}=hp({showEmail:r,showName:n,isEmailRequired:o,isNameRequired:s,defaultName:a,defaultEmail:c,onSubmit:d,onCancel:l,...p});return h=up("dialog",{className:"dialog",open:!0,onClick:function(){f(),u&&u()}},up("div",{className:"dialog__content",onClick:t=>{t.stopPropagation()}},up("h2",{className:"dialog__header"},t,e&&up("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:t}){const e=t=>qd.document.createElementNS(fp,t),n=ip(e("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=ip(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const s=e("defs"),o=e("style");return o.textContent=`\n    path {\n      fill: ${"dark"===t?"#fff":"#362d59"};\n    }`,"system"===t&&(o.textContent+="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),s.append(o),n.append(s),{get el(){return n}}}({colorScheme:i}).el)),m)),{get el(){return h},showError:g,hideError:y,open:function(){h&&(h.open=!0)},close:f,checkIsOpen:function(){return h&&!0===h.open||!1}}}const gp=16,yp=17,_p="http://www.w3.org/2000/svg";function vp({message:t,onRemove:e}){function n(){r&&(r.remove(),e&&e())}const r=up("div",{className:"success-message",onClick:n},function(){const t=t=>qd.document.createElementNS(_p,t),e=ip(t("svg"),{class:"success-icon",width:`${gp}`,height:`${yp}`,viewBox:`0 0 ${gp} ${yp}`,fill:"none"}),n=ip(t("g"),{clipPath:"url(#clip0_57_156)"}),r=ip(t("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=ip(t("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});e.appendChild(n).append(s,r);const o=t("defs"),i=ip(t("clipPath"),{id:"clip0_57_156"}),a=ip(t("rect"),{width:`${gp}`,height:`${gp}`,fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),o.appendChild(i),e.appendChild(o).appendChild(i).appendChild(a),{get el(){return e}}}().el,t);return{el:r,remove:n}}function bp({shadow:t,options:{shouldCreateActor:e=!0,...n},attachTo:r}){let s,o,i=!1;async function a(e){if(!o)return;const r=[];if(n.isNameRequired&&!e.name&&r.push(n.nameLabel),n.isEmailRequired&&!e.email&&r.push(n.emailLabel),e.message||r.push(n.messageLabel),r.length>0)return void o.showError(`Please enter in the following required fields: ${r.join(", ")}`);await op(o,e)?(h(),function(){if(t)try{const e=vp({message:n.successMessageText,onRemove:()=>{r&&clearTimeout(r),u()}});if(!e.el)throw new Error("Unable to show success message");t.appendChild(e.el);const r=setTimeout((()=>{e&&e.remove()}),5e3)}catch(t){N.error(t)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function c(){const t=Pe(),e=t&&t.getIntegrationByName&&t.getIntegrationByName("Replay");e&&e.flush().catch((t=>{ep&&N.error(t)}))}function u(){s&&s.show()}function l(){s&&s.hide()}function d(){try{if(o)return o.open(),i=!0,n.onFormOpen&&n.onFormOpen(),void c();const e=n.useSentryUser,r=Fe(),s=r&&r.getUser();if(o=mp({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,isRequiredLabel:n.isRequiredLabel,defaultName:e&&s&&s[e.name]||"",defaultEmail:e&&s&&s[e.email]||"",onClosed:()=>{u(),i=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{p(),u()},onSubmit:a}),!o.el)throw new Error("Unable to open Feedback dialog");t.appendChild(o.el),l(),n.onFormOpen&&n.onFormOpen(),c()}catch(t){N.error(t)}}function p(){o&&(o.close(),i=!1,n.onFormClose&&n.onFormClose())}function h(){if(o){p();const t=o.el;t&&t.remove(),o=void 0}}function f(){i||d(),l()}return r?r.addEventListener("click",f):e&&(s=dp({buttonLabel:n.buttonLabel,onClick:f}),s.el&&t.appendChild(s.el)),{get actor(){return s},get dialog(){return o},showActor:u,hideActor:l,removeActor:function(){s&&s.el&&s.el.remove()},openDialog:d,closeDialog:p,removeDialog:h}}const Sp=qd.document,kp=t=>new wp(t);class wp{static __initStatic(){this.id="Feedback"}constructor({autoInject:t=!0,id:e="sentry-feedback",isEmailRequired:n=!1,isNameRequired:r=!1,showBranding:s=!0,showEmail:o=!0,showName:i=!0,useSentryUser:a={email:"email",name:"username"},themeDark:c,themeLight:u,colorScheme:l="system",buttonLabel:d="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:h="Send Bug Report",formTitle:f="Report a Bug",emailPlaceholder:m="your.email@example.org",emailLabel:g="Email",messagePlaceholder:y="What's the bug? What did you expect?",messageLabel:_="Description",namePlaceholder:v="Your Name",nameLabel:b="Name",isRequiredLabel:S="(required)",successMessageText:k="Thank you for your report!",onFormClose:w,onFormOpen:x,onSubmitError:T,onSubmitSuccess:E}={}){this.name=wp.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:t,showBranding:s,id:e,isEmailRequired:n,isNameRequired:r,showEmail:o,showName:i,useSentryUser:a,colorScheme:l,themeDark:{...Kd,...c},themeLight:{...Jd,...u},buttonLabel:d,cancelButtonLabel:p,submitButtonLabel:h,formTitle:f,emailLabel:g,emailPlaceholder:m,messageLabel:_,messagePlaceholder:y,nameLabel:b,namePlaceholder:v,isRequiredLabel:S,successMessageText:k,onFormClose:w,onFormOpen:x,onSubmitError:T,onSubmitSuccess:E}}setupOnce(){if(wi())try{this._cleanupWidgetIfExists();const{autoInject:t}=this.options;if(!t)return;this._createWidget(this.options)}catch(t){ep&&N.error(t)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(t,e){try{const n=np(this.options,e||{});return this._ensureShadowHost(n,(({shadow:e})=>{const r="string"==typeof t?Sp.querySelector(t):"function"==typeof t.addEventListener?t:null;if(!r)return ep&&N.error("[Feedback] Unable to attach to target element"),null;const s=bp({shadow:e,options:n,attachTo:r});return this._widgets.add(s),this._widget||(this._widget=s),s}))}catch(t){return ep&&N.error(t),null}}createWidget(t){try{return this._createWidget(np(this.options,t||{}))}catch(t){return ep&&N.error(t),null}}removeWidget(t){if(!t)return!1;try{if(this._widgets.has(t))return t.removeActor(),t.removeDialog(),this._widgets.delete(t),this._widget===t&&(this._widget=null),!0}catch(t){ep&&N.error(t)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const t=Sp.querySelector(`#${this.options.id}`);t&&t.remove()}_createWidget(t){return this._ensureShadowHost(t,(({shadow:e})=>{const n=bp({shadow:e,options:t});return!this._hasInsertedActorStyles&&n.actor&&(e.appendChild(function(t){const e=t.createElement("style");return e.textContent="\n.widget__actor {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  line-height: 16px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  padding: 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n@media (max-width: 600px) {\n  .widget__actor__text {\n    display: none;\n  }\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",e}(Sp)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(t,e){let n=!1;if(!this._shadow||!this._host){const{id:e,colorScheme:r,themeLight:s,themeDark:o}=t,{shadow:i,host:a}=sp({id:e,colorScheme:r,themeLight:s,themeDark:o});this._shadow=i,this._host=a,n=!0}this._host.dataset.sentryFeedbackColorscheme=t.colorScheme;const r=e({shadow:this._shadow,host:this._host});return n&&Sp.body.appendChild(this._host),r}}wp.__initStatic();const xp="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Tp="HttpClient",Ep=(t={})=>{const e={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...t};return{name:Tp,setupOnce(){},setup(t){!function(t,e){if(!Bs())return;Co((n=>{if(Pe()!==t)return;const{response:r,args:s}=n,[o,i]=s;r&&function(t,e,n,r){if(Rp(t,n.status,n.url)){const t=function(t,e){if(!e&&t instanceof Request)return t;if(t instanceof Request&&t.bodyUsed)return t;return new Request(t,e)}(e,r);let s,o,i,a;Op()&&([{headers:s,cookies:i},{headers:o,cookies:a}]=[{cookieHeader:"Cookie",obj:t},{cookieHeader:"Set-Cookie",obj:n}].map((({cookieHeader:t,obj:e})=>{const n=function(t){const e={};return t.forEach(((t,n)=>{e[n]=t})),e}(e.headers);let r;try{const e=n[t]||n[t.toLowerCase()]||void 0;e&&(r=Ip(e))}catch(e){xp&&N.log(`Could not extract cookies from header ${t}`)}return{headers:n,cookies:r}})));be(Mp({url:t.url,method:t.method,status:n.status,requestHeaders:s,responseHeaders:o,requestCookies:i,responseCookies:a}))}}(e,o,r,i)}))}(t,e),function(t,e){if(!("XMLHttpRequest"in b))return;To((n=>{if(Pe()!==t)return;const r=n.xhr,s=r[xo];if(!s)return;const{method:o,request_headers:i}=s;try{!function(t,e,n,r){if(Rp(t,e.status,e.responseURL)){let t,s,o;if(Op()){try{const t=e.getResponseHeader("Set-Cookie")||e.getResponseHeader("set-cookie")||void 0;t&&(s=Ip(t))}catch(t){xp&&N.log("Could not extract cookies from response headers")}try{o=function(t){const e=t.getAllResponseHeaders();if(!e)return{};return e.split("\r\n").reduce(((t,e)=>{const[n,r]=e.split(": ");return t[n]=r,t}),{})}(e)}catch(t){xp&&N.log("Could not extract headers from response")}t=r}be(Mp({url:e.responseURL,method:n,status:e.status,requestHeaders:t,responseHeaders:o,responseCookies:s}))}}(e,r,o,i)}catch(t){xp&&N.warn("Error while extracting response event form XHR response",t)}}))}(t,e)}}};Ve(Tp,Ep);function Cp(t){if(t){const e=t["Content-Length"]||t["content-length"];if(e)return parseInt(e,10)}}function Ip(t){return t.split("; ").reduce(((t,e)=>{const[n,r]=e.split("=");return t[n]=r,t}),{})}function Rp(t,e,n){return function(t,e){return t.some((t=>"number"==typeof t?t===e:e>=t[0]&&e<=t[1]))}(t.failedRequestStatusCodes,e)&&(r=t.failedRequestTargets,s=n,r.some((t=>"string"==typeof t?s.includes(t):t.test(s))))&&!bi(n,Pe());var r,s}function Mp(t){const e=`HTTP Client Error with status code: ${t.status}`,n={message:e,exception:{values:[{type:"Error",value:e}]},request:{url:t.url,method:t.method,headers:t.requestHeaders,cookies:t.requestCookies},contexts:{response:{status_code:t.status,headers:t.responseHeaders,cookies:t.responseCookies,body_size:Cp(t.responseHeaders)}}};return et(n,{type:"http.client",handled:!1}),n}function Op(){const t=Pe();return!!t&&Boolean(t.getOptions().sendDefaultPii)}const Ap="CaptureConsole",Dp=(t={})=>{const e=t.levels||O;return{name:Ap,setupOnce(){},setup(t){"console"in b&&ho((({args:n,level:r})=>{Pe()===t&&e.includes(r)&&function(t,e){const n={level:Ao(e),extra:{arguments:t}};Re((r=>{if(r.addEventProcessor((t=>(t.logger="console",et(t,{handled:!1,type:"console"}),t))),"assert"===e&&!1===t[0]){const e=`Assertion failed: ${$(t.slice(1)," ")||"console.assert"}`;return r.setExtra("arguments",t.slice(1)),void ve(e,n)}const s=t.find((t=>t instanceof Error));if("error"===e&&s)return void _e(s,n);ve($(t," "),n)}))}(n,r)}))}}};Ve(Ap,Dp);const Np=b,Lp="ContextLines",Pp=(t={})=>{const e=null!=t.frameContextLines?t.frameContextLines:7;return{name:Lp,setupOnce(){},processEvent(t){return function(t,e){const n=Np.document,r=Np.location&&(s=Np.location.href,s.split(/[\?#]/,1)[0]);var s;if(!n||!r)return t;const o=t.exception&&t.exception.values;if(!o||!o.length)return t;const i=n.documentElement.innerHTML;if(!i)return t;const a=["<!DOCTYPE html>","<html>",...i.split("\n"),"</html>"];return o.forEach((t=>{const n=t.stacktrace;n&&n.frames&&(n.frames=n.frames.map((t=>function(t,e,n,r){if(t.filename!==n||!t.lineno||!e.length)return t;return function(t,e,n=5){if(void 0===e.lineno)return;const r=t.length,s=Math.max(Math.min(r-1,e.lineno-1),0);e.pre_context=t.slice(Math.max(0,s-n),s).map((t=>P(t,0))),e.context_line=P(t[Math.min(r-1,s)],e.colno||0),e.post_context=t.slice(Math.min(s+1,r),s+1+n).map((t=>P(t,0)))}(e,t,r),t}(t,a,r,e))))})),t}(t,e)}}};Ve(Lp,Pp);const $p="Debug",Fp=(t={})=>{const e={debugger:!1,stringify:!1,...t};return{name:$p,setupOnce(){},setup(t){t.on&&t.on("beforeSendEvent",((t,n)=>{e.debugger,D((()=>{e.stringify?(console.log(JSON.stringify(t,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(t),n&&Object.keys(n).length&&console.log(n))}))}))}}},Bp=(Ve($p,Fp),"Dedupe"),jp=()=>{let t;return{name:Bp,setupOnce(){},processEvent(e){if(e.type)return e;try{if(function(t,e){if(!e)return!1;if(function(t,e){const n=t.message,r=e.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Hp(t,e))return!1;if(!Up(t,e))return!1;return!0}(t,e))return!0;if(function(t,e){const n=zp(e),r=zp(t);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Hp(t,e))return!1;if(!Up(t,e))return!1;return!0}(t,e))return!0;return!1}(e,t))return xp&&N.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){}return t=e}}};Ve(Bp,jp);function Up(t,e){let n=qp(t),r=qp(e);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let t=0;t<r.length;t++){const e=r[t],s=n[t];if(e.filename!==s.filename||e.lineno!==s.lineno||e.colno!==s.colno||e.function!==s.function)return!1}return!0}function Hp(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(t){return!1}}function zp(t){return t.exception&&t.exception.values&&t.exception.values[0]}function qp(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(t){return}}const Wp="ExtraErrorData",Gp=(t={})=>{const e=t.depth||3,n=t.captureErrorCause||!1;return{name:Wp,setupOnce(){},processEvent(t,r){return function(t,e={},n,r){if(!e.originalException||!i(e.originalException))return t;const s=e.originalException.name||e.originalException.constructor.name,o=function(t,e){try{const n=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],r={};for(const e of Object.keys(t)){if(-1!==n.indexOf(e))continue;const s=t[e];r[e]=i(s)?s.toString():s}if(e&&void 0!==t.cause&&(r.cause=i(t.cause)?t.cause.toString():t.cause),"function"==typeof t.toJSON){const e=t.toJSON();for(const t of Object.keys(e)){const n=e[t];r[t]=i(n)?n.toString():n}}return r}catch(t){xp&&N.error("Unable to extract extra data from the Error object:",t)}return null}(e.originalException,r);if(o){const e={...t.contexts},r=de(o,n);return h(r)&&(U(r,"__sentry_skip_normalization__",!0),e[s]=r),{...t,contexts:e}}return t}(t,r,e,n)}}};Ve(Wp,Gp);const Yp=b,Vp="ReportingObserver",Jp=new WeakMap,Kp=(t={})=>{const e=t.types||["crash","deprecation","intervention"];function n(t){if(Jp.has(Pe()))for(const e of t)Re((t=>{t.setExtra("url",e.url);const n=`ReportingObserver [${e.type}]`;let r="No details available";if(e.body){const n={};for(const t in e.body)n[t]=e.body[t];if(t.setExtra("body",n),"crash"===e.type){const t=e.body;r=[t.crashId||"",t.reason||""].join(" ").trim()||r}else{r=e.body.message||r}}ve(`${n}: ${r}`)}))}return{name:Vp,setupOnce(){if(!("ReportingObserver"in Ps))return;new Yp.ReportingObserver(n,{buffered:!0,types:e}).observe()},setup(t){Jp.set(t,!0)}}};Ve(Vp,Kp);function Xp(t,e){let n=0;for(let e=t.length-1;e>=0;e--){const r=t[e];"."===r?t.splice(e,1):".."===r?(t.splice(e,1),n++):n&&(t.splice(e,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}const Zp=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Qp(t){const e=t.length>1024?`<truncated>${t.slice(-1024)}`:t,n=Zp.exec(e);return n?n.slice(1):[]}function th(...t){let e="",n=!1;for(let r=t.length-1;r>=-1&&!n;r--){const s=r>=0?t[r]:"/";s&&(e=`${s}/${e}`,n="/"===s.charAt(0))}return e=Xp(e.split("/").filter((t=>!!t)),!n).join("/"),(n?"/":"")+e||"."}function eh(t){let e=0;for(;e<t.length&&""===t[e];e++);let n=t.length-1;for(;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}const nh="RewriteFrames",rh=(t={})=>{const e=t.root,n=t.prefix||"app:///",r=t.iteratee||(t=>{if(!t.filename)return t;const r=/^[a-zA-Z]:\\/.test(t.filename)||t.filename.includes("\\")&&!t.filename.includes("/"),s=/^\//.test(t.filename);if(r||s){const s=r?t.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):t.filename,o=e?function(t,e){t=th(t).slice(1),e=th(e).slice(1);const n=eh(t.split("/")),r=eh(e.split("/")),s=Math.min(n.length,r.length);let o=s;for(let t=0;t<s;t++)if(n[t]!==r[t]){o=t;break}let i=[];for(let t=o;t<n.length;t++)i.push("..");return i=i.concat(r.slice(o)),i.join("/")}(e,s):function(t,e){let n=Qp(t)[2];return e&&n.slice(-1*e.length)===e&&(n=n.slice(0,n.length-e.length)),n}(s);t.filename=`${n}${o}`}return t});return{name:nh,setupOnce(){},processEvent(t){let e=t;return t.exception&&Array.isArray(t.exception.values)&&(e=function(t){try{return{...t,exception:{...t.exception,values:t.exception.values.map((t=>{return{...t,...t.stacktrace&&{stacktrace:(e=t.stacktrace,{...e,frames:e&&e.frames&&e.frames.map((t=>r(t)))})}};var e}))}}}catch(e){return t}}(e)),e}}},sh=(Ve(nh,rh),"SessionTiming"),oh=()=>{const t=Date.now();return{name:sh,setupOnce(){},processEvent(e){const n=Date.now();return{...e,extra:{...e.extra,"session:start":t,"session:duration":n-t,"session:end":n}}}}};Ve(sh,oh);function ih(t,e,n,r,s="auto.http.browser"){if(!yn()||!t.fetchData)return;const o=e(t.fetchData.url);if(t.endTimestamp&&o){const e=t.fetchData.__span;if(!e)return;const n=r[e];return void(n&&(!function(t,e){if(e.response){On(t,e.response.status);const n=e.response&&e.response.headers&&e.response.headers.get("content-length");if(n){const e=parseInt(n);e>0&&t.setAttribute("http.response_content_length",e)}}else e.error&&t.setStatus("internal_error");t.end()}(n,t),delete r[e]))}const i=Fe(),a=Pe(),{method:c,url:u}=t.fetchData,l=function(t){try{return new URL(t).href}catch(t){return}}(u),d=l?Do(l).host:void 0,p=o?Sn({name:`${c} ${u}`,onlyIfParent:!0,attributes:{url:u,type:"fetch","http.method":c,"http.url":l,"server.address":d,[Wr]:s},op:"http.client"}):void 0;if(p&&(t.fetchData.__span=p.spanContext().spanId,r[p.spanContext().spanId]=p),n(t.fetchData.url)&&a){const e=t.args[0];t.args[1]=t.args[1]||{};const n=t.args[1];n.headers=function(t,e,n,r,s){const o=s||n.getSpan(),i=Qt(),{traceId:a,spanId:c,sampled:u,dsc:l}={...i.getPropagationContext(),...n.getPropagationContext()},d=o?Dt(o):Mt(a,c,u),p=Tt(l||(o?Bt(o):Ft(a,e,n))),h=r.headers||("undefined"!=typeof Request&&y(t,Request)?t.headers:void 0);if(h){if("undefined"!=typeof Headers&&y(h,Headers)){const t=new Headers(h);return t.append("sentry-trace",d),p&&t.append(bt,p),t}if(Array.isArray(h)){const t=[...h,["sentry-trace",d]];return p&&t.push([bt,p]),t}{const t="baggage"in h?h.baggage:void 0,e=[];return Array.isArray(t)?e.push(...t):t&&e.push(t),p&&e.push(p),{...h,"sentry-trace":d,baggage:e.length>0?e.join(","):void 0}}}return{"sentry-trace":d,baggage:p}}(e,a,i,n,p)}return p}const ah=["localhost",/^\/(?!\/)/],ch={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:ah,tracePropagationTargets:ah};function uh(t){const{traceFetch:e,traceXHR:n,tracePropagationTargets:r,tracingOrigins:s,shouldCreateSpanForRequest:o,enableHTTPTimings:i}={traceFetch:ch.traceFetch,traceXHR:ch.traceXHR,...t},a="function"==typeof o?o:t=>!0,c=t=>function(t,e){return B(t,e||ah)}(t,r||s),u={};e&&Co((t=>{const e=ih(t,a,c,u);if(e){const n=ph(t.fetchData.url),r=n?Do(n).host:void 0;e.setAttributes({"http.url":n,"server.address":r})}i&&e&&lh(e)})),n&&To((t=>{const e=function(t,e,n,r){const s=t.xhr,o=s&&s[xo];if(!yn()||!s||s.__sentry_own_request__||!o)return;const i=e(o.url);if(t.endTimestamp&&i){const t=s.__sentry_xhr_span_id__;if(!t)return;const e=r[t];return void(e&&void 0!==o.status_code&&(On(e,o.status_code),e.end(),delete r[t]))}const a=Fe(),c=Qt(),u=ph(o.url),l=u?Do(u).host:void 0,d=i?Sn({name:`${o.method} ${o.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":o.method,"http.url":u,url:o.url,"server.address":l,[Wr]:"auto.http.browser"},op:"http.client"}):void 0;d&&(s.__sentry_xhr_span_id__=d.spanContext().spanId,r[s.__sentry_xhr_span_id__]=d);const p=Pe();if(s.setRequestHeader&&n(o.url)&&p){const{traceId:t,spanId:e,sampled:n,dsc:r}={...c.getPropagationContext(),...a.getPropagationContext()};!function(t,e,n){try{t.setRequestHeader("sentry-trace",e),n&&t.setRequestHeader(bt,n)}catch(t){}}(s,d?Dt(d):Mt(t,e,n),Tt(r||(d?Bt(d):Ft(t,p,a))))}return d}(t,a,c,u);i&&e&&lh(e)}))}function lh(t){const{url:e}=Pt(t).data||{};if(!e||"string"!=typeof e)return;const n=oa("resource",(({entries:r})=>{r.forEach((r=>{if(function(t){return"resource"===t.entryType&&"initiatorType"in t&&"string"==typeof t.nextHopProtocol&&("fetch"===t.initiatorType||"xmlhttprequest"===t.initiatorType)}(r)&&r.name.endsWith(e)){(function(t){const{name:e,version:n}=function(t){let e="unknown",n="unknown",r="";for(const s of t){if("/"===s){[e,n]=t.split("/");break}if(!isNaN(Number(s))){e="h"===r?"http":r,n=t.split(r)[1];break}r+=s}r===t&&(e=r);return{name:e,version:n}}(t.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",e]),!ct)return r;return[...r,["http.request.redirect_start",dh(t.redirectStart)],["http.request.fetch_start",dh(t.fetchStart)],["http.request.domain_lookup_start",dh(t.domainLookupStart)],["http.request.domain_lookup_end",dh(t.domainLookupEnd)],["http.request.connect_start",dh(t.connectStart)],["http.request.secure_connection_start",dh(t.secureConnectionStart)],["http.request.connection_end",dh(t.connectEnd)],["http.request.request_start",dh(t.requestStart)],["http.request.response_start",dh(t.responseStart)],["http.request.response_end",dh(t.responseEnd)]]})(r).forEach((e=>t.setAttribute(...e))),setTimeout(n)}}))}))}function dh(t=0){return((ct||performance.timeOrigin)+t)/1e3}function ph(t){try{return new URL(t,Ei.location.origin).href}catch(t){return}}function hh(){Ei.document?Ei.document.addEventListener("visibilitychange",(()=>{const t=An();if(Ei.document.hidden&&t){const e="cancelled",{op:n,status:r}=Pt(t);xi&&N.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),r||t.setStatus(e),t.setTag("visibilitychange","document.hidden"),t.end()}})):xi&&N.warn("[Tracing] Could not set up background tab detection due to lack of global document")}function fh(t){return[{type:"span"},t]}function mh(t){return"number"==typeof t&&isFinite(t)}function gh(t,{startTimestamp:e,...n}){return e&&t.startTimestamp>e&&(t.startTimestamp=e),t.startChild({startTimestamp:e,...n})}const yh=2147483647;function _h(t){return t/1e3}function vh(){return Ei&&Ei.addEventListener&&Ei.performance}let bh,Sh,kh=0,wh={};function xh(){const t=vh();if(t&&ct){t.mark&&Ei.performance.mark("sentry-tracing-init");const e=pa("fid",(({metric:t})=>{const e=t.entries[t.entries.length-1];if(!e)return;const n=_h(ct),r=_h(e.startTime);xi&&N.log("[Measurements] Adding FID"),wh.fid={value:t.value,unit:"millisecond"},wh["mark.fid"]={value:n+r,unit:"second"}}),ca,ta),n=function(t,e=!1){return pa("cls",t,aa,Qi,e)}((({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(xi&&N.log("[Measurements] Adding CLS"),wh.cls={value:t.value,unit:""},Sh=e)}),!0),r=sa((({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(xi&&N.log("[Measurements] Adding LCP"),wh.lcp={value:t.value,unit:"millisecond"},bh=e)}),!0),s=function(t){return pa("ttfb",t,la,na)}((({metric:t})=>{t.entries[t.entries.length-1]&&(xi&&N.log("[Measurements] Adding TTFB"),wh.ttfb={value:t.value,unit:"millisecond"})}));return()=>{e(),n(),r(),s()}}return()=>{}}function Th(){oa("longtask",(({entries:t})=>{for(const e of t){const t=An();if(!t)return;const n=_h(ct+e.startTime),r=_h(e.duration);t.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}}))}function Eh(){oa("event",(({entries:t})=>{for(const e of t){const t=An();if(!t)return;if("click"===e.name){const n=_h(ct+e.startTime),r=_h(e.duration),s={description:T(e.target),op:`ui.interaction.${e.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},o=R(e.target);o&&(s.attributes={"ui.component_name":o}),t.startChild(s)}}}))}function Ch(t,e){if(vh()&&ct){const n=function(t,e){return n=({metric:n})=>{if(void 0===n.value)return;const r=n.entries.find((t=>t.duration===n.value&&void 0!==Ih[t.name])),s=Pe();if(!r||!s)return;const o=Ih[r.name],i=s.getOptions(),a=_h(ct+r.startTime),c=_h(n.value),u=void 0!==r.interactionId?t[r.interactionId]:void 0;if(void 0===u)return;const{routeName:l,parentContext:d,activeTransaction:p,user:h,replayId:f}=u,m=void 0!==h?h.email||h.id||h.ip_address:void 0,g=void 0!==p?p.getProfileId():void 0,y=new is({startTimestamp:a,endTimestamp:a+c,op:`ui.interaction.${o}`,name:T(r.target),attributes:{release:i.release,environment:i.environment,transaction:l,...void 0!==m&&""!==m?{user:m}:{},...void 0!==g?{profile_id:g}:{},...void 0!==f?{replay_id:f}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),_=function(t,e,n){if(!yn(e))return!1;let r;return r=void 0!==t&&"function"==typeof e.tracesSampler?e.tracesSampler({transactionContext:t,name:t.name,parentSampled:t.parentSampled,attributes:{...t.data,...t.attributes},location:Ei.location}):void 0!==t&&void 0!==t.sampled?t.sampled:void 0!==e.tracesSampleRate?e.tracesSampleRate:1,hs(r)?!0===r?n:!1===r?0:r*n:(xi&&N.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(d,i,e);if(_&&Math.random()<_){const t=y?function(t,e){const n={sent_at:(new Date).toISOString()};return e&&(n.dsn=Fn(e)),Hn(n,t.map(fh))}([y],s.getDsn()):void 0,e=s&&s.getTransport();e&&t&&e.send(t).then(null,(t=>{xi&&N.error("Error while sending interaction:",t)}))}},pa("inp",n,da,ra);var n}(t,e);return()=>{n()}}return()=>{}}const Ih={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Rh(t){const e=vh();if(!e||!Ei.performance.getEntries||!ct)return;xi&&N.log("[Tracing] Adding & adjusting spans using Performance API");const n=_h(ct),r=e.getEntries(),{op:s,start_timestamp:o}=Pt(t);if(r.slice(kh).forEach((e=>{const r=_h(e.startTime),s=_h(e.duration);if(!("navigation"===t.op&&o&&n+r<o))switch(e.entryType){case"navigation":!function(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{Mh(t,e,r,n)})),Mh(t,e,"secureConnection",n,"TLS/SSL","connectEnd"),Mh(t,e,"fetch",n,"cache","domainLookupStart"),Mh(t,e,"domainLookup",n,"DNS"),function(t,e,n){e.responseEnd&&(gh(t,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+_h(e.requestStart),endTimestamp:n+_h(e.responseEnd)}),gh(t,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+_h(e.responseStart),endTimestamp:n+_h(e.responseEnd)}))}(t,e,n)}(t,e,n);break;case"mark":case"paint":case"measure":{!function(t,e,n,r,s){const o=s+n,i=o+r;gh(t,{description:e.name,endTimestamp:i,op:e.entryType,origin:"auto.resource.browser.metrics",startTimestamp:o})}(t,e,r,s,n);const o=Ni(),i=e.startTime<o.firstHiddenTime;"first-paint"===e.name&&i&&(xi&&N.log("[Measurements] Adding FP"),wh.fp={value:e.startTime,unit:"millisecond"}),"first-contentful-paint"===e.name&&i&&(xi&&N.log("[Measurements] Adding FCP"),wh.fcp={value:e.startTime,unit:"millisecond"});break}case"resource":!function(t,e,n,r,s,o){if("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType)return;const i=Do(n),a={};Oh(a,e,"transferSize","http.response_transfer_size"),Oh(a,e,"encodedBodySize","http.response_content_length"),Oh(a,e,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in e&&(a["resource.render_blocking_status"]=e.renderBlockingStatus);i.protocol&&(a["url.scheme"]=i.protocol.split(":").pop());i.host&&(a["server.address"]=i.host);a["url.same_origin"]=n.includes(Ei.location.origin);const c=o+r,u=c+s;gh(t,{description:n.replace(Ei.location.origin,""),endTimestamp:u,op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:a})}(t,e,e.name,r,s,n)}})),kh=Math.max(r.length-1,0),function(t){const e=Ei.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),mh(n.rtt)&&(wh["connection.rtt"]={value:n.rtt,unit:"millisecond"}));mh(e.deviceMemory)&&t.setTag("deviceMemory",`${e.deviceMemory} GB`);mh(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}(t),"pageload"===s){!function(t){const e=Ci();if(!e)return;const{responseStart:n,requestStart:r}=e;r<=n&&(xi&&N.log("[Measurements] Adding TTFB Request Time"),t["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(wh),["fcp","fp","lcp"].forEach((t=>{if(!wh[t]||!o||n>=o)return;const e=wh[t].value,r=n+_h(e),s=Math.abs(1e3*(r-o)),i=s-e;xi&&N.log(`[Measurements] Normalized ${t} from ${e} to ${s} (${i})`),wh[t].value=s}));const e=wh["mark.fid"];e&&wh.fid&&(gh(t,{description:"first input delay",endTimestamp:e.value+_h(wh.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:e.value}),delete wh["mark.fid"]),"fcp"in wh||delete wh.cls,Object.keys(wh).forEach((t=>{Nn(t,wh[t].value,wh[t].unit)})),function(t){bh&&(xi&&N.log("[Measurements] Adding LCP Data"),bh.element&&t.setTag("lcp.element",T(bh.element)),bh.id&&t.setTag("lcp.id",bh.id),bh.url&&t.setTag("lcp.url",bh.url.trim().slice(0,200)),t.setTag("lcp.size",bh.size));Sh&&Sh.sources&&(xi&&N.log("[Measurements] Adding CLS Data"),Sh.sources.forEach(((e,n)=>t.setTag(`cls.source.${n+1}`,T(e.node)))))}(t)}bh=void 0,Sh=void 0,wh={}}function Mh(t,e,n,r,s,o){const i=o?e[o]:e[`${n}End`],a=e[`${n}Start`];a&&i&&gh(t,{op:"browser",origin:"auto.browser.browser.metrics",description:s||n,startTimestamp:r+_h(a),endTimestamp:r+_h(i)})}function Oh(t,e,n,r){const s=e[n];null!=s&&s<yh&&(t[r]=s)}const Ah={...cs,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...ch},Dh=(t={})=>{const e=!!xi&&!(!t.tracePropagationTargets&&!t.tracingOrigins);ys(),!t.tracePropagationTargets&&t.tracingOrigins&&(t.tracePropagationTargets=t.tracingOrigins);const n={...Ah,...t},r=xh(),s={};n.enableInp&&Ch(s,n.interactionsSampleRate),n.enableLongTask&&Th(),n._experiments.enableInteractions&&Eh();const o={name:void 0,context:void 0};function i(t){const e=Zt(),{beforeStartSpan:s,idleTimeout:i,finalTimeout:a,heartbeatInterval:c}=n,u="pageload"===t.op;let l;if(u){const e=u?Ph("sentry-trace"):"",n=u?Ph("baggage"):void 0,{traceId:r,dsc:s,parentSpanId:o,sampled:i}=Rt(e,n);l={traceId:r,parentSpanId:o,parentSampled:i,...t,metadata:{...t.metadata,dynamicSamplingContext:s},trimEnd:!0}}else l={trimEnd:!0,...t};const d=s?s(l):l;d.metadata=d.name!==l.name?{...d.metadata,source:"custom"}:d.metadata,o.name=d.name,o.context=d,!1===d.sampled&&xi&&N.log(`[Tracing] Will not send ${d.op} transaction because of beforeNavigate.`),xi&&N.log(`[Tracing] Starting ${d.op} transaction on scope`);const{location:p}=Ei,h=gs(e,d,i,a,!0,{location:p},c,u);return u&&Ei.document&&(Ei.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(Ei.document.readyState)&&h.sendAutoFinishSignal()})),["interactive","complete"].includes(Ei.document.readyState)&&h.sendAutoFinishSignal()),h.registerBeforeFinishCallback((t=>{r(),Rh(t)})),h}return{name:"BrowserTracing",setupOnce:()=>{},afterAllSetup(t){const r=t.getOptions(),{markBackgroundSpan:a,traceFetch:c,traceXHR:u,shouldCreateSpanForRequest:l,enableHTTPTimings:d,_experiments:p}=n,h=r&&r.tracePropagationTargets,f=h||n.tracePropagationTargets;let m;xi&&e&&h&&N.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let g=Ei.location&&Ei.location.href;if(t.on&&(t.on("startNavigationSpan",(t=>{m&&(xi&&N.log(`[Tracing] Finishing current transaction with op: ${Pt(m).op}`),m.end()),m=i({op:"navigation",...t})})),t.on("startPageLoadSpan",(t=>{m&&(xi&&N.log(`[Tracing] Finishing current transaction with op: ${Pt(m).op}`),m.end()),m=i({op:"pageload",...t})}))),n.instrumentPageLoad&&t.emit&&Ei.location){const e={name:Ei.location.pathname,startTimestamp:ct?ct/1e3:void 0,origin:"auto.pageload.browser",attributes:{[Hr]:"url"}};Nh(t,e)}n.instrumentNavigation&&t.emit&&Ei.location&&lo((({to:e,from:n})=>{if(void 0===n&&g&&-1!==g.indexOf(e))g=void 0;else if(n!==e){g=void 0;const e={name:Ei.location.pathname,origin:"auto.navigation.browser",attributes:{[Hr]:"url"}};Lh(t,e)}})),a&&hh(),p.enableInteractions&&function(t,e){let n;const r=()=>{const{idleTimeout:r,finalTimeout:s,heartbeatInterval:o}=t,i="ui.action.click",a=An();if(a&&a.op&&["navigation","pageload"].includes(a.op))return void(xi&&N.warn(`[Tracing] Did not create ${i} transaction because a pageload or navigation transaction is in progress.`));if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!e.name)return void(xi&&N.warn(`[Tracing] Did not create ${i} transaction because _latestRouteName is missing.`));const{location:c}=Ei,u={name:e.name,op:i,trimEnd:!0,data:{[Hr]:e.context?Fh(e.context):"url"}};n=gs(Zt(),u,r,s,!0,{location:c},o)};["click"].forEach((t=>{Ei.document&&addEventListener(t,r,{once:!1,capture:!0})}))}(n,o),n.enableInp&&function(t,e){const n=({entries:n})=>{const r=Pe(),s=void 0!==r&&void 0!==r.getIntegrationByName?r.getIntegrationByName("Replay"):void 0,o=void 0!==s?s.getReplayId():void 0,i=An(),a=Fe(),c=void 0!==a?a.getUser():void 0;n.forEach((n=>{if(function(t){return"duration"in t}(n)){const r=n.interactionId;if(void 0===r)return;const s=t[r],a=n.duration,u=n.startTime,l=Object.keys(t),d=l.length>0?l.reduce(((e,n)=>t[e].duration<t[n].duration?e:n)):void 0;if("first-input"===n.entryType){if(l.map((e=>t[e])).some((t=>t.duration===a&&t.startTime===u)))return}if(!r)return;if(s)s.duration=Math.max(s.duration,a);else if(l.length<$h||void 0===d||a>t[d].duration){const n=e.name,s=e.context;n&&s&&(d&&Object.keys(t).length>=$h&&delete t[d],t[r]={routeName:n,duration:a,parentContext:s,user:c,activeTransaction:i,replayId:o,startTime:u})}}}))};oa("event",n),oa("first-input",n)}(s,o),uh({traceFetch:c,traceXHR:u,tracePropagationTargets:f,shouldCreateSpanForRequest:l,enableHTTPTimings:d})},options:n}};function Nh(t,e){if(!t.emit)return;t.emit("startPageLoadSpan",e);const n=kn();return"pageload"===(n&&Pt(n).op)?n:void 0}function Lh(t,e){if(!t.emit)return;t.emit("startNavigationSpan",e);const n=kn();return"navigation"===(n&&Pt(n).op)?n:void 0}function Ph(t){const e=I(`meta[name=${t}]`);return e?e.getAttribute("content"):void 0}const $h=10;function Fh(t){const e=t.attributes&&t.attributes[Hr],n=t.data&&t.data[Hr],r=t.metadata&&t.metadata.source;return e||n||r}const Bh={...cs,markBackgroundTransactions:!0,routingInstrumentation:function(t,e=!0,n=!0){if(!Ei||!Ei.location)return void(xi&&N.warn("Could not initialize routing instrumentation due to invalid location"));let r,s=Ei.location.href;e&&(r=t({name:Ei.location.pathname,startTimestamp:ct?ct/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&lo((({to:e,from:n})=>{void 0===n&&s&&-1!==s.indexOf(e)?s=void 0:n!==e&&(s=void 0,r&&(xi&&N.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=t({name:Ei.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...ch};class jh{constructor(t){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,ys(),xi&&(this._hasSetTracePropagationTargets=!(!t||!t.tracePropagationTargets&&!t.tracingOrigins)),this.options={...Bh,...t},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),this._collectWebVitals=xh(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&Ch(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&Th(),this.options._experiments.enableInteractions&&Eh(),this._latestRoute={name:void 0,context:void 0}}setupOnce(t,e){this._getCurrentHub=e;const n=e().getClient(),r=n&&n.getOptions(),{routingInstrumentation:s,startTransactionOnLocationChange:o,startTransactionOnPageLoad:i,markBackgroundTransactions:a,traceFetch:c,traceXHR:u,shouldCreateSpanForRequest:l,enableHTTPTimings:d,_experiments:p}=this.options,h=r&&r.tracePropagationTargets,f=h||this.options.tracePropagationTargets;xi&&this._hasSetTracePropagationTargets&&h&&N.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),s((t=>{const n=this._createRouteTransaction(t);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,t,e),n}),i,o),a&&hh(),p.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),uh({traceFetch:c,traceXHR:u,tracePropagationTargets:f,shouldCreateSpanForRequest:l,enableHTTPTimings:d})}_createRouteTransaction(t){if(!this._getCurrentHub)return void(xi&&N.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`));const e=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:s,heartbeatInterval:o}=this.options,i="pageload"===t.op;let a;if(i){const e=i?Uh("sentry-trace"):"",n=i?Uh("baggage"):void 0,{traceId:r,dsc:s,parentSpanId:o,sampled:c}=Rt(e,n);a={traceId:r,parentSpanId:o,parentSampled:c,...t,metadata:{...t.metadata,dynamicSamplingContext:s},trimEnd:!0}}else a={trimEnd:!0,...t};const c="function"==typeof n?n(a):a,u=void 0===c?{...a,sampled:!1}:c;u.metadata=u.name!==a.name?{...u.metadata,source:"custom"}:u.metadata,this._latestRoute.name=u.name,this._latestRoute.context=u,!1===u.sampled&&xi&&N.log(`[Tracing] Will not send ${u.op} transaction because of beforeNavigate.`),xi&&N.log(`[Tracing] Starting ${u.op} transaction on scope`);const{location:l}=Ei,d=gs(e,u,r,s,!0,{location:l},o,i);return i&&Ei.document&&(Ei.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(Ei.document.readyState)&&d.sendAutoFinishSignal()})),["interactive","complete"].includes(Ei.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback((t=>{this._collectWebVitals(),Rh(t)})),d}_registerInteractionListener(){let t;const e=()=>{const{idleTimeout:e,finalTimeout:n,heartbeatInterval:r}=this.options,s="ui.action.click",o=An();if(o&&o.op&&["navigation","pageload"].includes(o.op))return void(xi&&N.warn(`[Tracing] Did not create ${s} transaction because a pageload or navigation transaction is in progress.`));if(t&&(t.setFinishReason("interactionInterrupted"),t.end(),t=void 0),!this._getCurrentHub)return void(xi&&N.warn(`[Tracing] Did not create ${s} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(xi&&N.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`));const i=this._getCurrentHub(),{location:a}=Ei,c={name:this._latestRoute.name,op:s,trimEnd:!0,data:{[Hr]:this._latestRoute.context?Hh(this._latestRoute.context):"url"}};t=gs(i,c,e,n,!0,{location:a},r)};["click"].forEach((t=>{Ei.document&&addEventListener(t,e,{once:!1,capture:!0})}))}_registerInpInteractionListener(){const t=({entries:t})=>{const e=Pe(),n=void 0!==e&&void 0!==e.getIntegrationByName?e.getIntegrationByName("Replay"):void 0,r=void 0!==n?n.getReplayId():void 0,s=An(),o=Fe(),i=void 0!==o?o.getUser():void 0;t.forEach((t=>{if(function(t){return"duration"in t}(t)){const e=t.interactionId;if(void 0===e)return;const n=this._interactionIdToRouteNameMapping[e],o=t.duration,a=t.startTime,c=Object.keys(this._interactionIdToRouteNameMapping),u=c.length>0?c.reduce(((t,e)=>this._interactionIdToRouteNameMapping[t].duration<this._interactionIdToRouteNameMapping[e].duration?t:e)):void 0;if("first-input"===t.entryType){if(c.map((t=>this._interactionIdToRouteNameMapping[t])).some((t=>t.duration===o&&t.startTime===a)))return}if(!e)return;if(n)n.duration=Math.max(n.duration,o);else if(c.length<10||void 0===u||o>this._interactionIdToRouteNameMapping[u].duration){const t=this._latestRoute.name,n=this._latestRoute.context;t&&n&&(u&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[u],this._interactionIdToRouteNameMapping[e]={routeName:t,duration:o,parentContext:n,user:i,activeTransaction:s,replayId:r,startTime:a})}}}))};oa("event",t),oa("first-input",t)}}function Uh(t){const e=I(`meta[name=${t}]`);return e?e.getAttribute("content"):void 0}function Hh(t){const e=t.attributes&&t.attributes[Hr],n=t.data&&t.data[Hr],r=t.metadata&&t.metadata.source;return e||n||r}const zh=100,qh=5e3,Wh=36e5;function Gh(t,e){K&&N.info(`[Offline]: ${t}`,e)}function Yh(t){return e=>{const n=t(e),r=e.createStore?e.createStore(e):void 0;let s,o=qh;function i(t,n,r){return s=["replay_event","replay_recording","client_report"],!qn(t,((t,e)=>s.includes(e)))&&(!e.shouldStore||e.shouldStore(t,n,r));var s}function a(t){r&&(s&&clearTimeout(s),s=setTimeout((async()=>{s=void 0;const t=await r.pop();t&&(Gh("Attempting to send previously queued event"),u(t).catch((t=>{Gh("Failed to retry sending",t)})))}),t),"number"!=typeof s&&s.unref&&s.unref())}function c(){s||(a(o),o=Math.min(2*o,Wh))}async function u(t){try{const e=await n.send(t);let r=zh;if(e)if(e.headers&&e.headers["retry-after"])r=Pr(e.headers["retry-after"]);else if((e.statusCode||0)>=400)return e;return a(r),o=qh,e}catch(e){if(r&&await i(t,e,o))return await r.insert(t),c(),Gh("Error sending. Event queued",e),{};throw e}}return e.flushAtStartup&&c(),{send:u,flush:t=>n.flush(t)}}}function Vh(t){return new Promise(((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)}))}function Jh(t){return Vh(t.getAllKeys())}function Kh(t){let e;function n(){return null==e&&(e=function(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=Vh(n);return t=>r.then((n=>t(n.transaction(e,"readwrite").objectStore(e))))}(t.dbName||"sentry-offline",t.storeName||"queue")),e}return{insert:async e=>{try{const r=await Gn(e,t.textEncoder);await function(t,e,n){return t((t=>Jh(t).then((r=>{if(!(r.length>=n))return t.put(e,Math.max(...r,0)+1),Vh(t.transaction)}))))}(n(),r,t.maxQueueSize||30)}catch(t){}},pop:async()=>{try{const e=await function(t){return t((t=>Jh(t).then((e=>{if(0!==e.length)return Vh(t.get(e[0])).then((n=>(t.delete(e[0]),Vh(t.transaction).then((()=>n)))))}))))}(n());if(e)return function(t,e,n){let r="string"==typeof t?e.encode(t):t;function s(t){const e=r.subarray(0,t);return r=r.subarray(t+1),e}function o(){let t=r.indexOf(10);return t<0&&(t=r.length),JSON.parse(n.decode(s(t)))}const i=o(),a=[];for(;r.length;){const t=o(),e="number"==typeof t.length?t.length:void 0;a.push([t,e?s(e):o()])}return[i,a]}(e,t.textEncoder||new TextEncoder,t.textDecoder||new TextDecoder)}catch(t){}}}}function Xh(t){return function(t){return e=>t({...e,createStore:Kh})}(Yh(t))}const Zh=1e6,Qh=String(0),tf="main";let ef="",nf="",rf="",sf=_s.navigator&&_s.navigator.userAgent||"",of="";const af=_s.navigator&&_s.navigator.language||_s.navigator&&_s.navigator.languages&&_s.navigator.languages[0]||"";const cf=_s.navigator&&_s.navigator.userAgentData;var uf;function lf(t){return function(t){return!("thread_metadata"in t)}(t)?function(t){let e,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[Qh]:{name:tf}}};if(!t.samples.length)return r;const s=t.samples[0].timestamp,o="number"==typeof performance.timeOrigin?performance.timeOrigin:ct||0,i=o-(ct||o);for(let o=0;o<t.samples.length;o++){const a=t.samples[o];if(void 0===a.stackId){void 0===e&&(e=n,r.stacks[e]=[],n++),r.samples[o]={elapsed_since_start_ns:((a.timestamp+i-s)*Zh).toFixed(0),stack_id:e,thread_id:Qh};continue}let c=t.stacks[a.stackId];const u=[];for(;c;){u.push(c.frameId);const e=t.frames[c.frameId];void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:e.name,abs_path:"number"==typeof e.resourceId?t.resources[e.resourceId]:void 0,lineno:e.line,colno:e.column}),c=void 0===c.parentId?void 0:t.stacks[c.parentId]}const l={elapsed_since_start_ns:((a.timestamp+i-s)*Zh).toFixed(0),stack_id:n,thread_id:Qh};r.stacks[n]=u,r.samples[o]=l,n++}return r}(t):t}function df(t,e,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=function(t){const e=t&&t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id;return"string"==typeof e&&32!==e.length&&ws&&N.log(`[Profiling] Invalid traceId: ${e} on profiled event`),"string"!=typeof e?"":e}(r),o=lf(n),i=e||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:Date.now()),a="number"==typeof r.timestamp?1e3*r.timestamp:Date.now();return{event_id:t,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||J,runtime:{name:"javascript",version:_s.navigator.userAgent},os:{name:ef,version:nf,build_number:sf},device:{locale:af,model:of,manufacturer:sf,architecture:rf,is_emulator:!1},debug_meta:{images:ff(n.resources)},profile:o,transactions:[{name:r.transaction||"",id:r.event_id||X(),trace_id:s,active_thread_id:Qh,relative_start_ns:"0",relative_end_ns:(1e6*(a-i)).toFixed(0)}]}}function pf(t){return"pageload"===t.op}"object"==typeof(uf=cf)&&null!==uf&&"getHighEntropyValues"in uf&&cf.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((t=>{if(ef=t.platform||"",rf=t.architecture||"",of=t.model||"",nf=t.platformVersion||"",t.fullVersionList&&t.fullVersionList.length>0){const e=t.fullVersionList[t.fullVersionList.length-1];sf=`${e.brand} ${e.version}`}})).catch((t=>{}));const hf=new WeakMap;function ff(t){const e=b._sentryDebugIds;if(!e)return[];const n=Pe(),r=n&&n.getOptions(),s=r&&r.stackParser;if(!s)return[];let o;const i=hf.get(s);i?o=i:(o=new Map,hf.set(s,o));const a=Object.keys(e).reduce(((t,n)=>{let r;const i=o.get(n);i?r=i:(r=s(n),o.set(n,r));for(let s=r.length-1;s>=0;s--){const o=r[s],i=o&&o.filename;if(o&&i){t[i]=e[n];break}}return t}),{}),c=[];for(const e of t)e&&a[e]&&c.push({type:"sourcemap",code_file:e,debug_id:a[e]});return c}let mf=!1;const gf=3e4;function yf(t){if(mf)return ws&&N.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!t.isRecording())return ws&&N.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const e=Pe(),n=e&&e.getOptions();if(!n)return ws&&N.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(s=r)&&"boolean"!=typeof s||"number"==typeof s&&isNaN(s)?(ws&&N.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),0):!0===s||!1===s||!(s<0||s>1)||(ws&&N.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${s}.`),0)))return ws&&N.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var s;if(!r)return ws&&N.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(ws&&N.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function _f(t,e,n,r){return function(t){return t.samples.length<2?(ws&&N.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!t.frames.length||(ws&&N.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?df(t,e,n,r):null}const vf=new Map;function bf(t){const e=vf.get(t);return e&&vf.delete(t),e}function Sf(t){return t?yf(t)?kf(t):t:(ws&&N.log("[Profiling] Transaction is undefined, skipping profiling"),t)}function kf(t){let e;pf(t)&&(e=1e3*it());const n=function(){const t=_s.Profiler;if("function"!=typeof t)return void(ws&&N.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const e=Math.floor(gf/10);try{return new t({sampleInterval:10,maxBufferSize:e})}catch(t){ws&&(N.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),N.log("[Profiling] Disabling profiling for current user session.")),mf=!0}}();if(!n)return t;ws&&N.log(`[Profiling] started profiling transaction: ${Pt(t).description}`);const r=X();async function s(){return t&&n?n.stop().then((e=>(o&&(_s.clearTimeout(o),o=void 0),ws&&N.log(`[Profiling] stopped profiling of transaction: ${Pt(t).description}`),e?(function(t,e){if(vf.set(t,e),vf.size>30){const t=vf.keys().next().value;vf.delete(t)}}(r,e),null):(ws&&N.log(`[Profiling] profiler returned null profile for: ${Pt(t).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((t=>(ws&&N.log("[Profiling] error while stopping profiler:",t),null))):null}let o=_s.setTimeout((()=>{ws&&N.log("[Profiling] max profile duration elapsed, stopping profiling for:",Pt(t).description),s()}),gf);const i=t.end.bind(t);return t.end=function(){return t?(s().then((()=>{t.setContext("profile",{profile_id:r,start_timestamp:e}),i()}),(()=>{i()})),t):i()},t}const wf="BrowserProfiling",xf=()=>({name:wf,setupOnce(){},setup(t){const e=Fe().getTransaction();e&&pf(e)&&yf(e)&&kf(e),"function"==typeof t.on?(t.on("startTransaction",(t=>{yf(t)&&kf(t)})),t.on("beforeEnvelope",(t=>{if(!vf.size)return;const e=function(t){const e=[];return qn(t,((t,n)=>{if("transaction"===n)for(let n=1;n<t.length;n++){const r=t[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&e.push(t[n])}})),e}(t);if(!e.length)return;const n=[];for(const t of e){const e=t&&t.contexts,r=e&&e.profile&&e.profile.profile_id,s=e&&e.profile&&e.profile.start_timestamp;if("string"!=typeof r){ws&&N.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!r){ws&&N.log("[Profiling] cannot find profile for a transaction without a profile context");continue}e&&e.profile&&delete e.profile;const o=bf(r);if(!o){ws&&N.log(`[Profiling] Could not retrieve profile for transaction: ${r}`);continue}const i=_f(r,s,o,t);i&&n.push(i)}!function(t,e){if(!e.length)return t;for(const n of e)t[1].push([{type:"profile"},n])}(t,n)}))):N.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}),Tf=Ve(wf,xf);let Ef={};_s.Sentry&&_s.Sentry.Integrations&&(Ef=_s.Sentry.Integrations);const Cf={...Ef,...mn,...s}},661:function(t,e,n){function r(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function s(){return"npm"}n.d(e,{S:function(){return s},n:function(){return r}})},305:function(t,e,n){n.d(e,{KV:function(){return s}});var r=n(661);function s(){return!(0,r.n)()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}t=n.hmd(t)}}]);