"use strict";(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[164],{164:function(t,e,n){n.r(e),n.d(e,{Breadcrumbs:function(){return So},BrowserClient:function(){return Ss},BrowserProfilingIntegration:function(){return Vp},BrowserTracing:function(){return ip},Dedupe:function(){return Eo},Feedback:function(){return Pd},FunctionToString:function(){return Je},GlobalHandlers:function(){return Oo},HttpContext:function(){return $o},Hub:function(){return Vt},InboundFilters:function(){return en},Integrations:function(){return Kp},LinkedErrors:function(){return jo},ModuleMetadata:function(){return Zn},Replay:function(){return Rl},ReplayCanvas:function(){return nd},SDK_VERSION:function(){return qt},Scope:function(){return Ht},TryCatch:function(){return qo},WINDOW:function(){return ss},addBreadcrumb:function(){return be},addEventProcessor:function(){return rs},addGlobalEventProcessor:function(){return ht},addIntegration:function(){return qe},addTracingExtensions:function(){return Jr},breadcrumbsIntegration:function(){return bo},browserApiErrorsIntegration:function(){return zo},browserTracingIntegration:function(){return up},captureEvent:function(){return _e},captureException:function(){return ge},captureMessage:function(){return ye},captureUserFeedback:function(){return ni},chromeStackLineParser:function(){return Ds},close:function(){return Oe},configureScope:function(){return ve},continueTrace:function(){return bn},createTransport:function(){return br},createUserFeedbackEnvelope:function(){return bs},dedupeIntegration:function(){return wo},defaultIntegrations:function(){return Ko},defaultRequestInstrumentationOptions:function(){return ep},defaultStackLineParsers:function(){return zs},defaultStackParser:function(){return qs},eventFromException:function(){return ms},eventFromMessage:function(){return gs},exceptionFromError:function(){return ls},extractTraceparentData:function(){return In},feedbackIntegration:function(){return Nd},flush:function(){return Me},forceLoad:function(){return Qo},functionToStringIntegration:function(){return Ke},geckoStackLineParser:function(){return Ps},getActiveSpan:function(){return vn},getActiveTransaction:function(){return Cn},getClient:function(){return De},getCurrentHub:function(){return Jt},getCurrentScope:function(){return Ne},getDefaultIntegrations:function(){return Jo},getHubFromCarrier:function(){return ee},getSpanStatusFromHttpCode:function(){return En},globalHandlersIntegration:function(){return Mo},httpContextIntegration:function(){return Po},inboundFiltersIntegration:function(){return tn},init:function(){return Xo},instrumentOutgoingRequests:function(){return np},isInitialized:function(){return Le},lastEventId:function(){return Ae},linkedErrorsIntegration:function(){return Bo},makeBrowserOfflineTransport:function(){return Sp},makeFetchTransport:function(){return Ts},makeMain:function(){return Kt},makeMultiplexedTransport:function(){return pr},makeXHRTransport:function(){return Is},metrics:function(){return ir},moduleMetadataIntegration:function(){return Xn},onLoad:function(){return ti},onProfilingStartRouteTransaction:function(){return qp},opera10StackLineParser:function(){return js},opera11StackLineParser:function(){return Hs},parameterize:function(){return On},replayCanvasIntegration:function(){return ed},replayIntegration:function(){return Il},sendFeedback:function(){return hd},setContext:function(){return Se},setCurrentClient:function(){return Mn},setExtra:function(){return we},setExtras:function(){return ke},setMeasurement:function(){return Rn},setTag:function(){return xe},setTags:function(){return Ee},setUser:function(){return Te},showReportDialog:function(){return Zo},spanStatusfromHttpCode:function(){return xn},startBrowserTracingNavigationSpan:function(){return dp},startBrowserTracingPageLoadSpan:function(){return lp},startInactiveSpan:function(){return _n},startSpan:function(){return gn},startSpanManual:function(){return yn},startTransaction:function(){return Re},trace:function(){return mn},winjsStackLineParser:function(){return Fs},withIsolationScope:function(){return Ie},withScope:function(){return Ce},wrap:function(){return ei}});var r={};n.r(r),n.d(r,{FunctionToString:function(){return Je},InboundFilters:function(){return en},LinkedErrors:function(){return dn}});var s={};n.r(s),n.d(s,{Breadcrumbs:function(){return So},Dedupe:function(){return Eo},GlobalHandlers:function(){return Oo},HttpContext:function(){return $o},LinkedErrors:function(){return jo},TryCatch:function(){return qo}});const o=Object.prototype.toString;function i(t){switch(o.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return y(t,Error)}}function a(t,e){return o.call(t)===`[object ${e}]`}function c(t){return a(t,"ErrorEvent")}function u(t){return a(t,"DOMError")}function l(t){return a(t,"String")}function d(t){return"object"==typeof t&&null!==t&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function p(t){return null===t||d(t)||"object"!=typeof t&&"function"!=typeof t}function h(t){return a(t,"Object")}function f(t){return"undefined"!=typeof Event&&y(t,Event)}function m(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function g(t){return"number"==typeof t&&t!=t}function y(t,e){try{return t instanceof e}catch(t){return!1}}function _(t){return!("object"!=typeof t||null===t||!t.__isVue&&!t._isVue)}function v(t){return t&&t.Math==Math?t:void 0}const b="object"==typeof globalThis&&v(globalThis)||"object"==typeof window&&v(window)||"object"==typeof self&&v(self)||"object"==typeof n.g&&v(n.g)||function(){return this}()||{};function S(){return b}function k(t,e,n){const r=n||b,s=r.__SENTRY__=r.__SENTRY__||{};return s[t]||(s[t]=e())}const w=S(),E=80;function x(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,s=[];let o=0,i=0;const a=" > ",c=a.length;let u;const l=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||E;for(;n&&o++<r&&(u=T(n,l),!("html"===u||o>1&&i+s.length*c+u.length>=d));)s.push(u),i+=u.length,n=n.parentNode;return s.reverse().join(a)}catch(t){return"<unknown>"}}function T(t,e){const n=t,r=[];let s,o,i,a,c;if(!n||!n.tagName)return"";if(w.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const u=e&&e.length?e.filter((t=>n.getAttribute(t))).map((t=>[t,n.getAttribute(t)])):null;if(u&&u.length)u.forEach((t=>{r.push(`[${t[0]}="${t[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&l(s))for(o=s.split(/\s+/),c=0;c<o.length;c++)r.push(`.${o[c]}`);const d=["aria-label","type","name","title","alt"];for(c=0;c<d.length;c++)i=d[c],a=n.getAttribute(i),a&&r.push(`[${i}="${a}"]`);return r.join("")}function C(){try{return w.document.location.href}catch(t){return""}}function I(t){return w.document&&w.document.querySelector?w.document.querySelector(t):null}function R(t){if(!w.HTMLElement)return null;let e=t;for(let t=0;t<5;t++){if(!e)return null;if(e instanceof HTMLElement&&e.dataset.sentryComponent)return e.dataset.sentryComponent;e=e.parentNode}return null}const M="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,O=["debug","info","warn","error","log","assert","trace"],A={};function D(t){if(!("console"in b))return t();const e=b.console,n={},r=Object.keys(A);r.forEach((t=>{const r=A[t];n[t]=e[t],e[t]=r}));try{return t()}finally{r.forEach((t=>{e[t]=n[t]}))}}const L=function(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return M?O.forEach((n=>{e[n]=(...e)=>{t&&D((()=>{b.console[n](`Sentry Logger [${n}]:`,...e)}))}})):O.forEach((t=>{e[t]=()=>{}})),e}();function N(t,e=0){return"string"!=typeof t||0===e||t.length<=e?t:`${t.slice(0,e)}...`}function P(t,e){if(!Array.isArray(t))return"";const n=[];for(let e=0;e<t.length;e++){const r=t[e];try{_(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(t){n.push("[value cannot be serialized]")}}return n.join(e)}function $(t,e,n=!1){return!!l(t)&&(a(e,"RegExp")?e.test(t):!!l(e)&&(n?t===e:t.includes(e)))}function F(t,e=[],n=!1){return e.some((e=>$(t,e,n)))}function B(t,e,n){if(!(e in t))return;const r=t[e],s=n(r);"function"==typeof s&&U(s,r),t[e]=s}function j(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch(n){M&&L.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function U(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,j(t,"__sentry_original__",e)}catch(t){}}function H(t){return t.__sentry_original__}function z(t){if(i(t))return{message:t.message,name:t.name,stack:t.stack,...W(t)};if(f(t)){const e={type:t.type,target:q(t.target),currentTarget:q(t.currentTarget),...W(t)};return"undefined"!=typeof CustomEvent&&y(t,CustomEvent)&&(e.detail=t.detail),e}return t}function q(t){try{return e=t,"undefined"!=typeof Element&&y(e,Element)?x(t):Object.prototype.toString.call(t)}catch(t){return"<unknown>"}var e}function W(t){if("object"==typeof t&&null!==t){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function G(t){return V(t,new Map)}function V(t,e){if(function(t){if(!h(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||"Object"===e}catch(t){return!0}}(t)){const n=e.get(t);if(void 0!==n)return n;const r={};e.set(t,r);for(const n of Object.keys(t))void 0!==t[n]&&(r[n]=V(t[n],e));return r}if(Array.isArray(t)){const n=e.get(t);if(void 0!==n)return n;const r=[];return e.set(t,r),t.forEach((t=>{r.push(V(t,e))})),r}return t}const Y="production",K="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function J(){const t=b,e=t.crypto||t.msCrypto;let n=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch(t){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(t=>(t^(15&n())>>t/4).toString(16)))}function X(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Z(t){const{message:e,event_id:n}=t;if(e)return e;const r=X(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Q(t,e,n){const r=t.exception=t.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{};o.value||(o.value=e||""),o.type||(o.type=n||"Error")}function tt(t,e){const n=X(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const t={...r&&r.data,...e.data};n.mechanism.data=t}}function et(t){if(t&&t.__sentry_captured__)return!0;try{j(t,"__sentry_captured__",!0)}catch(t){}return!1}function nt(t){return Array.isArray(t)?t:[t]}const rt=1e3;function st(){return Date.now()/rt}const ot=function(){const{performance:t}=b;if(!t||!t.now)return st;const e=Date.now()-t.now(),n=null==t.timeOrigin?e:t.timeOrigin;return()=>(n+t.now())/rt}();let it;const at=(()=>{const{performance:t}=b;if(!t||!t.now)return void(it="none");const e=36e5,n=t.now(),r=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,o=s<e,i=t.timing&&t.timing.navigationStart,a="number"==typeof i?Math.abs(i+n-r):e;return o||a<e?s<=a?(it="timeOrigin",t.timeOrigin):(it="navigationStart",i):(it="dateNow",r)})();var ct;function ut(t){return new dt((e=>{e(t)}))}function lt(t){return new dt(((e,n)=>{n(t)}))}!function(t){t[t.PENDING=0]="PENDING";t[t.RESOLVED=1]="RESOLVED";t[t.REJECTED=2]="REJECTED"}(ct||(ct={}));class dt{constructor(t){dt.prototype.__init.call(this),dt.prototype.__init2.call(this),dt.prototype.__init3.call(this),dt.prototype.__init4.call(this),this._state=ct.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}then(t,e){return new dt(((n,r)=>{this._handlers.push([!1,e=>{if(t)try{n(t(e))}catch(t){r(t)}else n(e)},t=>{if(e)try{n(e(t))}catch(t){r(t)}else r(t)}]),this._executeHandlers()}))}catch(t){return this.then((t=>t),t)}finally(t){return new dt(((e,n)=>{let r,s;return this.then((e=>{s=!1,r=e,t&&t()}),(e=>{s=!0,r=e,t&&t()})).then((()=>{s?n(r):e(r)}))}))}__init(){this._resolve=t=>{this._setResult(ct.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(ct.REJECTED,t)}}__init3(){this._setResult=(t,e)=>{this._state===ct.PENDING&&(m(e)?e.then(this._resolve,this._reject):(this._state=t,this._value=e,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===ct.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach((t=>{t[0]||(this._state===ct.RESOLVED&&t[1](this._value),this._state===ct.REJECTED&&t[2](this._value),t[0]=!0)}))}}}function pt(){return k("globalEventProcessors",(()=>[]))}function ht(t){pt().push(t)}function ft(t,e,n,r=0){return new dt(((s,o)=>{const i=t[r];if(null===e||"function"!=typeof i)s(e);else{const a=i({...e},n);K&&i.id&&null===a&&L.log(`Event processor "${i.id}" dropped event`),m(a)?a.then((e=>ft(t,e,n,r+1).then(s))).then(null,o):ft(t,a,n,r+1).then(s).then(null,o)}}))}function mt(t){const e=ot(),n={sid:J(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(t){return G({sid:`${t.sid}`,init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}(n)};return t&&gt(n,t),n}function gt(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||ot(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=32===e.sid.length?e.sid:J()),void 0!==e.init&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),"number"==typeof e.started&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof e.duration)t.duration=e.duration;else{const e=t.timestamp-t.started;t.duration=e>=0?e:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),"number"==typeof e.errors&&(t.errors=e.errors),e.status&&(t.status=e.status)}function yt(t,e){let n={};e?n={status:e}:"ok"===t.status&&(n={status:"exited"}),gt(t,n)}function _t(t){return t.transaction}const vt="baggage",bt="sentry-",St=/^sentry-/,kt=8192;function wt(t){if(!t)return;return function(t){if(0===Object.keys(t).length)return;return Object.entries(t).reduce(((t,[e,n],r)=>{const s=`${encodeURIComponent(e)}=${encodeURIComponent(n)}`,o=0===r?s:`${t},${s}`;return o.length>kt?(M&&L.warn(`Not adding key: ${e} with val: ${n} to baggage header due to exceeding baggage size limits.`),t):o}),"")}(Object.entries(t).reduce(((t,[e,n])=>(n&&(t[`${bt}${e}`]=n),t)),{}))}function Et(t){return t.split(",").map((t=>t.split("=").map((t=>decodeURIComponent(t.trim()))))).reduce(((t,[e,n])=>(t[e]=n,t)),{})}const xt=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Tt(t){if(!t)return;const e=t.match(xt);if(!e)return;let n;return"1"===e[3]?n=!0:"0"===e[3]&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function Ct(t,e){const n=Tt(t),r=function(t){if(!l(t)&&!Array.isArray(t))return;let e={};if(Array.isArray(t))e=t.reduce(((t,e)=>{const n=Et(e);for(const e of Object.keys(n))t[e]=n[e];return t}),{});else{if(!t)return;e=Et(t)}const n=Object.entries(e).reduce(((t,[e,n])=>(e.match(St)&&(t[e.slice(bt.length)]=n),t)),{});return Object.keys(n).length>0?n:void 0}(e),{traceId:s,parentSpanId:o,parentSampled:i}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:s||J(),parentSpanId:o||J().substring(16),spanId:J().substring(16),sampled:i,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:s||J(),spanId:J().substring(16)}}}function It(t=J(),e=J().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${t}-${e}${r}`}const Rt=1;function Mt(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:s,parent_span_id:o,status:i,tags:a,origin:c}=Lt(t);return G({data:r,op:s,parent_span_id:o,span_id:e,status:i,tags:a,trace_id:n,origin:c})}function Ot(t){const{traceId:e,spanId:n}=t.spanContext();return It(e,n,Nt(t))}function At(t){return"number"==typeof t?Dt(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Dt(t.getTime()):ot()}function Dt(t){return t>9999999999?t/1e3:t}function Lt(t){return function(t){return"function"==typeof t.getSpanJSON}(t)?t.getSpanJSON():"function"==typeof t.toJSON?t.toJSON():{}}function Nt(t){const{traceFlags:e}=t.spanContext();return Boolean(e&Rt)}function Pt(t,e,n){const r=e.getOptions(),{publicKey:s}=e.getDsn()||{},{segment:o}=n&&n.getUser()||{},i=G({environment:r.environment||Y,release:r.release,user_segment:o,public_key:s,trace_id:t});return e.emit&&e.emit("createDsc",i),i}function $t(t){const e=De();if(!e)return{};const n=Pt(Lt(t).trace_id||"",e,Ne()),r=_t(t);if(!r)return n;const s=r&&r._frozenDynamicSamplingContext;if(s)return s;const{sampleRate:o,source:i}=r.metadata;null!=o&&(n.sample_rate=`${o}`);const a=Lt(r);return i&&"url"!==i&&(n.transaction=a.description),n.sampled=String(Nt(r)),e.emit&&e.emit("createDsc",n),n}function Ft(t,e){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:o}=e;!function(t,e){const{extra:n,tags:r,user:s,contexts:o,level:i,transactionName:a}=e,c=G(n);c&&Object.keys(c).length&&(t.extra={...c,...t.extra});const u=G(r);u&&Object.keys(u).length&&(t.tags={...u,...t.tags});const l=G(s);l&&Object.keys(l).length&&(t.user={...l,...t.user});const d=G(o);d&&Object.keys(d).length&&(t.contexts={...d,...t.contexts});i&&(t.level=i);a&&(t.transaction=a)}(t,e),r&&function(t,e){t.contexts={trace:Mt(e),...t.contexts};const n=_t(e);if(n){t.sdkProcessingMetadata={dynamicSamplingContext:$t(e),...t.sdkProcessingMetadata};const r=Lt(n).description;r&&(t.tags={transaction:r,...t.tags})}}(t,r),function(t,e){t.fingerprint=t.fingerprint?nt(t.fingerprint):[],e&&(t.fingerprint=t.fingerprint.concat(e));t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}(t,n),function(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}(t,s),function(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}(t,o)}function Bt(t,e){const{extra:n,tags:r,user:s,contexts:o,level:i,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:p,transactionName:h,span:f}=e;jt(t,"extra",n),jt(t,"tags",r),jt(t,"user",s),jt(t,"contexts",o),jt(t,"sdkProcessingMetadata",a),i&&(t.level=i),h&&(t.transactionName=h),f&&(t.span=f),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),u.length&&(t.fingerprint=[...t.fingerprint,...u]),l.length&&(t.eventProcessors=[...t.eventProcessors,...l]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...p}}function jt(t,e,n){if(n&&Object.keys(n).length){t[e]={...t[e]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[e][r]=n[r])}}let Ut;class Ht{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=zt()}static clone(t){return t?t.clone():new Ht}clone(){const t=new Ht;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&gt(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,e){return this._tags={...this._tags,[t]:e},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,e){return this._extra={...this._extra,[t]:e},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return null===e?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if("function"==typeof t){const e=t(this);return e instanceof Ht?e:this}return t instanceof Ht?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession),t._propagationContext&&(this._propagationContext=t._propagationContext)):h(t)&&(this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=zt(),this}addBreadcrumb(t,e){const n="number"==typeof e?e:100;if(n<=0)return this;const r={timestamp:st(),...t},s=this._breadcrumbs;return s.push(r),this._breadcrumbs=s.length>n?s.slice(-n):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:e,_contexts:n,_tags:r,_extra:s,_user:o,_level:i,_fingerprint:a,_eventProcessors:c,_propagationContext:u,_sdkProcessingMetadata:l,_transactionName:d,_span:p}=this;return{breadcrumbs:t,attachments:e,contexts:n,tags:r,extra:s,user:o,level:i,fingerprint:a||[],eventProcessors:c,propagationContext:u,sdkProcessingMetadata:l,transactionName:d,span:p}}applyToEvent(t,e={},n=[]){Ft(t,this.getScopeData());return ft([...n,...pt(),...this._eventProcessors],t,e)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,e){const n=e&&e.event_id?e.event_id:J();if(!this._client)return L.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:r,...e,event_id:n},this),n}captureMessage(t,e,n){const r=n&&n.event_id?n.event_id:J();if(!this._client)return L.warn("No client configured on scope - will not capture message!"),r;const s=new Error(t);return this._client.captureMessage(t,e,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureEvent(t,e){const n=e&&e.event_id?e.event_id:J();return this._client?(this._client.captureEvent(t,{...e,event_id:n},this),n):(L.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((t=>{t(this)})),this._notifyingListeners=!1)}}function zt(){return{traceId:J(),spanId:J().substring(16)}}const qt="7.99.0",Wt=parseFloat(qt),Gt=100;class Vt{constructor(t,e,n,r=Wt){let s,o;this._version=r,e?s=e:(s=new Ht,s.setClient(t)),n?o=n:(o=new Ht,o.setClient(t)),this._stack=[{scope:s}],t&&this.bindClient(t),this._isolationScope=o}isOlderThan(t){return this._version<t}bindClient(t){const e=this.getStackTop();e.client=t,e.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(t){const e=this.pushScope();let n;try{n=t(e)}catch(t){throw this.popScope(),t}return m(n)?n.then((t=>(this.popScope(),t)),(t=>{throw this.popScope(),t})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,e){const n=this._lastEventId=e&&e.event_id?e.event_id:J(),r=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:r,...e,event_id:n}),n}captureMessage(t,e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:J(),s=new Error(t);return this.getScope().captureMessage(t,e,{originalException:t,syntheticException:s,...n,event_id:r}),r}captureEvent(t,e){const n=e&&e.event_id?e.event_id:J();return t.type||(this._lastEventId=n),this.getScope().captureEvent(t,{...e,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(t,e){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=Gt}=r.getOptions&&r.getOptions()||{};if(o<=0)return;const i={timestamp:st(),...t},a=s?D((()=>s(i,e))):i;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,e),n.addBreadcrumb(a,o))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,e){this.getScope().setTag(t,e),this.getIsolationScope().setTag(t,e)}setExtra(t,e){this.getScope().setExtra(t,e),this.getIsolationScope().setExtra(t,e)}setContext(t,e){this.getScope().setContext(t,e),this.getIsolationScope().setContext(t,e)}configureScope(t){const{scope:e,client:n}=this.getStackTop();n&&t(e)}run(t){const e=Kt(this);try{t(this)}finally{Kt(e)}}getIntegration(t){const e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return K&&L.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,e){const n=this._callExtensionMethod("startTransaction",t,e);if(K&&!n){this.getClient()?L.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):L.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const t=this.getStackTop().scope,e=t.getSession();e&&yt(e),this._sendSessionUpdate(),t.setSession()}startSession(t){const{scope:e,client:n}=this.getStackTop(),{release:r,environment:s=Y}=n&&n.getOptions()||{},{userAgent:o}=b.navigator||{},i=mt({release:r,environment:s,user:e.getUser(),...o&&{userAgent:o},...t}),a=e.getSession&&e.getSession();return a&&"ok"===a.status&&gt(a,{status:"exited"}),this.endSession(),e.setSession(i),i}shouldSendDefaultPii(){const t=this.getClient(),e=t&&t.getOptions();return Boolean(e&&e.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:e}=this.getStackTop(),n=t.getSession();n&&e&&e.captureSession&&e.captureSession(n)}_callExtensionMethod(t,...e){const n=Yt().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[t])return n.extensions[t].apply(this,e);K&&L.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function Yt(){return b.__SENTRY__=b.__SENTRY__||{extensions:{},hub:void 0},b}function Kt(t){const e=Yt(),n=ee(e);return ne(e,t),n}function Jt(){const t=Yt();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return Zt(t)}function Xt(){return Jt().getIsolationScope()}function Zt(t=Yt()){return te(t)&&!ee(t).isOlderThan(Wt)||ne(t,new Vt),ee(t)}function Qt(t,e={}){const n=Yt();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(t,e):t()}function te(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function ee(t){return k("hub",(()=>new Vt),t)}function ne(t,e){if(!t)return!1;return(t.__SENTRY__=t.__SENTRY__||{}).hub=e,!0}const re=50,se=/\(error: (.*)\)/,oe=/captureMessage|captureException/;function ie(...t){const e=t.sort(((t,e)=>t[0]-e[0])).map((t=>t[1]));return(t,n=0)=>{const r=[],s=t.split("\n");for(let t=n;t<s.length;t++){const n=s[t];if(n.length>1024)continue;const o=se.test(n)?n.replace(se,"$1"):n;if(!o.match(/\S*Error: /)){for(const t of e){const e=t(o);if(e){r.push(e);break}}if(r.length>=re)break}}return function(t){if(!t.length)return[];const e=Array.from(t);/sentryWrapped/.test(e[e.length-1].function||"")&&e.pop();e.reverse(),oe.test(e[e.length-1].function||"")&&(e.pop(),oe.test(e[e.length-1].function||"")&&e.pop());return e.slice(0,re).map((t=>({...t,filename:t.filename||e[e.length-1].filename,function:t.function||"?"})))}(r)}}const ae="<anonymous>";function ce(t){try{return t&&"function"==typeof t&&t.name||ae}catch(t){return ae}}function ue(t,e=100,n=1/0){try{return de("",t,e,n)}catch(t){return{ERROR:`**non-serializable** (${t})`}}}function le(t,e=3,n=102400){const r=ue(t,e);return s=r,function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(s))>n?le(t,e-1,n):r;var s}function de(t,e,r=1/0,s=1/0,o=function(){const t="function"==typeof WeakSet,e=t?new WeakSet:[];return[function(n){if(t)return!!e.has(n)||(e.add(n),!1);for(let t=0;t<e.length;t++)if(e[t]===n)return!0;return e.push(n),!1},function(n){if(t)e.delete(n);else for(let t=0;t<e.length;t++)if(e[t]===n){e.splice(t,1);break}}]}()){const[i,a]=o;if(null==e||["number","boolean","string"].includes(typeof e)&&!g(e))return e;const c=function(t,e){try{if("domain"===t&&e&&"object"==typeof e&&e._events)return"[Domain]";if("domainEmitter"===t)return"[DomainEmitter]";if(void 0!==n.g&&e===n.g)return"[Global]";if("undefined"!=typeof window&&e===window)return"[Window]";if("undefined"!=typeof document&&e===document)return"[Document]";if(_(e))return"[VueViewModel]";if(h(r=e)&&"nativeEvent"in r&&"preventDefault"in r&&"stopPropagation"in r)return"[SyntheticEvent]";if("number"==typeof e&&e!=e)return"[NaN]";if("function"==typeof e)return`[Function: ${ce(e)}]`;if("symbol"==typeof e)return`[${String(e)}]`;if("bigint"==typeof e)return`[BigInt: ${String(e)}]`;const s=function(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}(e);return/^HTML(\w*)Element$/.test(s)?`[HTMLElement: ${s}]`:`[object ${s}]`}catch(t){return`**non-serializable** (${t})`}var r}(t,e);if(!c.startsWith("[object "))return c;if(e.__sentry_skip_normalization__)return e;const u="number"==typeof e.__sentry_override_normalization_depth__?e.__sentry_override_normalization_depth__:r;if(0===u)return c.replace("object ","");if(i(e))return"[Circular ~]";const l=e;if(l&&"function"==typeof l.toJSON)try{return de("",l.toJSON(),u-1,s,o)}catch(t){}const d=Array.isArray(e)?[]:{};let p=0;const f=z(e);for(const t in f){if(!Object.prototype.hasOwnProperty.call(f,t))continue;if(p>=s){d[t]="[MaxProperties ~]";break}const e=f[t];d[t]=de(t,e,u-1,s,o),p++}return a(e),d}function pe(t,e,n,r,s,o){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=t,c={...e,event_id:e.event_id||n.event_id||J(),timestamp:e.timestamp||st()},u=n.integrations||t.integrations.map((t=>t.name));!function(t,e){const{environment:n,release:r,dist:s,maxValueLength:o=250}=e;"environment"in t||(t.environment="environment"in e?n:Y);void 0===t.release&&void 0!==r&&(t.release=r);void 0===t.dist&&void 0!==s&&(t.dist=s);t.message&&(t.message=N(t.message,o));const i=t.exception&&t.exception.values&&t.exception.values[0];i&&i.value&&(i.value=N(i.value,o));const a=t.request;a&&a.url&&(a.url=N(a.url,o))}(c,t),function(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}(c,u),void 0===e.type&&function(t,e){const n=b._sentryDebugIds;if(!n)return;let r;const s=he.get(e);s?r=s:(r=new Map,he.set(e,r));const o=Object.keys(n).reduce(((t,s)=>{let o;const i=r.get(s);i?o=i:(o=e(s),r.set(s,o));for(let e=o.length-1;e>=0;e--){const r=o[e];if(r.filename){t[r.filename]=n[s];break}}return t}),{});try{t.exception.values.forEach((t=>{t.stacktrace.frames.forEach((t=>{t.filename&&(t.debug_id=o[t.filename])}))}))}catch(t){}}(c,t.stackParser);const l=function(t,e){if(!e)return t;const n=t?t.clone():new Ht;return n.update(e),n}(r,n.captureContext);n.mechanism&&tt(c,n.mechanism);const d=s&&s.getEventProcessors?s.getEventProcessors():[],p=(Ut||(Ut=new Ht),Ut).getScopeData();if(o){Bt(p,o.getScopeData())}if(l){Bt(p,l.getScopeData())}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),Ft(c,p);return ft([...d,...pt(),...p.eventProcessors],c,n).then((t=>(t&&function(t){const e={};try{t.exception.values.forEach((t=>{t.stacktrace.frames.forEach((t=>{t.debug_id&&(t.abs_path?e[t.abs_path]=t.debug_id:t.filename&&(e[t.filename]=t.debug_id),delete t.debug_id)}))}))}catch(t){}if(0===Object.keys(e).length)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.keys(e).forEach((t=>{n.push({type:"sourcemap",code_file:t,debug_id:e[t]})}))}(t),"number"==typeof i&&i>0?function(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((t=>({...t,...t.data&&{data:ue(t.data,e,n)}})))},...t.user&&{user:ue(t.user,e,n)},...t.contexts&&{contexts:ue(t.contexts,e,n)},...t.extra&&{extra:ue(t.extra,e,n)}};t.contexts&&t.contexts.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=ue(t.contexts.trace.data,e,n)));t.spans&&(r.spans=t.spans.map((t=>{const r=Lt(t).data;return r&&(t.data=ue(r,e,n)),t})));return r}(t,i,a):t)))}const he=new WeakMap;function fe(t){if(t)return function(t){return t instanceof Ht||"function"==typeof t}(t)||function(t){return Object.keys(t).some((t=>me.includes(t)))}(t)?{captureContext:t}:t}const me=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function ge(t,e){return Jt().captureException(t,fe(e))}function ye(t,e){const n="string"==typeof e?e:void 0,r="string"!=typeof e?{captureContext:e}:void 0;return Jt().captureMessage(t,n,r)}function _e(t,e){return Jt().captureEvent(t,e)}function ve(t){Jt().configureScope(t)}function be(t,e){Jt().addBreadcrumb(t,e)}function Se(t,e){Jt().setContext(t,e)}function ke(t){Jt().setExtras(t)}function we(t,e){Jt().setExtra(t,e)}function Ee(t){Jt().setTags(t)}function xe(t,e){Jt().setTag(t,e)}function Te(t){Jt().setUser(t)}function Ce(...t){const e=Jt();if(2===t.length){const[n,r]=t;return n?e.withScope((()=>(e.getStackTop().scope=n,r(n)))):e.withScope(r)}return e.withScope(t[0])}function Ie(t){return Qt((()=>t(Xt())))}function Re(t,e){return Jt().startTransaction({...t},e)}async function Me(t){const e=De();return e?e.flush(t):(K&&L.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function Oe(t){const e=De();return e?e.close(t):(K&&L.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function Ae(){return Jt().lastEventId()}function De(){return Jt().getClient()}function Le(){return!!De()}function Ne(){return Jt().getScope()}function Pe(t){const e=De(),n=Xt(),r=Ne(),{release:s,environment:o=Y}=e&&e.getOptions()||{},{userAgent:i}=b.navigator||{},a=mt({release:s,environment:o,user:r.getUser()||n.getUser(),...i&&{userAgent:i},...t}),c=n.getSession();return c&&"ok"===c.status&&gt(c,{status:"exited"}),$e(),n.setSession(a),r.setSession(a),a}function $e(){const t=Xt(),e=Ne(),n=e.getSession()||t.getSession();n&&yt(n),Fe(),t.setSession(),e.setSession()}function Fe(){const t=Xt(),e=Ne(),n=De(),r=e.getSession()||t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function Be(t=!1){t?$e():Fe()}const je=[];function Ue(t){const e=t.defaultIntegrations||[],n=t.integrations;let r;e.forEach((t=>{t.isDefaultInstance=!0})),r=Array.isArray(n)?[...e,...n]:"function"==typeof n?nt(n(e)):e;const s=function(t){const e={};return t.forEach((t=>{const{name:n}=t,r=e[n];r&&!r.isDefaultInstance&&t.isDefaultInstance||(e[n]=t)})),Object.keys(e).map((t=>e[t]))}(r),o=function(t,e){for(let n=0;n<t.length;n++)if(!0===e(t[n]))return n;return-1}(s,(t=>"Debug"===t.name));if(-1!==o){const[t]=s.splice(o,1);s.push(t)}return s}function He(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function ze(t,e,n){if(n[e.name])K&&L.log(`Integration skipped because it was already installed: ${e.name}`);else{if(n[e.name]=e,-1===je.indexOf(e.name)&&(e.setupOnce(ht,Jt),je.push(e.name)),e.setup&&"function"==typeof e.setup&&e.setup(t),t.on&&"function"==typeof e.preprocessEvent){const n=e.preprocessEvent.bind(e);t.on("preprocessEvent",((e,r)=>n(e,r,t)))}if(t.addEventProcessor&&"function"==typeof e.processEvent){const n=e.processEvent.bind(e),r=Object.assign(((e,r)=>n(e,r,t)),{id:e.name});t.addEventProcessor(r)}K&&L.log(`Integration installed: ${e.name}`)}}function qe(t){const e=De();e&&e.addIntegration?e.addIntegration(t):K&&L.warn(`Cannot add integration "${t.name}" because no SDK Client is available.`)}function We(t,e){return Object.assign((function(...t){return e(...t)}),{id:t})}let Ge;const Ve="FunctionToString",Ye=new WeakMap,Ke=()=>({name:Ve,setupOnce(){Ge=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=H(this),n=Ye.has(De())&&void 0!==e?e:this;return Ge.apply(n,t)}}catch(t){}},setup(t){Ye.set(t,!0)}}),Je=We(Ve,Ke),Xe=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],Ze=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Qe="InboundFilters",tn=(t={})=>({name:Qe,setupOnce(){},processEvent(e,n,r){const s=r.getOptions(),o=function(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:Xe],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[],...t.disableTransactionDefaults?[]:Ze],ignoreInternal:void 0===t.ignoreInternal||t.ignoreInternal}}(t,s);return function(t,e){if(e.ignoreInternal&&function(t){try{return"SentryError"===t.exception.values[0].type}catch(t){}return!1}(t))return K&&L.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Z(t)}`),!0;if(function(t,e){if(t.type||!e||!e.length)return!1;return function(t){const e=[];t.message&&e.push(t.message);let n;try{n=t.exception.values[t.exception.values.length-1]}catch(t){}n&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`));K&&0===e.length&&L.error(`Could not extract message for event ${Z(t)}`);return e}(t).some((t=>F(t,e)))}(t,e.ignoreErrors))return K&&L.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Z(t)}`),!0;if(function(t,e){if("transaction"!==t.type||!e||!e.length)return!1;const n=t.transaction;return!!n&&F(n,e)}(t,e.ignoreTransactions))return K&&L.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Z(t)}`),!0;if(function(t,e){if(!e||!e.length)return!1;const n=nn(t);return!!n&&F(n,e)}(t,e.denyUrls))return K&&L.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Z(t)}.\nUrl: ${nn(t)}`),!0;if(!function(t,e){if(!e||!e.length)return!0;const n=nn(t);return!n||F(n,e)}(t,e.allowUrls))return K&&L.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Z(t)}.\nUrl: ${nn(t)}`),!0;return!1}(e,o)?null:e}}),en=We(Qe,tn);function nn(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch(t){}return e?function(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(e):null}catch(e){return K&&L.error(`Cannot extract url for event ${Z(t)}`),null}}function rn(t,e,n=250,r,s,o,i){if(!(o.exception&&o.exception.values&&i&&y(i.originalException,Error)))return;const a=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var c,u;a&&(o.exception.values=(c=sn(t,e,s,i.originalException,r,o.exception.values,a,0),u=n,c.map((t=>(t.value&&(t.value=N(t.value,u)),t)))))}function sn(t,e,n,r,s,o,i,a){if(o.length>=n+1)return o;let c=[...o];if(y(r[s],Error)){on(i,a);const o=t(e,r[s]),u=c.length;an(o,s,u,a),c=sn(t,e,n,r[s],s,[o,...c],o,u)}return Array.isArray(r.errors)&&r.errors.forEach(((r,o)=>{if(y(r,Error)){on(i,a);const u=t(e,r),l=c.length;an(u,`errors[${o}]`,l,a),c=sn(t,e,n,r,s,[u,...c],u,l)}})),c}function on(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,is_exception_group:!0,exception_id:e}}function an(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function cn(t,e){return t(e.stack||"",1)}function un(t,e){const n={type:e.name||e.constructor.name,value:e.message},r=cn(t,e);return r.length&&(n.stacktrace={frames:r}),n}const ln="LinkedErrors",dn=We(ln,((t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:ln,setupOnce(){},preprocessEvent(t,r,s){const o=s.getOptions();rn(un,o.stackParser,o.maxValueLength,n,e,t,r)}}})),pn=r;function hn(t,e,n=(()=>{})){let r;try{r=t()}catch(t){throw e(t),n(),t}return function(t,e,n){if(m(t))return t.then((t=>(n(),t)),(t=>{throw e(t),n(),t}));return n(),t}(r,e,n)}function fn(t){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const e=De(),n=t||e&&e.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function mn(t,e,n=(()=>{}),r=(()=>{})){const s=Jt(),o=Ne(),i=o.getSpan(),a=kn(t),c=Sn(s,i,a);return o.setSpan(c),hn((()=>e(c)),(t=>{c&&c.setStatus("internal_error"),n(t,c)}),(()=>{c&&c.end(),o.setSpan(i),r()}))}function gn(t,e){const n=kn(t);return Qt((()=>Ce(t.scope,(r=>{const s=Jt(),o=r.getSpan(),i=t.onlyIfParent&&!o?void 0:Sn(s,o,n);return r.setSpan(i),hn((()=>e(i)),(()=>{if(i){const{status:t}=Lt(i);t&&"ok"!==t||i.setStatus("internal_error")}}),(()=>i&&i.end()))}))))}function yn(t,e){const n=kn(t);return Qt((()=>Ce(t.scope,(r=>{const s=Jt(),o=r.getSpan(),i=t.onlyIfParent&&!o?void 0:Sn(s,o,n);function a(){i&&i.end()}return r.setSpan(i),hn((()=>e(i,a)),(()=>{if(i&&i.isRecording()){const{status:t}=Lt(i);t&&"ok"!==t||i.setStatus("internal_error")}}))}))))}function _n(t){if(!fn())return;const e=kn(t),n=Jt(),r=t.scope?t.scope.getSpan():vn();if(!(t.onlyIfParent&&!r)){if(r)return r.startChild(e);{const t=Xt(),r=Ne(),{traceId:s,dsc:o,parentSpanId:i,sampled:a}={...t.getPropagationContext(),...r.getPropagationContext()};return n.startTransaction({traceId:s,parentSpanId:i,parentSampled:a,...e,metadata:{dynamicSamplingContext:o,...e.metadata}})}}}function vn(){return Ne().getSpan()}function bn({sentryTrace:t,baggage:e},n){const r=Ne(),{traceparentData:s,dynamicSamplingContext:o,propagationContext:i}=Ct(t,e);r.setPropagationContext(i),K&&s&&L.log(`[Tracing] Continuing trace ${s.traceId}.`);const a={...s,metadata:G({dynamicSamplingContext:o})};return n?n(a):a}function Sn(t,e,n){if(fn()){if(e)return e.startChild(n);{const e=Xt(),r=Ne(),{traceId:s,dsc:o,parentSpanId:i,sampled:a}={...e.getPropagationContext(),...r.getPropagationContext()};return t.startTransaction({traceId:s,parentSpanId:i,parentSampled:a,...n,metadata:{dynamicSamplingContext:o,...n.metadata}})}}}function kn(t){if(t.startTime){const e={...t};return e.startTimestamp=At(t.startTime),delete e.startTime,e}return t}var wn;function En(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}!function(t){t.Ok="ok";t.DeadlineExceeded="deadline_exceeded";t.Unauthenticated="unauthenticated";t.PermissionDenied="permission_denied";t.NotFound="not_found";t.ResourceExhausted="resource_exhausted";t.InvalidArgument="invalid_argument";t.Unimplemented="unimplemented";t.Unavailable="unavailable";t.InternalError="internal_error";t.UnknownError="unknown_error";t.Cancelled="cancelled";t.AlreadyExists="already_exists";t.FailedPrecondition="failed_precondition";t.Aborted="aborted";t.OutOfRange="out_of_range";t.DataLoss="data_loss"}(wn||(wn={}));const xn=En;function Tn(t,e){t.setTag("http.status_code",String(e)),t.setData("http.response.status_code",e);const n=En(e);"unknown_error"!==n&&t.setStatus(n)}function Cn(t){return(t||Jt()).getScope().getTransaction()}const In=Tt;function Rn(t,e,n){const r=Cn();r&&r.setMeasurement(t,e,n)}function Mn(t){const e=Jt().getStackTop();e.client=t,e.scope.setClient(t)}function On(t,...e){const n=new String(String.raw(t,...e));return n.__sentry_template_string__=t.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=e,n}const An=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Dn(t,e=!1){const{host:n,path:r,pass:s,port:o,projectId:i,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&s?`:${s}`:""}@${n}${o?`:${o}`:""}/${r?`${r}/`:r}${i}`}function Ln(t){const e=An.exec(t);if(!e)return void D((()=>{console.error(`Invalid Sentry Dsn: ${t}`)}));const[n,r,s="",o,i="",a]=e.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const t=u.match(/^\d+/);t&&(u=t[0])}return Nn({host:o,pass:s,path:c,projectId:u,port:i,protocol:n,publicKey:r})}function Nn(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Pn(t){const e="string"==typeof t?Ln(t):Nn(t);if(e&&function(t){if(!M)return!0;const{port:e,projectId:n,protocol:r}=t;return!(["protocol","publicKey","host","projectId"].find((e=>!t[e]&&(L.error(`Invalid Sentry Dsn: ${e} missing`),!0)))||(n.match(/^\d+$/)?function(t){return"http"===t||"https"===t}(r)?e&&isNaN(parseInt(e,10))&&(L.error(`Invalid Sentry Dsn: Invalid port ${e}`),1):(L.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(L.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(e))return e}function $n(t,e=[]){return[t,e]}function Fn(t,e){const[n,r]=t;return[n,[...r,e]]}function Bn(t,e){const n=t[1];for(const t of n){if(e(t,t[0].type))return!0}return!1}function jn(t,e){return(e||new TextEncoder).encode(t)}function Un(t,e){const[n,r]=t;let s=JSON.stringify(n);function o(t){"string"==typeof s?s="string"==typeof t?s+t:[jn(s,e),t]:s.push("string"==typeof t?jn(t,e):t)}for(const t of r){const[e,n]=t;if(o(`\n${JSON.stringify(e)}\n`),"string"==typeof n||n instanceof Uint8Array)o(n);else{let t;try{t=JSON.stringify(n)}catch(e){t=JSON.stringify(ue(n))}o(t)}}return"string"==typeof s?s:function(t){const e=t.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(e);let r=0;for(const e of t)n.set(e,r),r+=e.length;return n}(s)}function Hn(t,e){const n="string"==typeof t.data?jn(t.data,e):t.data;return[G({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const zn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};function qn(t){return zn[t]}function Wn(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function Gn(t,e,n,r){const s=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:Dn(r)},...s&&{trace:G({...s})}}}const Vn=new Map,Yn=new Set;function Kn(t,e){return function(t){if(b._sentryModuleMetadata)for(const e of Object.keys(b._sentryModuleMetadata)){const n=b._sentryModuleMetadata[e];if(Yn.has(e))continue;Yn.add(e);const r=t(e);for(const t of r.reverse())if(t.filename){Vn.set(t.filename,n);break}}}(t),Vn.get(e)}const Jn="ModuleMetadata",Xn=()=>({name:Jn,setupOnce(){},setup(t){"function"==typeof t.on&&t.on("beforeEnvelope",(t=>{Bn(t,((t,e)=>{if("event"===e){const e=Array.isArray(t)?t[1]:void 0;e&&(!function(t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const e of t.stacktrace.frames||[])delete e.module_metadata}))}catch(t){}}(e),t[1]=e)}}))}))},processEvent(t,e,n){return function(t,e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const n of e.stacktrace.frames||[]){if(!n.filename)continue;const e=Kn(t,n.filename);e&&(n.module_metadata=e)}}))}catch(t){}}(n.getOptions().stackParser,t),t}}),Zn=We(Jn,Xn),Qn=/[^a-zA-Z0-9_/.-]+/g,tr=/[^\w\d_:/@.{}[\]$-]+/g;const er={c:class{constructor(t){this._value=t}get weight(){return 1}add(t){this._value+=t}toString(){return`${this._value}`}},g:class{constructor(t){this._last=t,this._min=t,this._max=t,this._sum=t,this._count=1}get weight(){return 5}add(t){this._last=t,t<this._min&&(this._min=t),t>this._max&&(this._max=t),this._sum+=t,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},d:class{constructor(t){this._value=[t]}get weight(){return this._value.length}add(t){this._value.push(t)}toString(){return this._value.join(":")}},s:class{constructor(t){this.first=t,this._value=new Set([t])}get weight(){return this._value.size}add(t){this._value.add(t)}toString(){return Array.from(this._value).map((t=>"string"==typeof t?function(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e>>>0}(t):t)).join(":")}}};class nr{constructor(t){this._client=t,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(t,e,n,r="none",s={},o=ot()){const i=Math.floor(o),a=e.replace(Qn,"_"),c=function(t){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n.replace(Qn,"_")]=String(t[n]).replace(tr,"_"));return e}(s),u=function(t,e,n,r){return`${t}${e}${n}${Object.entries(G(r)).sort(((t,e)=>t[0].localeCompare(e[0])))}`}(t,a,r,c),l=this._buckets.get(u);l?(l.metric.add(n),l.timestamp<i&&(l.timestamp=i)):this._buckets.set(u,{metric:new er[t](n),timestamp:i,metricType:t,name:a,unit:r,tags:c})}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const t=Array.from(this._buckets).map((([,t])=>t));this._client.captureAggregateMetrics(t)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const rr="MetricsAggregator",sr=()=>({name:rr,setupOnce(){},setup(t){t.metricsAggregator=new nr(t)}});function or(t,e,n,r={}){const s=De(),o=Ne();if(s){if(!s.metricsAggregator)return void(K&&L.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:i,tags:a,timestamp:c}=r,{release:u,environment:l}=s.getOptions(),d=o.getTransaction(),p={};u&&(p.release=u),l&&(p.environment=l),d&&(p.transaction=Lt(d).description||""),K&&L.log(`Adding value of ${n} to ${t} metric ${e}`),s.metricsAggregator.add(t,e,n,i,{...p,...a},c)}}const ir={increment:function(t,e=1,n){or("c",t,e,n)},distribution:function(t,e,n){or("d",t,e,n)},set:function(t,e,n){or("s",t,e,n)},gauge:function(t,e,n){or("g",t,e,n)},MetricsAggregator:We(rr,sr),metricsAggregatorIntegration:sr},ar="7";function cr(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function ur(t,e){return n={sentry_key:t.publicKey,sentry_version:ar,...e&&{sentry_client:`${e.name}/${e.version}`}},Object.keys(n).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(n[t])}`)).join("&");var n}function lr(t,e={}){const n="string"==typeof e?e:e.tunnel,r="string"!=typeof e&&e._metadata?e._metadata.sdk:void 0;return n||`${function(t){return`${cr(t)}${t.projectId}/envelope/`}(t)}?${ur(t,r)}`}function dr(t,e){let n;return Bn(t,((t,r)=>(e.includes(r)&&(n=Array.isArray(t)?t[1]:void 0),!!n))),n}function pr(t,e){return n=>{const r=t(n),s={};function o(e,r){const o=r?`${e}:${r}`:e;if(!s[o]){const i=Ln(e);if(!i)return;const a=lr(i);s[o]=r?function(t,e){return n=>{const r=t(n);return{send:async t=>{const n=dr(t,["event","transaction","profile","replay_event"]);return n&&(n.release=e),r.send(t)},flush:t=>r.flush(t)}}}(t,r)({...n,url:a}):t({...n,url:a})}return s[o]}return{send:async function(t){const n=e({envelope:t,getEvent:function(e){const n=e&&e.length?e:["event"];return dr(t,n)}}).map((t=>"string"==typeof t?o(t,void 0):o(t.dsn,t.release))).filter((t=>!!t));return 0===n.length&&n.push(r),(await Promise.all(n.map((e=>e.send(t)))))[0]},flush:async function(t){const e=[...Object.keys(s).map((t=>s[t])),r];return(await Promise.all(e.map((e=>e.flush(t))))).every((t=>t))}}}}class hr extends Error{constructor(t,e="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=e}}function fr(t){const e=[];function n(t){return e.splice(e.indexOf(t),1)[0]}return{$:e,add:function(r){if(!(void 0===t||e.length<t))return lt(new hr("Not adding Promise because buffer limit was reached."));const s=r();return-1===e.indexOf(s)&&e.push(s),s.then((()=>n(s))).then(null,(()=>n(s).then(null,(()=>{})))),s},drain:function(t){return new dt(((n,r)=>{let s=e.length;if(!s)return n(!0);const o=setTimeout((()=>{t&&t>0&&n(!1)}),t);e.forEach((t=>{ut(t).then((()=>{--s||(clearTimeout(o),n(!0))}),r)}))}))}}}const mr=6e4;function gr(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${t}`);return isNaN(r)?mr:r-e}function yr(t,e,n=Date.now()){return function(t,e){return t[e]||t.all||0}(t,e)>n}function _r(t,{statusCode:e,headers:n},r=Date.now()){const s={...t},o=n&&n["x-sentry-rate-limits"],i=n&&n["retry-after"];if(o)for(const t of o.trim().split(",")){const[e,n]=t.split(":",2),o=parseInt(e,10),i=1e3*(isNaN(o)?60:o);if(n)for(const t of n.split(";"))s[t]=r+i;else s.all=r+i}else i?s.all=r+gr(i,r):429===e&&(s.all=r+6e4);return s}const vr=30;function br(t,e,n=fr(t.bufferSize||vr)){let r={};function s(s){const o=[];if(Bn(s,((e,n)=>{const s=qn(n);if(yr(r,s)){const r=Sr(e,n);t.recordDroppedEvent("ratelimit_backoff",s,r)}else o.push(e)})),0===o.length)return ut();const i=$n(s[0],o),a=e=>{Bn(i,((n,r)=>{const s=Sr(n,r);t.recordDroppedEvent(e,qn(r),s)}))};return n.add((()=>e({body:Un(i,t.textEncoder)}).then((t=>(void 0!==t.statusCode&&(t.statusCode<200||t.statusCode>=300)&&K&&L.warn(`Sentry responded with status code ${t.statusCode} to sent event.`),r=_r(r,t),t)),(t=>{throw a("network_error"),t})))).then((t=>t),(t=>{if(t instanceof hr)return K&&L.error("Skipped sending event because buffer is full."),a("queue_overflow"),ut();throw t}))}return s.__sentry__baseTransport__=!0,{send:s,flush:t=>n.drain(t)}}function Sr(t,e){if("event"===e||"transaction"===e)return Array.isArray(t)?t[1]:void 0}const kr={},wr={};function Er(t,e){kr[t]=kr[t]||[],kr[t].push(e)}function xr(t,e){wr[t]||(e(),wr[t]=!0)}function Tr(t,e){const n=t&&kr[t];if(n)for(const r of n)try{r(e)}catch(e){M&&L.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${ce(r)}\nError:`,e)}}let Cr=null;function Ir(t){const e="error";Er(e,t),xr(e,Rr)}function Rr(){Cr=b.onerror,b.onerror=function(t,e,n,r,s){return Tr("error",{column:r,error:s,line:n,msg:t,url:e}),!(!Cr||Cr.__SENTRY_LOADER__)&&Cr.apply(this,arguments)},b.onerror.__SENTRY_INSTRUMENTED__=!0}let Mr=null;function Or(t){const e="unhandledrejection";Er(e,t),xr(e,Ar)}function Ar(){Mr=b.onunhandledrejection,b.onunhandledrejection=function(t){return Tr("unhandledrejection",t),!(Mr&&!Mr.__SENTRY_LOADER__)||Mr.apply(this,arguments)},b.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}let Dr=!1;function Lr(){const t=Cn();if(t){const e="internal_error";K&&L.log(`[Tracing] Transaction: ${e} -> Global error occured`),t.setStatus(e)}}Lr.tag="sentry_tracingErrorCallback";const Nr="sentry.source",Pr="sentry.sample_rate",$r="sentry.op",Fr="sentry.origin";class Br{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class jr{constructor(t={}){this._traceId=t.traceId||J(),this._spanId=t.spanId||J().substring(16),this._startTime=t.startTimestamp||ot(),this.tags=t.tags?{...t.tags}:{},this.data=t.data?{...t.data}:{},this.instrumenter=t.instrumenter||"sentry",this._attributes={},this.setAttributes({[Fr]:t.origin||"manual",[$r]:t.op,...t.attributes}),this._name=t.name||t.description,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.status&&(this._status=t.status),t.endTimestamp&&(this._endTime=t.endTimestamp)}get name(){return this._name||""}set name(t){this.updateName(t)}get description(){return this._name}set description(t){this._name=t}get traceId(){return this._traceId}set traceId(t){this._traceId=t}get spanId(){return this._spanId}set spanId(t){this._spanId=t}set parentSpanId(t){this._parentSpanId=t}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(t){this._sampled=t}get attributes(){return this._attributes}set attributes(t){this._attributes=t}get startTimestamp(){return this._startTime}set startTimestamp(t){this._startTime=t}get endTimestamp(){return this._endTime}set endTimestamp(t){this._endTime=t}get status(){return this._status}set status(t){this._status=t}get op(){return this._attributes[$r]}set op(t){this.setAttribute($r,t)}get origin(){return this._attributes[Fr]}set origin(t){this.setAttribute(Fr,t)}spanContext(){const{_spanId:t,_traceId:e,_sampled:n}=this;return{spanId:t,traceId:e,traceFlags:n?Rt:0}}startChild(t){const e=new jr({...t,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});e.spanRecorder=this.spanRecorder,e.spanRecorder&&e.spanRecorder.add(e);const n=_t(this);if(e.transaction=n,K&&n){const r=`[Tracing] Starting '${t&&t.op||"< unknown op >"}' span on transaction '${Lt(e).description||"< unknown name >"}' (${n.spanContext().spanId}).`;L.log(r),this._logMessage=r}return e}setTag(t,e){return this.tags={...this.tags,[t]:e},this}setData(t,e){return this.data={...this.data,[t]:e},this}setAttribute(t,e){void 0===e?delete this._attributes[t]:this._attributes[t]=e}setAttributes(t){Object.keys(t).forEach((e=>this.setAttribute(e,t[e])))}setStatus(t){return this._status=t,this}setHttpStatus(t){return Tn(this,t),this}setName(t){this.updateName(t)}updateName(t){return this._name=t,this}isSuccess(){return"ok"===this._status}finish(t){return this.end(t)}end(t){if(this._endTime)return;const e=_t(this);if(K&&e&&e.spanContext().spanId!==this._spanId){const t=this._logMessage;t&&L.log(t.replace("Starting","Finishing"))}this._endTime=At(t)}toTraceparent(){return Ot(this)}toContext(){return G({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(t){return this.data=t.data||{},this._name=t.name||t.description,this._endTime=t.endTimestamp,this.op=t.op,this._parentSpanId=t.parentSpanId,this._sampled=t.sampled,this._spanId=t.spanId||this._spanId,this._startTime=t.startTimestamp||this._startTime,this._status=t.status,this.tags=t.tags||{},this._traceId=t.traceId||this._traceId,this}getTraceContext(){return Mt(this)}getSpanJSON(){return G({data:this._getData(),description:this._name,op:this._attributes[$r],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Fr]})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:t,_attributes:e}=this,n=Object.keys(t).length>0,r=Object.keys(e).length>0;if(n||r)return n&&r?{...t,...e}:n?t:e}}class Ur extends jr{constructor(t,e){super(t),this._measurements={},this._contexts={},this._hub=e||Jt(),this._name=t.name||"",this._metadata={...t.metadata},this._trimEnd=t.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(t){this.setName(t)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Nr]&&{source:this._attributes[Nr]},...this._attributes[Pr]&&{sampleRate:this._attributes[Pr]}}}set metadata(t){this._metadata=t}setName(t,e="custom"){this._name=t,this.setAttribute(Nr,e)}updateName(t){return this._name=t,this}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new Br(t)),this.spanRecorder.add(this)}setContext(t,e){null===e?delete this._contexts[t]:this._contexts[t]=e}setMeasurement(t,e,n=""){this._measurements[t]={value:e,unit:n}}setMetadata(t){this._metadata={...this._metadata,...t}}end(t){const e=At(t),n=this._finishTransaction(e);if(n)return this._hub.captureEvent(n)}toContext(){return G({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this._name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){return $t(this)}setHub(t){this._hub=t}_finishTransaction(t){if(void 0!==this._endTime)return;this._name||(K&&L.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(t);const e=this._hub.getClient();if(e&&e.emit&&e.emit("finishTransaction",this),!0!==this._sampled)return K&&L.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(e&&e.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((t=>t!==this&&Lt(t).timestamp)):[];if(this._trimEnd&&n.length>0){const t=n.map((t=>Lt(t).timestamp)).filter(Boolean);this._endTime=t.reduce(((t,e)=>t>e?t:e))}const{metadata:r}=this,{source:s}=r,o={contexts:{...this._contexts,trace:Mt(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...r,dynamicSamplingContext:$t(this)},...s&&{transaction_info:{source:s}}};return Object.keys(this._measurements).length>0&&(K&&L.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),o.measurements=this._measurements),K&&L.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),o}}const Hr={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},zr=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class qr extends Br{constructor(t,e,n,r){super(r),this._pushActivity=t,this._popActivity=e,this.transactionSpanId=n}add(t){if(t.spanContext().spanId!==this.transactionSpanId){const e=t.end;t.end=(...n)=>(this._popActivity(t.spanContext().spanId),e.apply(t,n)),void 0===Lt(t).timestamp&&this._pushActivity(t.spanContext().spanId)}super.add(t)}}class Wr extends Ur{constructor(t,e,n=Hr.idleTimeout,r=Hr.finalTimeout,s=Hr.heartbeatInterval,o=!1,i=!1){super(t,e),this._idleHub=e,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=s,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=zr[4],this._autoFinishAllowed=!i,o&&(K&&L.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),e.getScope().setSpan(this)),i||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=zr[3],this.end())}),this._finalTimeout)}end(t){const e=At(t);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){K&&L.log("[Tracing] finishing IdleTransaction",new Date(1e3*e).toISOString(),this.op);for(const t of this._beforeFinishCallbacks)t(this,e);this.spanRecorder.spans=this.spanRecorder.spans.filter((t=>{if(t.spanContext().spanId===this.spanContext().spanId)return!0;Lt(t).timestamp||(t.setStatus("cancelled"),t.end(e),K&&L.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(t,void 0,2)));const{start_timestamp:n,timestamp:r}=Lt(t),s=n&&n<e,o=(this._finalTimeout+this._idleTimeout)/1e3,i=r&&n&&r-n<o;if(K){const e=JSON.stringify(t,void 0,2);s?i||L.log("[Tracing] discarding Span since it finished after Transaction final timeout",e):L.log("[Tracing] discarding Span since it happened after Transaction was finished",e)}return s&&i})),K&&L.log("[Tracing] flushing IdleTransaction")}else K&&L.log("[Tracing] No active IdleTransaction");if(this._onScope){const t=this._idleHub.getScope();t.getTransaction()===this&&t.setSpan(void 0)}return super.end(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const e=t=>{this._finished||this._pushActivity(t)},n=t=>{this._finished||this._popActivity(t)};this.spanRecorder=new qr(e,n,this.spanContext().spanId,t),K&&L.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:e}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===e,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=zr[5],this.end(t)))}setFinishReason(t){this._finishReason=t}sendAutoFinishSignal(){this._autoFinishAllowed||(K&&L.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=zr[1],this.end(t))}),this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),K&&L.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,K&&L.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(K&&L.log(`[Tracing] popActivity ${t}`),delete this.activities[t],K&&L.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const t=ot();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=zr[5],this.end(t)):this._restartIdleTimeout(t+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?this._autoFinishAllowed&&(K&&L.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=zr[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){K&&L.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function Gr(t,e,n){if(!fn(e))return t.sampled=!1,t;if(void 0!==t.sampled)return t.setAttribute(Pr,Number(t.sampled)),t;let r;return"function"==typeof e.tracesSampler?(r=e.tracesSampler(n),t.setAttribute(Pr,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==e.tracesSampleRate?(r=e.tracesSampleRate,t.setAttribute(Pr,Number(r))):(r=1,t.setAttribute(Pr,r)),function(t){if(g(t)||"number"!=typeof t&&"boolean"!=typeof t)return K&&L.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1;if(t<0||t>1)return K&&L.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${t}.`),!1;return!0}(r)?r?(t.sampled=Math.random()<r,t.sampled?(K&&L.log(`[Tracing] starting ${t.op} transaction - ${Lt(t).description}`),t):(K&&L.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),t)):(K&&L.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),t.sampled=!1,t):(K&&L.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)}function Vr(){const t=this.getScope().getSpan();return t?{"sentry-trace":Ot(t)}:{}}function Yr(t,e){const n=this.getClient(),r=n&&n.getOptions()||{},s=r.instrumenter||"sentry",o=t.instrumenter||"sentry";s!==o&&(K&&L.error(`A transaction was started with instrumenter=\`${o}\`, but the SDK is configured with the \`${s}\` instrumenter.\nThe transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),t.sampled=!1);let i=new Ur(t,this);return i=Gr(i,r,{parentSampled:t.parentSampled,transactionContext:t,...e}),i.isRecording()&&i.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",i),i}function Kr(t,e,n,r,s,o,i,a=!1){const c=t.getClient(),u=c&&c.getOptions()||{};let l=new Wr(e,t,n,r,i,s,a);return l=Gr(l,u,{parentSampled:e.parentSampled,transactionContext:e,...o}),l.isRecording()&&l.initSpanRecorder(u._experiments&&u._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",l),l}function Jr(){const t=Yt();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=Yr),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=Vr),Dr||(Dr=!0,Ir(Lr),Or(Lr)))}function Xr(t,e,n,r){const s=Wn(n),o=t.type&&"replay_event"!==t.type?t.type:"event";!function(t,e){e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]])}(t,n&&n.sdk);const i=Gn(t,s,r,e);delete t.sdkProcessingMetadata;return $n(i,[[{type:o},t]])}function Zr(t,e,n,r){const s={sent_at:(new Date).toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),r&&e&&(s.dsn=Dn(e));const o=function(t){const e=function(t){let e="";for(const n of t){const t=Object.entries(n.tags),r=t.length>0?`|#${t.map((([t,e])=>`${t}:${e}`)).join(",")}`:"";e+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return e}(t);return[{type:"statsd",length:e.length},e]}(t);return $n(s,[o])}const Qr="Not capturing exception because it's already been captured.";class ts{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Pn(t.dsn):K&&L.warn("No DSN provided, client will not send events."),this._dsn){const e=lr(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}}captureException(t,e,n){if(et(t))return void(K&&L.log(Qr));let r=e&&e.event_id;return this._process(this.eventFromException(t,e).then((t=>this._captureEvent(t,e,n))).then((t=>{r=t}))),r}captureMessage(t,e,n,r){let s=n&&n.event_id;const o=d(t)?t:String(t),i=p(t)?this.eventFromMessage(o,e,n):this.eventFromException(t,n);return this._process(i.then((t=>this._captureEvent(t,n,r))).then((t=>{s=t}))),s}captureEvent(t,e,n){if(e&&e.originalException&&et(e.originalException))return void(K&&L.log(Qr));let r=e&&e.event_id;return this._process(this._captureEvent(t,e,n).then((t=>{r=t}))),r}captureSession(t){"string"!=typeof t.release?K&&L.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),gt(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const e=this._transport;return e?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then((n=>e.flush(t).then((t=>n&&t))))):ut(!0)}close(t){return this.flush(t).then((t=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),t)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch(e){return K&&L.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){const e=this._integrations[t.name];ze(this,t,this._integrations),e||He(this,[t])}sendEvent(t,e={}){this.emit("beforeSendEvent",t,e);let n=Xr(t,this._dsn,this._options._metadata,this._options.tunnel);for(const t of e.attachments||[])n=Fn(n,Hn(t,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((e=>this.emit("afterSendEvent",t,e)),null)}sendSession(t){const e=function(t,e,n,r){const s=Wn(n);return $n({sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!r&&e&&{dsn:Dn(e)}},["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()]])}(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}recordDroppedEvent(t,e,n){if(this._options.sendClientReports){const n=`${t}:${e}`;K&&L.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}captureAggregateMetrics(t){K&&L.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const e=Zr(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}on(t,e){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(e)}emit(t,...e){this._hooks[t]&&this._hooks[t].forEach((t=>t(...e)))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=function(t,e){const n={};return e.forEach((e=>{e&&ze(t,e,n)})),n}(this,t),He(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,e){let n=!1,r=!1;const s=e.exception&&e.exception.values;if(s){r=!0;for(const t of s){const e=t.mechanism;if(e&&!1===e.handled){n=!0;break}}}const o="ok"===t.status;(o&&0===t.errors||o&&n)&&(gt(t,{...n&&{status:"crashed"},errors:t.errors||Number(r||n)}),this.captureSession(t))}_isClientDoneProcessing(t){return new dt((e=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),e(!0)):(n+=1,t&&n>=t&&(clearInterval(r),e(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(t,e,n,r=Xt()){const s=this.getOptions(),o=Object.keys(this._integrations);return!e.integrations&&o.length>0&&(e.integrations=o),this.emit("preprocessEvent",t,e),pe(s,t,e,n,this,r).then((t=>{if(null===t)return t;const e={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(t.contexts&&t.contexts.trace)&&e){const{traceId:r,spanId:s,parentSpanId:o,dsc:i}=e;t.contexts={trace:{trace_id:r,span_id:s,parent_span_id:o},...t.contexts};const a=i||Pt(r,this,n);t.sdkProcessingMetadata={dynamicSamplingContext:a,...t.sdkProcessingMetadata}}return t}))}_captureEvent(t,e={},n){return this._processEvent(t,e,n).then((t=>t.event_id),(t=>{if(K){const e=t;"log"===e.logLevel?L.log(e.message):L.warn(e)}}))}_processEvent(t,e,n){const r=this.getOptions(),{sampleRate:s}=r,o=ns(t),i=es(t),a=t.type||"error",c=`before send for type \`${a}\``;if(i&&"number"==typeof s&&Math.random()>s)return this.recordDroppedEvent("sample_rate","error",t),lt(new hr(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const u="replay_event"===a?"replay":a;return this._prepareEvent(t,e,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",u,t),new hr("An event processor returned `null`, will not send event.","log");if(e.data&&!0===e.data.__sentry__)return n;const s=function(t,e,n){const{beforeSend:r,beforeSendTransaction:s}=t;if(es(e)&&r)return r(e,n);if(ns(e)&&s)return s(e,n);return e}(r,n,e);return function(t,e){const n=`${e} must return \`null\` or a valid event.`;if(m(t))return t.then((t=>{if(!h(t)&&null!==t)throw new hr(n);return t}),(t=>{throw new hr(`${e} rejected with ${t}`)}));if(!h(t)&&null!==t)throw new hr(n);return t}(s,c)})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",u,t),new hr(`${c} returned \`null\`, will not send event.`,"log");const s=n&&n.getSession();!o&&s&&this._updateSessionFromEvent(s,r);const i=r.transaction_info;if(o&&i&&r.transaction!==t.transaction){const t="custom";r.transaction_info={...i,source:t}}return this.sendEvent(r,e),r})).then(null,(t=>{if(t instanceof hr)throw t;throw this.captureException(t,{data:{__sentry__:!0},originalException:t}),new hr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)}))}_process(t){this._numProcessing++,t.then((t=>(this._numProcessing--,t)),(t=>(this._numProcessing--,t)))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,(t=>{K&&L.error("Error while sending event:",t)}));K&&L.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map((e=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t[e]}}))}}function es(t){return void 0===t.type}function ns(t){return"transaction"===t.type}function rs(t){const e=De();e&&e.addEventProcessor&&e.addEventProcessor(t)}const ss=b;let os=0;function is(){return os>0}function as(t,e={},n){if("function"!=typeof t)return t;try{const e=t.__sentry_wrapped__;if(e)return e;if(H(t))return t}catch(e){return t}const r=function(){const r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const s=r.map((t=>as(t,e)));return t.apply(this,s)}catch(t){throw os++,setTimeout((()=>{os--})),Ce((n=>{n.addEventProcessor((t=>(e.mechanism&&(Q(t,void 0,void 0),tt(t,e.mechanism)),t.extra={...t.extra,arguments:r},t))),ge(t)})),t}};try{for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}catch(t){}U(r,t),j(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch(t){}return r}var cs=n(661);const us="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function ls(t,e){const n=ps(t,e),r={type:e&&e.name,value:fs(e)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function ds(t,e){return{exception:{values:[ls(t,e)]}}}function ps(t,e){const n=e.stacktrace||e.stack||"",r=function(t){if(t){if("number"==typeof t.framesToPop)return t.framesToPop;if(hs.test(t.message))return 1}return 0}(e);try{return t(n,r)}catch(t){}return[]}const hs=/Minified React error #\d+;/i;function fs(t){const e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function ms(t,e,n,r){const s=ys(t,e,n&&n.syntheticException||void 0,r);return tt(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),ut(s)}function gs(t,e,n="info",r,s){const o=_s(t,e,r&&r.syntheticException||void 0,s);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),ut(o)}function ys(t,e,n,r,s){let o;if(c(e)&&e.error){return ds(t,e.error)}if(u(e)||a(e,"DOMException")){const s=e;if("stack"in e)o=ds(t,e);else{const e=s.name||(u(s)?"DOMError":"DOMException"),i=s.message?`${e}: ${s.message}`:e;o=_s(t,i,n,r),Q(o,i)}return"code"in s&&(o.tags={...o.tags,"DOMException.code":`${s.code}`}),o}if(i(e))return ds(t,e);if(h(e)||f(e)){return o=function(t,e,n,r){const s=De(),o=s&&s.getOptions().normalizeDepth,i={exception:{values:[{type:f(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:vs(e,{isUnhandledRejection:r})}]},extra:{__serialized__:le(e,o)}};if(n){const e=ps(t,n);e.length&&(i.exception.values[0].stacktrace={frames:e})}return i}(t,e,n,s),tt(o,{synthetic:!0}),o}return o=_s(t,e,n,r),Q(o,`${e}`,void 0),tt(o,{synthetic:!0}),o}function _s(t,e,n,r){const s={};if(r&&n){const r=ps(t,n);r.length&&(s.exception={values:[{value:e,stacktrace:{frames:r}}]})}if(d(e)){const{__sentry_template_string__:t,__sentry_template_values__:n}=e;return s.logentry={message:t,params:n},s}return s.message=e,s}function vs(t,{isUnhandledRejection:e}){const n=function(t,e=40){const n=Object.keys(z(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return N(n[0],e);for(let t=n.length;t>0;t--){const r=n.slice(0,t).join(", ");if(!(r.length>e))return t===n.length?r:N(r,e)}return""}(t),r=e?"promise rejection":"exception";if(c(t))return`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``;if(f(t)){return`Event \`${function(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch(t){}}(t)}\` (type=${t.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function bs(t,{metadata:e,tunnel:n,dsn:r}){const s={event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!n&&!!r&&{dsn:Dn(r)}},o=function(t){return[{type:"user_report"},t]}(t);return $n(s,[o])}class Ss extends ts{constructor(t){!function(t,e,n=[e],r="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:n.map((t=>({name:`${r}:@sentry/${t}`,version:qt}))),version:qt}),t._metadata=s}(t,"browser",["browser"],ss.SENTRY_SDK_SOURCE||(0,cs.S)()),super(t),t.sendClientReports&&ss.document&&ss.document.addEventListener("visibilitychange",(()=>{"hidden"===ss.document.visibilityState&&this._flushOutcomes()}))}eventFromException(t,e){return ms(this._options.stackParser,t,e,this._options.attachStacktrace)}eventFromMessage(t,e="info",n){return gs(this._options.stackParser,t,e,n,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled())return void(us&&L.warn("SDK not enabled, will not capture user feedback."));const e=bs(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(e)}_prepareEvent(t,e,n){return t.platform=t.platform||"javascript",super._prepareEvent(t,e,n)}_flushOutcomes(){const t=this._clearOutcomes();if(0===t.length)return void(us&&L.log("No outcomes to send"));if(!this._dsn)return void(us&&L.log("No dsn provided, will not send outcomes"));us&&L.log("Sending outcomes:",t);const e=(n=t,$n((r=this._options.tunnel&&Dn(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:s||st(),discarded_events:n}]]));var n,r,s;this._sendEnvelope(e)}}const ks=S();function ws(){if(!("fetch"in ks))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(t){return!1}}function Es(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}let xs;function Ts(t,e=function(){if(xs)return xs;if(Es(ss.fetch))return xs=ss.fetch.bind(ss);const t=ss.document;let e=ss.fetch;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(e=r.fetch),t.head.removeChild(n)}catch(t){us&&L.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return xs=e.bind(ss)}()){let n=0,r=0;return br(t,(function(s){const o=s.body.length;n+=o,r++;const i={body:s.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{return e(t.url,i).then((t=>(n-=o,r--,{statusCode:t.status,headers:{"x-sentry-rate-limits":t.headers.get("X-Sentry-Rate-Limits"),"retry-after":t.headers.get("Retry-After")}})))}catch(t){return xs=void 0,n-=o,r--,lt(t)}}))}const Cs=4;function Is(t){return br(t,(function(e){return new dt(((n,r)=>{const s=new XMLHttpRequest;s.onerror=r,s.onreadystatechange=()=>{s.readyState===Cs&&n({statusCode:s.status,headers:{"x-sentry-rate-limits":s.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":s.getResponseHeader("Retry-After")}})},s.open("POST",t.url);for(const e in t.headers)Object.prototype.hasOwnProperty.call(t.headers,e)&&s.setRequestHeader(e,t.headers[e]);s.send(e.body)}))}))}const Rs="?";function Ms(t,e,n,r){const s={filename:t,function:e,in_app:!0};return void 0!==n&&(s.lineno=n),void 0!==r&&(s.colno=r),s}const Os=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,As=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ds=[30,t=>{const e=Os.exec(t);if(e){if(e[2]&&0===e[2].indexOf("eval")){const t=As.exec(e[2]);t&&(e[2]=t[1],e[3]=t[2],e[4]=t[3])}const[t,n]=Ws(e[1]||Rs,e[2]);return Ms(n,t,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],Ls=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Ns=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ps=[50,t=>{const e=Ls.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const t=Ns.exec(e[3]);t&&(e[1]=e[1]||"eval",e[3]=t[1],e[4]=t[2],e[5]="")}let t=e[3],n=e[1]||Rs;return[n,t]=Ws(n,t),Ms(t,n,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}],$s=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Fs=[40,t=>{const e=$s.exec(t);return e?Ms(e[2],e[1]||Rs,+e[3],e[4]?+e[4]:void 0):void 0}],Bs=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,js=[10,t=>{const e=Bs.exec(t);return e?Ms(e[2],e[3]||Rs,+e[1]):void 0}],Us=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Hs=[20,t=>{const e=Us.exec(t);return e?Ms(e[5],e[3]||e[4]||Rs,+e[1],+e[2]):void 0}],zs=[Ds,Ps,Fs],qs=ie(...zs),Ws=(t,e)=>{const n=-1!==t.indexOf("safari-extension"),r=-1!==t.indexOf("safari-web-extension");return n||r?[-1!==t.indexOf("@")?t.split("@")[0]:Rs,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},Gs=S();const Vs=b;let Ys;function Ks(t){const e="history";Er(e,t),xr(e,Js)}function Js(){if(!function(){const t=Gs.chrome,e=t&&t.app&&t.app.runtime,n="history"in Gs&&!!Gs.history.pushState&&!!Gs.history.replaceState;return!e&&n}())return;const t=Vs.onpopstate;function e(t){return function(...e){const n=e.length>2?e[2]:void 0;if(n){const t=Ys,e=String(n);Ys=e;Tr("history",{from:t,to:e})}return t.apply(this,e)}}Vs.onpopstate=function(...e){const n=Vs.location.href,r=Ys;Ys=n;if(Tr("history",{from:r,to:n}),t)try{return t.apply(this,e)}catch(t){}},B(Vs.history,"pushState",e),B(Vs.history,"replaceState",e)}function Xs(){"console"in b&&O.forEach((function(t){t in b.console&&B(b.console,t,(function(e){return A[t]=e,function(...e){Tr("console",{args:e,level:t});const n=A[t];n&&n.apply(b.console,e)}}))}))}const Zs=b,Qs=1e3;let to,eo,no;function ro(t){Er("dom",t),xr("dom",so)}function so(){if(!Zs.document)return;const t=Tr.bind(null,"dom"),e=oo(t,!0);Zs.document.addEventListener("click",e,!1),Zs.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((e=>{const n=Zs[e]&&Zs[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(B(n,"addEventListener",(function(e){return function(n,r,s){if("click"===n||"keypress"==n)try{const r=this,o=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},i=o[n]=o[n]||{refCount:0};if(!i.handler){const r=oo(t);i.handler=r,e.call(this,n,r,s)}i.refCount++}catch(t){}return e.call(this,n,r,s)}})),B(n,"removeEventListener",(function(t){return function(e,n,r){if("click"===e||"keypress"==e)try{const n=this,s=n.__sentry_instrumentation_handlers__||{},o=s[e];o&&(o.refCount--,o.refCount<=0&&(t.call(this,e,o.handler,r),o.handler=void 0,delete s[e]),0===Object.keys(s).length&&delete n.__sentry_instrumentation_handlers__)}catch(t){}return t.call(this,e,n,r)}})))}))}function oo(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(t){try{return t.target}catch(t){return null}}(n);if(function(t,e){return"keypress"===t&&(!e||!e.tagName||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!e.isContentEditable)}(n.type,r))return;j(n,"_sentryCaptured",!0),r&&!r._sentryId&&j(r,"_sentryId",J());const s="keypress"===n.type?"input":n.type;if(!function(t){if(t.type!==eo)return!1;try{if(!t.target||t.target._sentryId!==no)return!1}catch(t){}return!0}(n)){t({event:n,name:s,global:e}),eo=n.type,no=r?r._sentryId:void 0}clearTimeout(to),to=Zs.setTimeout((()=>{no=void 0,eo=void 0}),Qs)}}const io=b,ao="__sentry_xhr_v3__";function co(t){Er("xhr",t),xr("xhr",uo)}function uo(){if(!io.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;B(t,"open",(function(t){return function(...e){const n=Date.now(),r=l(e[0])?e[0].toUpperCase():void 0,s=function(t){if(l(t))return t;try{return t.toString()}catch(t){}return}(e[1]);if(!r||!s)return t.apply(this,e);this[ao]={method:r,url:s,request_headers:{}},"POST"===r&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const t=this[ao];if(t&&4===this.readyState){try{t.status_code=this.status}catch(t){}Tr("xhr",{args:[r,s],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?B(this,"onreadystatechange",(function(t){return function(...e){return o(),t.apply(this,e)}})):this.addEventListener("readystatechange",o),B(this,"setRequestHeader",(function(t){return function(...e){const[n,r]=e,s=this[ao];return s&&l(n)&&l(r)&&(s.request_headers[n.toLowerCase()]=r),t.apply(this,e)}})),t.apply(this,e)}})),B(t,"send",(function(t){return function(...e){const n=this[ao];if(!n)return t.apply(this,e);void 0!==e[0]&&(n.body=e[0]);return Tr("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),t.apply(this,e)}}))}function lo(t){const e="fetch";Er(e,t),xr(e,po)}function po(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!ws())return!1;if(Es(ks.fetch))return!0;let t=!1;const e=ks.document;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=Es(n.contentWindow.fetch)),e.head.removeChild(n)}catch(t){M&&L.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return t})()&&B(b,"fetch",(function(t){return function(...e){const{method:n,url:r}=function(t){if(0===t.length)return{method:"GET",url:""};if(2===t.length){const[e,n]=t;return{url:fo(e),method:ho(n,"method")?String(n.method).toUpperCase():"GET"}}const e=t[0];return{url:fo(e),method:ho(e,"method")?String(e.method).toUpperCase():"GET"}}(e),s={args:e,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Tr("fetch",{...s}),t.apply(b,e).then((t=>(Tr("fetch",{...s,endTimestamp:Date.now(),response:t}),t)),(t=>{throw Tr("fetch",{...s,endTimestamp:Date.now(),error:t}),t}))}}))}function ho(t,e){return!!t&&"object"==typeof t&&!!t[e]}function fo(t){return"string"==typeof t?t:t?ho(t,"url")?t.url:t.toString?t.toString():"":""}const mo=["fatal","error","warning","log","info","debug"];function go(t){return"warn"===t?"warning":mo.includes(t)?t:"log"}function yo(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}const _o=1024,vo="Breadcrumbs",bo=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:vo,setupOnce(){},setup(t){e.console&&function(t){const e="console";Er(e,t),xr(e,Xs)}(function(t){return function(e){if(De()!==t)return;const n={category:"console",data:{arguments:e.args,logger:"console"},level:go(e.level),message:P(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;n.message=`Assertion failed: ${P(e.args.slice(1)," ")||"console.assert"}`,n.data.arguments=e.args.slice(1)}be(n,{input:e.args,level:e.level})}}(t)),e.dom&&ro(function(t,e){return function(n){if(De()!==t)return;let r,s,o="object"==typeof e?e.serializeAttribute:void 0,i="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;i&&i>_o&&(us&&L.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=_o),"string"==typeof o&&(o=[o]);try{const t=n.event,e=function(t){return!!t&&!!t.target}(t)?t.target:t;r=x(e,{keyAttrs:o,maxStringLength:i}),s=R(e)}catch(t){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};s&&(a.data={"ui.component_name":s}),be(a,{event:n.event,name:n.name,global:n.global})}}(t,e.dom)),e.xhr&&co(function(t){return function(e){if(De()!==t)return;const{startTimestamp:n,endTimestamp:r}=e,s=e.xhr[ao];if(!n||!r||!s)return;const{method:o,url:i,status_code:a,body:c}=s;be({category:"xhr",data:{method:o,url:i,status_code:a},type:"http"},{xhr:e.xhr,input:c,startTimestamp:n,endTimestamp:r})}}(t)),e.fetch&&lo(function(t){return function(e){if(De()!==t)return;const{startTimestamp:n,endTimestamp:r}=e;if(r&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.error){be({category:"fetch",data:e.fetchData,level:"error",type:"http"},{data:e.error,input:e.args,startTimestamp:n,endTimestamp:r})}else{const t=e.response;be({category:"fetch",data:{...e.fetchData,status_code:t&&t.status},type:"http"},{input:e.args,response:t,startTimestamp:n,endTimestamp:r})}}}(t)),e.history&&Ks(function(t){return function(e){if(De()!==t)return;let n=e.from,r=e.to;const s=yo(ss.location.href);let o=n?yo(n):void 0;const i=yo(r);o&&o.path||(o=s),s.protocol===i.protocol&&s.host===i.host&&(r=i.relative),s.protocol===o.protocol&&s.host===o.host&&(n=o.relative),be({category:"navigation",data:{from:n,to:r}})}}(t)),e.sentry&&t.on&&t.on("beforeSendEvent",function(t){return function(e){De()===t&&be({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:Z(e)},{event:e})}}(t))}}},So=We(vo,bo);const ko="Dedupe",wo=()=>{let t;return{name:ko,setupOnce(){},processEvent(e){if(e.type)return e;try{if(function(t,e){if(!e)return!1;if(function(t,e){const n=t.message,r=e.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!To(t,e))return!1;if(!xo(t,e))return!1;return!0}(t,e))return!0;if(function(t,e){const n=Co(e),r=Co(t);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!To(t,e))return!1;if(!xo(t,e))return!1;return!0}(t,e))return!0;return!1}(e,t))return us&&L.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){}return t=e}}},Eo=We(ko,wo);function xo(t,e){let n=Io(t),r=Io(e);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let t=0;t<r.length;t++){const e=r[t],s=n[t];if(e.filename!==s.filename||e.lineno!==s.lineno||e.colno!==s.colno||e.function!==s.function)return!1}return!0}function To(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(t){return!1}}function Co(t){return t.exception&&t.exception.values&&t.exception.values[0]}function Io(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(t){return}}const Ro="GlobalHandlers",Mo=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:Ro,setupOnce(){Error.stackTraceLimit=50},setup(t){e.onerror&&(!function(t){Ir((e=>{const{stackParser:n,attachStacktrace:r}=Lo();if(De()!==t||is())return;const{msg:s,url:o,line:i,column:a,error:u}=e,d=void 0===u&&l(s)?function(t,e,n,r){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let o=c(t)?t.message:t,i="Error";const a=o.match(s);a&&(i=a[1],o=a[2]);const u={exception:{values:[{type:i,value:o}]}};return Ao(u,e,n,r)}(s,o,i,a):Ao(ys(n,u||s,void 0,r,!1),o,i,a);d.level="error",_e(d,{originalException:u,mechanism:{handled:!1,type:"onerror"}})}))}(t),Do("onerror")),e.onunhandledrejection&&(!function(t){Or((e=>{const{stackParser:n,attachStacktrace:r}=Lo();if(De()!==t||is())return;const s=function(t){if(p(t))return t;const e=t;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(t){}return t}(e),o=p(s)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(s)}`}]}}:ys(n,s,void 0,r,!0);o.level="error",_e(o,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(t),Do("onunhandledrejection"))}}},Oo=We(Ro,Mo);function Ao(t,e,n,r){const s=t.exception=t.exception||{},o=s.values=s.values||[],i=o[0]=o[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,d=isNaN(parseInt(n,10))?void 0:n,p=l(e)&&e.length>0?e:C();return 0===c.length&&c.push({colno:u,filename:p,function:"?",in_app:!0,lineno:d}),t}function Do(t){us&&L.log(`Global Handler attached: ${t}`)}function Lo(){const t=De();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const No="HttpContext",Po=()=>({name:No,setupOnce(){},preprocessEvent(t){if(!ss.navigator&&!ss.location&&!ss.document)return;const e=t.request&&t.request.url||ss.location&&ss.location.href,{referrer:n}=ss.document||{},{userAgent:r}=ss.navigator||{},s={...t.request&&t.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},o={...t.request,...e&&{url:e},headers:s};t.request=o}}),$o=We(No,Po),Fo="LinkedErrors",Bo=(t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:Fo,setupOnce(){},preprocessEvent(t,r,s){const o=s.getOptions();rn(ls,o.stackParser,o.maxValueLength,n,e,t,r)}}},jo=We(Fo,Bo),Uo=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ho="TryCatch",zo=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:Ho,setupOnce(){e.setTimeout&&B(ss,"setTimeout",Wo),e.setInterval&&B(ss,"setInterval",Wo),e.requestAnimationFrame&&B(ss,"requestAnimationFrame",Go),e.XMLHttpRequest&&"XMLHttpRequest"in ss&&B(XMLHttpRequest.prototype,"send",Vo);const t=e.eventTarget;if(t){(Array.isArray(t)?t:Uo).forEach(Yo)}}}},qo=We(Ho,zo);function Wo(t){return function(...e){const n=e[0];return e[0]=as(n,{mechanism:{data:{function:ce(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function Go(t){return function(e){return t.apply(this,[as(e,{mechanism:{data:{function:"requestAnimationFrame",handler:ce(t)},handled:!1,type:"instrument"}})])}}function Vo(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((t=>{t in n&&"function"==typeof n[t]&&B(n,t,(function(e){const n={mechanism:{data:{function:t,handler:ce(e)},handled:!1,type:"instrument"}},r=H(e);return r&&(n.mechanism.data.handler=ce(r)),as(e,n)}))})),t.apply(this,e)}}function Yo(t){const e=ss,n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(B(n,"addEventListener",(function(e){return function(n,r,s){try{"function"==typeof r.handleEvent&&(r.handleEvent=as(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:ce(r),target:t},handled:!1,type:"instrument"}}))}catch(t){}return e.apply(this,[n,as(r,{mechanism:{data:{function:"addEventListener",handler:ce(r),target:t},handled:!1,type:"instrument"}}),s])}})),B(n,"removeEventListener",(function(t){return function(e,n,r){const s=n;try{const n=s&&s.__sentry_wrapped__;n&&t.call(this,e,n,r)}catch(t){}return t.call(this,e,s,r)}})))}const Ko=[tn(),Ke(),zo(),bo(),Mo(),Bo(),wo(),Po()];function Jo(t){return[...Ko]}function Xo(t={}){void 0===t.defaultIntegrations&&(t.defaultIntegrations=Jo()),void 0===t.release&&("string"==typeof __SENTRY_RELEASE__&&(t.release=__SENTRY_RELEASE__),ss.SENTRY_RELEASE&&ss.SENTRY_RELEASE.id&&(t.release=ss.SENTRY_RELEASE.id)),void 0===t.autoSessionTracking&&(t.autoSessionTracking=!0),void 0===t.sendClientReports&&(t.sendClientReports=!0);const e={...t,stackParser:(n=t.stackParser||qs,Array.isArray(n)?ie(...n):n),integrations:Ue(t),transport:t.transport||(ws()?Ts:Is)};var n;!function(t,e){!0===e.debug&&(K?L.enable():D((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),Ne().update(e.initialScope);const n=new t(e);Mn(n),function(t){t.init?t.init():t.setupIntegrations&&t.setupIntegrations()}(n)}(Ss,e),t.autoSessionTracking&&function(){if(void 0===ss.document)return void(us&&L.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));Pe({ignoreDuration:!0}),Be(),Ks((({from:t,to:e})=>{void 0!==t&&t!==e&&(Pe({ignoreDuration:!0}),Be())}))}()}const Zo=(t={},e=Jt())=>{if(!ss.document)return void(us&&L.error("Global document not defined in showReportDialog call"));const{client:n,scope:r}=e.getStackTop(),s=t.dsn||n&&n.getDsn();if(!s)return void(us&&L.error("DSN not configured for showReportDialog call"));r&&(t.user={...r.getUser(),...t.user}),t.eventId||(t.eventId=e.lastEventId());const o=ss.document.createElement("script");o.async=!0,o.crossOrigin="anonymous",o.src=function(t,e){const n=Pn(t);if(!n)return"";const r=`${cr(n)}embed/error-page/`;let s=`dsn=${Dn(n)}`;for(const t in e)if("dsn"!==t&&"onClose"!==t)if("user"===t){const t=e.user;if(!t)continue;t.name&&(s+=`&name=${encodeURIComponent(t.name)}`),t.email&&(s+=`&email=${encodeURIComponent(t.email)}`)}else s+=`&${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`;return`${r}?${s}`}(s,t),t.onLoad&&(o.onload=t.onLoad);const{onClose:i}=t;if(i){const t=e=>{if("__sentry_reportdialog_closed__"===e.data)try{i()}finally{ss.removeEventListener("message",t)}};ss.addEventListener("message",t)}const a=ss.document.head||ss.document.body;a?a.appendChild(o):us&&L.error("Not injecting report dialog. No injection point found in HTML")};function Qo(){}function ti(t){t()}function ei(t){return as(t)()}function ni(t){const e=De();e&&e.captureUserFeedback(t)}function ri(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}return n}function si(t,e){const n=e&&function(t){return void 0!==t.getClient}(e)?e.getClient():e,r=n&&n.getDsn(),s=n&&n.getOptions().tunnel;return function(t,e){return!!e&&t.includes(e.host)}(t,r)||function(t,e){if(!e)return!1;return oi(t)===oi(e)}(t,s)}function oi(t){return"/"===t[t.length-1]?t.slice(0,-1):t}var ii=n(305);function ai(){return"undefined"!=typeof window&&(!(0,ii.KV)()||void 0!==b.process&&"renderer"===b.process.type)}const ci="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ui=(t,e,n)=>{let r,s;return o=>{e.value>=0&&(o||n)&&(s=e.value-(r||0),(s||void 0===r)&&(r=e.value,e.delta=s,t(e)))}},li=b,di=()=>li.__WEB_VITALS_POLYFILL__?li.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const t=li.performance.timing,e=li.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==e?"back_forward":1===e?"reload":"navigate"};for(const e in t)"navigationStart"!==e&&"toJSON"!==e&&(n[e]=Math.max(t[e]-t.navigationStart,0));return n})()):li.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],pi=()=>{const t=di();return t&&t.activationStart||0},hi=(t,e)=>{const n=di();let r="navigate";return n&&(r=li.document.prerendering||pi()>0?"prerender":n.type.replace(/_/g,"-")),{name:t,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},fi=(t,e,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver((t=>{e(t.getEntries())}));return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch(t){}},mi=(t,e)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==li.document.visibilityState||(t(r),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},gi=t=>{const e=hi("CLS",0);let n,r=0,s=[];const o=t=>{t.forEach((t=>{if(!t.hadRecentInput){const o=s[0],i=s[s.length-1];r&&0!==s.length&&t.startTime-i.startTime<1e3&&t.startTime-o.startTime<5e3?(r+=t.value,s.push(t)):(r=t.value,s=[t]),r>e.value&&(e.value=r,e.entries=s,n&&n())}}))},i=fi("layout-shift",o);if(i){n=ui(t,e);const r=()=>{o(i.takeRecords()),n(!0)};return mi(r),r}};let yi=-1;const _i=()=>(yi<0&&(yi="hidden"!==li.document.visibilityState||li.document.prerendering?1/0:0,mi((({timeStamp:t})=>{yi=t}),!0)),{get firstHiddenTime(){return yi}}),vi=t=>{const e=_i(),n=hi("FID");let r;const s=t=>{t.startTime<e.firstHiddenTime&&(n.value=t.processingStart-t.startTime,n.entries.push(t),r(!0))},o=t=>{t.forEach(s)},i=fi("first-input",o);r=ui(t,n),i&&mi((()=>{o(i.takeRecords()),i.disconnect()}),!0)},bi={},Si=t=>{const e=_i(),n=hi("LCP");let r;const s=t=>{const s=t[t.length-1];if(s){const t=Math.max(s.startTime-pi(),0);t<e.firstHiddenTime&&(n.value=t,n.entries=[s],r())}},o=fi("largest-contentful-paint",s);if(o){r=ui(t,n);const e=()=>{bi[n.id]||(s(o.takeRecords()),o.disconnect(),bi[n.id]=!0,r(!0))};return["keydown","click"].forEach((t=>{addEventListener(t,e,{once:!0,capture:!0})})),mi(e,!0),e}},ki={},wi={};let Ei,xi,Ti;function Ci(t,e=!1){return Di("lcp",t,Ai,Ti,e)}function Ii(t,e){return Li(t,e),wi[t]||(!function(t){const e={};"event"===t&&(e.durationThreshold=0);fi(t,(e=>{Ri(t,{entries:e})}),e)}(t),wi[t]=!0),Ni(t,e)}function Ri(t,e){const n=ki[t];if(n&&n.length)for(const r of n)try{r(e)}catch(e){ci&&L.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${ce(r)}\nError:`,e)}}function Mi(){return gi((t=>{Ri("cls",{metric:t}),Ei=t}))}function Oi(){return vi((t=>{Ri("fid",{metric:t}),xi=t}))}function Ai(){return Si((t=>{Ri("lcp",{metric:t}),Ti=t}))}function Di(t,e,n,r,s=!1){let o;return Li(t,e),wi[t]||(o=n(),wi[t]=!0),r&&e({metric:r}),Ni(t,e,s?o:void 0)}function Li(t,e){ki[t]=ki[t]||[],ki[t].push(e)}function Ni(t,e,n){return()=>{n&&n();const r=ki[t];if(!r)return;const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}const Pi=b,$i="sentryReplaySession",Fi="replay_event",Bi="Unable to send Replay",ji=15e4,Ui=5e3,Hi=2e7,zi=36e5;function qi(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}return n}var Wi;function Gi(t){const e=qi([t,"optionalAccess",t=>t.host]);return Boolean(qi([e,"optionalAccess",t=>t.shadowRoot])===t)}function Vi(t){return"[object ShadowRoot]"===Object.prototype.toString.call(t)}function Yi(t){try{const n=t.rules||t.cssRules;return n?((e=Array.from(n,Ki).join("")).includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e):null}catch(t){return null}var e}function Ki(t){let e;if(function(t){return"styleSheet"in t}(t))try{e=Yi(t.styleSheet)||function(t){const{cssText:e}=t;if(e.split('"').length<3)return e;const n=["@import",`url(${JSON.stringify(t.href)})`];return""===t.layerName?n.push("layer"):t.layerName&&n.push(`layer(${t.layerName})`),t.supportsText&&n.push(`supports(${t.supportsText})`),t.media.length&&n.push(t.media.mediaText),n.join(" ")+";"}(t)}catch(t){}else if(function(t){return"selectorText"in t}(t)&&t.selectorText.includes(":"))return function(t){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}(t.cssText);return e||t.cssText}!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(Wi||(Wi={}));class Ji{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){if(!t)return-1;const e=qi([this,"access",t=>t.getMeta,"call",e=>e(t),"optionalAccess",t=>t.id]);return r=()=>-1,null!=(n=e)?n:r();var n,r}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const e=this.getId(t);this.idNodeMap.delete(e),t.childNodes&&t.childNodes.forEach((t=>this.removeNodeFromMap(t)))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,e){const n=e.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,e)}replace(t,e){const n=this.getNode(t);if(n){const t=this.nodeMetaMap.get(n);t&&this.nodeMetaMap.set(e,t)}this.idNodeMap.set(t,e)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Xi({maskInputOptions:t,tagName:e,type:n}){return"OPTION"===e&&(e="SELECT"),Boolean(t[e.toLowerCase()]||n&&t[n]||"password"===n||"INPUT"===e&&!n&&t.text)}function Zi({isMasked:t,element:e,value:n,maskInputFn:r}){let s=n||"";return t?(r&&(s=r(s,e)),"*".repeat(s.length)):s}function Qi(t){return t.toLowerCase()}function ta(t){return t.toUpperCase()}const ea="__rrweb_original__";function na(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?Qi(e):null}function ra(t,e,n){return"INPUT"!==e||"radio"!==n&&"checkbox"!==n?t.value:t.getAttribute("value")||""}let sa=1;const oa=new RegExp("[^a-z0-9-_:]"),ia=-2;function aa(){return sa++}let ca,ua;const la=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,da=/^(?:[a-z+]+:)?\/\//i,pa=/^www\..*/i,ha=/^(data:)([^,]*),(.*)/i;function fa(t,e){return(t||"").replace(la,((t,n,r,s,o,i)=>{const a=r||o||i,c=n||s||"";if(!a)return t;if(da.test(a)||pa.test(a))return`url(${c}${a}${c})`;if(ha.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(t){let e="";return e=t.indexOf("//")>-1?t.split("/").slice(0,3).join("/"):t.split("/")[0],e=e.split("?")[0],e}(e)+a}${c})`;const u=e.split("/"),l=a.split("/");u.pop();for(const t of l)"."!==t&&(".."===t?u.pop():u.push(t));return`url(${c}${u.join("/")}${c})`}))}const ma=/^[^ \t\n\r\u000c]+/,ga=/^[, \t\n\r\u000c]+/;function ya(t,e){if(!e||""===e.trim())return e;const n=t.createElement("a");return n.href=e,n.href}function _a(t){return Boolean("svg"===t.tagName||t.ownerSVGElement)}function va(){const t=document.createElement("a");return t.href="",t.href}function ba(t,e,n,r,s,o){return r?"src"===n||"href"===n&&("use"!==e||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?ya(t,r):"background"!==n||"table"!==e&&"td"!==e&&"th"!==e?"srcset"===n?function(t,e){if(""===e.trim())return e;let n=0;function r(t){let r;const s=t.exec(e.substring(n));return s?(r=s[0],n+=r.length,r):""}const s=[];for(;r(ga),!(n>=e.length);){let o=r(ma);if(","===o.slice(-1))o=ya(t,o.substring(0,o.length-1)),s.push(o);else{let r="";o=ya(t,o);let i=!1;for(;;){const t=e.charAt(n);if(""===t){s.push((o+r).trim());break}if(i)")"===t&&(i=!1);else{if(","===t){n+=1,s.push((o+r).trim());break}"("===t&&(i=!0)}r+=t,n+=1}}}return s.join(", ")}(t,r):"style"===n?fa(r,va()):"object"===e&&"data"===n?ya(t,r):"function"==typeof o?o(n,r,s):r:ya(t,r):r}function Sa(t,e,n){return("video"===t||"audio"===t)&&"autoplay"===e}function ka(t,e,n=1/0,r=0){return t?t.nodeType!==t.ELEMENT_NODE||r>n?-1:e(t)?r:ka(t.parentNode,e,n,r+1):-1}function wa(t,e){return n=>{const r=n;if(null===r)return!1;try{if(t)if("string"==typeof t){if(r.matches(`.${t}`))return!0}else if(function(t,e){for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}return!1}(r,t))return!0;return!(!e||!r.matches(e))}catch(t){return!1}}}function Ea(t,e,n,r,s,o){try{const i=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(null===i)return!1;let a=-1,c=-1;if(o){if(c=ka(i,wa(r,s)),c<0)return!0;a=ka(i,wa(e,n),c>=0?c:1/0)}else{if(a=ka(i,wa(e,n)),a<0)return!1;c=ka(i,wa(r,s),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0)&&!!o}catch(t){}return!!o}function xa(t,e){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S=!1}=e,k=function(t,e){if(!e.hasNode(t))return;const n=e.getId(t);return 1===n?void 0:n}(n,r);switch(t.nodeType){case t.DOCUMENT_NODE:return"CSS1Compat"!==t.compatMode?{type:Wi.Document,childNodes:[],compatMode:t.compatMode}:{type:Wi.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:Wi.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:k};case t.ELEMENT_NODE:return function(t,e){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:o,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:h,newlyAddedElement:f=!1,rootId:m,maskAllText:g,maskTextClass:y,unmaskTextClass:_,maskTextSelector:v,unmaskTextSelector:b}=e,S=function(t,e,n,r){try{if(r&&t.matches(r))return!1;if("string"==typeof e){if(t.classList.contains(e))return!0}else for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}if(n)return t.matches(n)}catch(t){}return!1}(t,r,s,o),k=function(t){if(t instanceof HTMLFormElement)return"form";const e=Qi(t.tagName);return oa.test(e)?"div":e}(t);let w={};const E=t.attributes.length;for(let e=0;e<E;e++){const r=t.attributes[e];Sa(k,r.name,r.value)||(w[r.name]=ba(n,k,Qi(r.name),r.value,t,c))}if("link"===k&&i){const e=Array.from(n.styleSheets).find((e=>e.href===t.href));let r=null;e&&(r=Yi(e)),r&&(delete w.rel,delete w.href,w._cssText=fa(r,e.href))}if("style"===k&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const e=Yi(t.sheet);e&&(w._cssText=fa(e,va()))}if("input"===k||"textarea"===k||"select"===k||"option"===k){const e=t,n=na(e),r=ra(e,ta(k),n),s=e.checked;if("submit"!==n&&"button"!==n&&r){const t=Ea(e,y,v,_,b,Xi({type:n,tagName:ta(k),maskInputOptions:a}));w.value=Zi({isMasked:t,element:e,value:r,maskInputFn:u})}s&&(w.checked=s)}"option"===k&&(t.selected&&!a.select?w.selected=!0:delete w.selected);if("canvas"===k&&p)if("2d"===t.__context)(function(t){const e=t.getContext("2d");if(!e)return!0;for(let n=0;n<t.width;n+=50)for(let r=0;r<t.height;r+=50){const s=e.getImageData,o=ea in s?s[ea]:s;if(new Uint32Array(o.call(e,n,r,Math.min(50,t.width-n),Math.min(50,t.height-r)).data.buffer).some((t=>0!==t)))return!1}return!0})(t)||(w.rr_dataURL=t.toDataURL(l.type,l.quality));else if(!("__context"in t)){const e=t.toDataURL(l.type,l.quality),n=document.createElement("canvas");n.width=t.width,n.height=t.height;e!==n.toDataURL(l.type,l.quality)&&(w.rr_dataURL=e)}if("img"===k&&d){ca||(ca=n.createElement("canvas"),ua=ca.getContext("2d"));const e=t,r=e.crossOrigin;e.crossOrigin="anonymous";const s=()=>{e.removeEventListener("load",s);try{ca.width=e.naturalWidth,ca.height=e.naturalHeight,ua.drawImage(e,0,0),w.rr_dataURL=ca.toDataURL(l.type,l.quality)}catch(t){console.warn(`Cannot inline img src=${e.currentSrc}! Error: ${t}`)}r?w.crossOrigin=r:e.removeAttribute("crossorigin")};e.complete&&0!==e.naturalWidth?s():e.addEventListener("load",s)}"audio"!==k&&"video"!==k||(w.rr_mediaState=t.paused?"paused":"played",w.rr_mediaCurrentTime=t.currentTime);f||(t.scrollLeft&&(w.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(w.rr_scrollTop=t.scrollTop));if(S){const{width:e,height:n}=t.getBoundingClientRect();w={class:w.class,rr_width:`${e}px`,rr_height:`${n}px`}}"iframe"!==k||h(w.src)||(t.contentDocument||(w.rr_src=w.src),delete w.src);let x;try{customElements.get(k)&&(x=!0)}catch(t){}return{type:Wi.Element,tagName:k,attributes:w,childNodes:[],isSVG:_a(t)||void 0,needBlock:S,rootId:m,isCustom:x}}(t,{doc:n,blockClass:s,blockSelector:o,unblockSelector:i,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:f,maskInputFn:g,dataURLOptions:y,inlineImages:_,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S,rootId:k,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p});case t.TEXT_NODE:return function(t,e){const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:o,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=e,d=t.parentNode&&t.parentNode.tagName;let p=t.textContent;const h="STYLE"===d||void 0,f="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(h&&p){try{t.nextSibling||t.previousSibling||qi([t,"access",t=>t.parentNode,"access",t=>t.sheet,"optionalAccess",t=>t.cssRules])&&(p=Yi(t.parentNode.sheet))}catch(e){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${e}`,t)}p=fa(p,va())}f&&(p="SCRIPT_PLACEHOLDER");const g=Ea(t,r,o,s,i,n);h||f||m||!p||!g||(p=a?a(p):p.replace(/[\S]/g,"*"));m&&p&&(c.textarea||g)&&(p=u?u(p,t.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=Zi({isMasked:Ea(t,r,o,s,i,Xi({type:null,tagName:d,maskInputOptions:c})),element:t,value:p,maskInputFn:u})}return{type:Wi.Text,textContent:p||"",isStyle:h,rootId:l}}(t,{maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:k});case t.CDATA_SECTION_NODE:return{type:Wi.CDATA,textContent:"",rootId:k};case t.COMMENT_NODE:return{type:Wi.Comment,textContent:t.textContent||"",rootId:k};default:return!1}}function Ta(t){return null==t?"":t.toLowerCase()}function Ca(t,e){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v={},inlineImages:b=!1,recordCanvas:S=!1,onSerialize:k,onIframeLoad:w,iframeLoadTimeout:E=5e3,onStylesheetLoad:x,stylesheetLoadTimeout:T=5e3,keepIframeSrcFn:C=(()=>!1),newlyAddedElement:I=!1}=e;let{preserveWhiteSpace:R=!0}=e;const M=xa(t,{doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,keepIframeSrcFn:C,newlyAddedElement:I});if(!M)return console.warn(t,"not serialized"),null;let O;O=r.hasNode(t)?r.getId(t):!function(t,e){if(e.comment&&t.type===Wi.Comment)return!0;if(t.type===Wi.Element){if(e.script&&("script"===t.tagName||"link"===t.tagName&&("preload"===t.attributes.rel||"modulepreload"===t.attributes.rel)&&"script"===t.attributes.as||"link"===t.tagName&&"prefetch"===t.attributes.rel&&"string"==typeof t.attributes.href&&t.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(Ta(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Ta(t.attributes.name)||"icon"===Ta(t.attributes.rel)||"apple-touch-icon"===Ta(t.attributes.rel)||"shortcut icon"===Ta(t.attributes.rel))))return!0;if("meta"===t.tagName){if(e.headMetaDescKeywords&&Ta(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(Ta(t.attributes.property).match(/^(og|twitter|fb):/)||Ta(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===Ta(t.attributes.name)))return!0;if(e.headMetaRobots&&("robots"===Ta(t.attributes.name)||"googlebot"===Ta(t.attributes.name)||"bingbot"===Ta(t.attributes.name)))return!0;if(e.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(e.headMetaAuthorship&&("author"===Ta(t.attributes.name)||"generator"===Ta(t.attributes.name)||"framework"===Ta(t.attributes.name)||"publisher"===Ta(t.attributes.name)||"progid"===Ta(t.attributes.name)||Ta(t.attributes.property).match(/^article:/)||Ta(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&("google-site-verification"===Ta(t.attributes.name)||"yandex-verification"===Ta(t.attributes.name)||"csrf-token"===Ta(t.attributes.name)||"p:domain_verify"===Ta(t.attributes.name)||"verify-v1"===Ta(t.attributes.name)||"verification"===Ta(t.attributes.name)||"shopify-checkout-api-token"===Ta(t.attributes.name)))return!0}}return!1}(M,_)&&(R||M.type!==Wi.Text||M.isStyle||M.textContent.replace(/^\s+|\s+$/gm,"").length)?aa():ia;const A=Object.assign(M,{id:O});if(r.add(t,A),O===ia)return null;k&&k(t);let D=!p;if(A.type===Wi.Element){D=D&&!A.needBlock,delete A.needBlock;const e=t.shadowRoot;e&&Vi(e)&&(A.isShadowHost=!0)}if((A.type===Wi.Document||A.type===Wi.Element)&&D){_.headWhitespace&&A.type===Wi.Element&&"head"===A.tagName&&(R=!1);const e={doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:k,onIframeLoad:w,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:T,keepIframeSrcFn:C};for(const n of Array.from(t.childNodes)){const t=Ca(n,e);t&&A.childNodes.push(t)}if(function(t){return t.nodeType===t.ELEMENT_NODE}(t)&&t.shadowRoot)for(const n of Array.from(t.shadowRoot.childNodes)){const r=Ca(n,e);r&&(Vi(t.shadowRoot)&&(r.isShadow=!0),A.childNodes.push(r))}}return t.parentNode&&Gi(t.parentNode)&&Vi(t.parentNode)&&(A.isShadow=!0),A.type===Wi.Element&&"iframe"===A.tagName&&function(t,e,n){const r=t.contentWindow;if(!r)return;let s,o=!1;try{s=r.document.readyState}catch(t){return}if("complete"!==s){const r=setTimeout((()=>{o||(e(),o=!0)}),n);return void t.addEventListener("load",(()=>{clearTimeout(r),o=!0,e()}))}const i="about:blank";if(r.location.href!==i||t.src===i||""===t.src)return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}(t,(()=>{const e=t.contentDocument;if(e&&w){const n=Ca(e,{doc:e,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:k,onIframeLoad:w,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:T,keepIframeSrcFn:C});n&&w(t,n)}}),E),A.type===Wi.Element&&"link"===A.tagName&&"stylesheet"===A.attributes.rel&&function(t,e,n){let r,s=!1;try{r=t.sheet}catch(t){return}if(r)return;const o=setTimeout((()=>{s||(e(),s=!0)}),n);t.addEventListener("load",(()=>{clearTimeout(o),s=!0,e()}))}(t,(()=>{if(x){const e=Ca(t,{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:R,onSerialize:k,onIframeLoad:w,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:T,keepIframeSrcFn:C});e&&x(t,e)}}),T),A}function Ia(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}return n}function Ra(t,e,n=document){const r={capture:!0,passive:!0};return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}const Ma="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Oa={map:{},getId(){return console.error(Ma),-1},getNode(){return console.error(Ma),null},removeNodeFromMap(){console.error(Ma)},has(){return console.error(Ma),!1},reset(){console.error(Ma)}};function Aa(t,e,n={}){let r=null,s=0;return function(...o){const i=Date.now();s||!1!==n.leading||(s=i);const a=e-(i-s),c=this;a<=0||a>e?(r&&(clearTimeout(r),r=null),s=i,t.apply(c,o)):r||!1===n.trailing||(r=setTimeout((()=>{s=!1===n.leading?0:Date.now(),r=null,t.apply(c,o)}),a))}}function Da(t,e,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(t,e);return s.Object.defineProperty(t,e,r?n:{set(t){setTimeout((()=>{n.set.call(this,t)}),0),o&&o.set&&o.set.call(this,t)}}),()=>Da(t,e,o||{},!0)}function La(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],s=n(r);return"function"==typeof s&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=s,()=>{t[e]=r}}catch(t){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Oa=new Proxy(Oa,{get(t,e,n){return"map"===e&&console.error(Ma),Reflect.get(t,e,n)}}));let Na,Pa=Date.now;function $a(t){const e=t.document;return{left:e.scrollingElement?e.scrollingElement.scrollLeft:void 0!==t.pageXOffset?t.pageXOffset:Ia([e,"optionalAccess",t=>t.documentElement,"access",t=>t.scrollLeft])||Ia([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.parentElement,"optionalAccess",t=>t.scrollLeft])||Ia([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.scrollLeft])||0,top:e.scrollingElement?e.scrollingElement.scrollTop:void 0!==t.pageYOffset?t.pageYOffset:Ia([e,"optionalAccess",t=>t.documentElement,"access",t=>t.scrollTop])||Ia([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.parentElement,"optionalAccess",t=>t.scrollTop])||Ia([e,"optionalAccess",t=>t.body,"optionalAccess",t=>t.scrollTop])||0}}function Fa(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Ba(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ja(t,e,n,r,s){if(!t)return!1;const o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(!o)return!1;const i=wa(e,n);if(!s){const t=r&&o.matches(r);return i(o)&&!t}const a=ka(o,i);let c=-1;return!(a<0)&&(r&&(c=ka(o,wa(null,r))),a>-1&&c<0||a<c)}function Ua(t,e){return e.getId(t)===ia}function Ha(t,e){if(Gi(t))return!1;const n=e.getId(t);return!e.has(n)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||Ha(t.parentNode,e))}function za(t){return Boolean(t.changedTouches)}function qa(t,e){return Boolean("IFRAME"===t.nodeName&&e.getMeta(t))}function Wa(t,e){return Boolean("LINK"===t.nodeName&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&"stylesheet"===t.getAttribute("rel")&&e.getMeta(t))}function Ga(t){return Boolean(Ia([t,"optionalAccess",t=>t.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Pa=()=>(new Date).getTime());class Va{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return e=this.styleIDMap.get(t),n=()=>-1,null!=e?e:n();var e,n}has(t){return this.styleIDMap.has(t)}add(t,e){if(this.has(t))return this.getId(t);let n;return n=void 0===e?this.id++:e,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Ya(t){let e=null;return Ia([t,"access",t=>t.getRootNode,"optionalCall",t=>t(),"optionalAccess",t=>t.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(e=t.getRootNode().host),e}function Ka(t){const e=t.ownerDocument;if(!e)return!1;const n=function(t){let e,n=t;for(;e=Ya(n);)n=e;return n}(t);return e.contains(n)}function Ja(t){const e=t.ownerDocument;return!!e&&(e.contains(t)||Ka(t))}function Xa(...t){return function(){if(Na)return Na;const t=window.document;let e=window.requestAnimationFrame;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const r=n.contentWindow;r&&r.requestAnimationFrame&&(e=r.requestAnimationFrame),t.head.removeChild(n)}catch(t){}return Na=e.bind(window)}()(...t)}var Za=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Za||{}),Qa=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(Qa||{}),tc=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(tc||{}),ec=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(ec||{});function nc(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}return n}function rc(t){return"__ln"in t}class sc{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let e=this.head;for(let n=0;n<t;n++)e=nc([e,"optionalAccess",t=>t.next])||null;return e}addNode(t){const e={value:t,previous:null,next:null};if(t.__ln=e,t.previousSibling&&rc(t.previousSibling)){const n=t.previousSibling.__ln.next;e.next=n,e.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=e,n&&(n.previous=e)}else if(t.nextSibling&&rc(t.nextSibling)&&t.nextSibling.__ln.previous){const n=t.nextSibling.__ln.previous;e.previous=n,e.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=e,n&&(n.next=e)}else this.head&&(this.head.previous=e),e.next=this.head,this.head=e;null===e.next&&(this.tail=e),this.length++}removeNode(t){const e=t.__ln;this.head&&(e.previous?(e.previous.next=e.next,e.next?e.next.previous=e.previous:this.tail=e.previous):(this.head=e.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const oc=(t,e)=>`${t}@${e}`;class ic{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],e=new Set,n=new sc,r=t=>{let e=t,n=ia;for(;n===ia;)e=e&&e.nextSibling,n=e&&this.mirror.getId(e);return n},s=s=>{if(!s.parentNode||!Ja(s))return;const o=Gi(s.parentNode)?this.mirror.getId(Ya(s)):this.mirror.getId(s.parentNode),i=r(s);if(-1===o||-1===i)return n.addNode(s);const a=Ca(s,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:t=>{qa(t,this.mirror)&&this.iframeManager.addIframe(t),Wa(t,this.mirror)&&this.stylesheetManager.trackLinkElement(t),Ga(s)&&this.shadowDomManager.addShadowRoot(s.shadowRoot,this.doc)},onIframeLoad:(t,e)=>{this.iframeManager.attachIframe(t,e),this.shadowDomManager.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{this.stylesheetManager.attachLinkElement(t,e)}});a&&(t.push({parentId:o,nextId:i,node:a}),e.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const t of this.movedSet)cc(this.removes,t,this.mirror)&&!this.movedSet.has(t.parentNode)||s(t);for(const t of this.addedSet)lc(this.droppedSet,t)||cc(this.removes,t,this.mirror)?lc(this.movedSet,t)?s(t):this.droppedSet.add(t):s(t);let o=null;for(;n.length;){let t=null;if(o){const e=this.mirror.getId(o.value.parentNode),n=r(o.value);-1!==e&&-1!==n&&(t=o)}if(!t){let e=n.tail;for(;e;){const n=e;if(e=e.previous,n){const e=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==e){t=n;break}{const e=n.value;if(e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=e.parentNode.host;if(-1!==this.mirror.getId(r)){t=n;break}}}}}}if(!t){for(;n.head;)n.removeNode(n.head.value);break}o=t.previous,n.removeNode(t.value),s(t.value)}const i={texts:this.texts.map((t=>({id:this.mirror.getId(t.node),value:t.value}))).filter((t=>!e.has(t.id))).filter((t=>this.mirror.has(t.id))),attributes:this.attributes.map((t=>{const{attributes:e}=t;if("string"==typeof e.style){const n=JSON.stringify(t.styleDiff),r=JSON.stringify(t._unchangedStyles);n.length<e.style.length&&(n+r).split("var(").length===e.style.split("var(").length&&(e.style=t.styleDiff)}return{id:this.mirror.getId(t.node),attributes:e}})).filter((t=>!e.has(t.id))).filter((t=>this.mirror.has(t.id))),removes:this.removes,adds:t};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=t=>{if(Ua(t.target,this.mirror))return;let e;try{e=document.implementation.createHTMLDocument()}catch(t){e=this.doc}switch(t.type){case"characterData":{const e=t.target.textContent;ja(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||e===t.oldValue||this.texts.push({value:Ea(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&e?this.maskTextFn?this.maskTextFn(e):e.replace(/[\S]/g,"*"):e,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,s=t.target.getAttribute(r);if("value"===r){const e=na(n),r=n.tagName;s=ra(n,r,e);const o=Xi({maskInputOptions:this.maskInputOptions,tagName:r,type:e});s=Zi({isMasked:Ea(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,o),element:n,value:s,maskInputFn:this.maskInputFn})}if(ja(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===t.oldValue)return;let o=this.attributes.find((e=>e.node===t.target));if("IFRAME"===n.tagName&&"src"===r&&!this.keepIframeSrcFn(s)){if(n.contentDocument)return;r="rr_src"}if(o||(o={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o)),"type"===r&&"INPUT"===n.tagName&&"password"===(t.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!Sa(n.tagName,r)&&(o.attributes[r]=ba(this.doc,Qi(n.tagName),Qi(r),s,n,this.maskAttributeFn),"style"===r)){const r=e.createElement("span");t.oldValue&&r.setAttribute("style",t.oldValue);for(const t of Array.from(n.style)){const e=n.style.getPropertyValue(t),s=n.style.getPropertyPriority(t);e!==r.style.getPropertyValue(t)||s!==r.style.getPropertyPriority(t)?o.styleDiff[t]=""===s?e:[e,s]:o._unchangedStyles[t]=[e,s]}for(const t of Array.from(r.style))""===n.style.getPropertyValue(t)&&(o.styleDiff[t]=!1)}break}case"childList":if(ja(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach((e=>this.genAdds(e,t.target))),t.removedNodes.forEach((e=>{const n=this.mirror.getId(e),r=Gi(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);ja(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Ua(e,this.mirror)||!function(t,e){return-1!==e.getId(t)}(e,this.mirror)||(this.addedSet.has(e)?(ac(this.addedSet,e),this.droppedSet.add(e)):this.addedSet.has(t.target)&&-1===n||Ha(t.target,this.mirror)||(this.movedSet.has(e)&&this.movedMap[oc(n,r)]?ac(this.movedSet,e):this.removes.push({parentId:r,id:n,isShadow:!(!Gi(t.target)||!Vi(t.target))||void 0})),this.mapRemoves.push(e))}))}},this.genAdds=(t,e)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!this.addedSet.has(t)&&!this.movedSet.has(t)){if(this.mirror.hasNode(t)){if(Ua(t,this.mirror))return;this.movedSet.add(t);let n=null;e&&this.mirror.hasNode(e)&&(n=this.mirror.getId(e)),n&&-1!==n&&(this.movedMap[oc(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);ja(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach((t=>this.genAdds(t))),Ga(t)&&t.shadowRoot.childNodes.forEach((e=>{this.processedNodeManager.add(e,this),this.genAdds(e,t)})))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((e=>{this[e]=t[e]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ac(t,e){t.delete(e),e.childNodes.forEach((e=>ac(t,e)))}function cc(t,e,n){return 0!==t.length&&uc(t,e,n)}function uc(t,e,n){const{parentNode:r}=e;if(!r)return!1;const s=n.getId(r);return!!t.some((t=>t.id===s))||uc(t,r,n)}function lc(t,e){return 0!==t.size&&dc(t,e)}function dc(t,e){const{parentNode:n}=e;return!!n&&(!!t.has(n)||dc(t,n))}let pc;function hc(t){pc=t}function fc(){pc=void 0}const mc=t=>{if(!pc)return t;return(...e)=>{try{return t(...e)}catch(t){if(pc&&!0===pc(t))return()=>{};throw t}}};function gc(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}return n}const yc=[];function _c(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch(t){}return t&&t.target}function vc(t,e){const n=new ic;yc.push(n),n.init(t);let r=window.MutationObserver||window.__rrMutationObserver;const s=gc([window,"optionalAccess",t=>t.Zone,"optionalAccess",t=>t.__symbol__,"optionalCall",t=>t("MutationObserver")]);s&&window[s]&&(r=window[s]);const o=new r(mc((e=>{t.onMutation&&!1===t.onMutation(e)||n.processMutations.bind(n)(e)})));return o.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function bc({mouseInteractionCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,c=[];let u=null;return Object.keys(tc).filter((t=>Number.isNaN(Number(t))&&!t.endsWith("_Departed")&&!1!==a[t])).forEach((i=>{let a=Qi(i);const l=(e=>i=>{const a=_c(i);if(ja(a,r,s,o,!0))return;let c=null,l=e;if("pointerType"in i){switch(i.pointerType){case"mouse":c=ec.Mouse;break;case"touch":c=ec.Touch;break;case"pen":c=ec.Pen}c===ec.Touch?tc[e]===tc.MouseDown?l="TouchStart":tc[e]===tc.MouseUp&&(l="TouchEnd"):ec.Pen}else za(i)&&(c=ec.Touch);null!==c?(u=c,(l.startsWith("Touch")&&c===ec.Touch||l.startsWith("Mouse")&&c===ec.Mouse)&&(c=null)):tc[e]===tc.Click&&(c=u,u=null);const d=za(i)?i.changedTouches[0]:i;if(!d)return;const p=n.getId(a),{clientX:h,clientY:f}=d;mc(t)({type:tc[l],id:p,x:h,y:f,...null!==c&&{pointerType:c}})})(i);if(window.PointerEvent)switch(tc[i]){case tc.MouseDown:case tc.MouseUp:a=a.replace("mouse","pointer");break;case tc.TouchStart:case tc.TouchEnd:return}c.push(Ra(a,l,e))})),mc((()=>{c.forEach((t=>t()))}))}function Sc({scrollCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){return Ra("scroll",mc(Aa(mc((i=>{const a=_c(i);if(!a||ja(a,r,s,o,!0))return;const c=n.getId(a);if(a===e&&e.defaultView){const n=$a(e.defaultView);t({id:c,x:n.left,y:n.top})}else t({id:c,x:a.scrollLeft,y:a.scrollTop})})),i.scroll||100)),e)}const kc=["INPUT","TEXTAREA","SELECT"],wc=new WeakMap;function Ec({inputCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:h,maskTextSelector:f,unmaskTextSelector:m}){function g(t){let n=_c(t);const l=t.isTrusted,g=n&&ta(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||kc.indexOf(g)<0||ja(n,r,s,o,!0))return;const _=n;if(_.classList.contains(i)||a&&_.matches(a))return;const v=na(n);let b=ra(_,g,v),S=!1;const k=Xi({maskInputOptions:c,tagName:g,type:v}),w=Ea(n,p,f,h,m,k);"radio"!==v&&"checkbox"!==v||(S=n.checked),b=Zi({isMasked:w,element:n,value:b,maskInputFn:u}),y(n,d?{text:b,isChecked:S,userTriggered:l}:{text:b,isChecked:S});const E=n.name;"radio"===v&&E&&S&&e.querySelectorAll(`input[type="radio"][name="${E}"]`).forEach((t=>{if(t!==n){const e=Zi({isMasked:w,element:t,value:ra(t,g,v),maskInputFn:u});y(t,d?{text:e,isChecked:!S,userTriggered:!1}:{text:e,isChecked:!S})}}))}function y(e,r){const s=wc.get(e);if(!s||s.text!==r.text||s.isChecked!==r.isChecked){wc.set(e,r);const s=n.getId(e);mc(t)({...r,id:s})}}const _=("last"===l.input?["change"]:["input","change"]).map((t=>Ra(t,mc(g),e))),v=e.defaultView;if(!v)return()=>{_.forEach((t=>t()))};const b=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),S=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&_.push(...S.map((t=>Da(t[0],t[1],{set(){mc(g)({target:this,isTrusted:!1})}},!1,v)))),mc((()=>{_.forEach((t=>t()))}))}function xc(t){return function(t,e){if(Rc("CSSGroupingRule")&&t.parentRule instanceof CSSGroupingRule||Rc("CSSMediaRule")&&t.parentRule instanceof CSSMediaRule||Rc("CSSSupportsRule")&&t.parentRule instanceof CSSSupportsRule||Rc("CSSConditionRule")&&t.parentRule instanceof CSSConditionRule){const n=Array.from(t.parentRule.cssRules).indexOf(t);e.unshift(n)}else if(t.parentStyleSheet){const n=Array.from(t.parentStyleSheet.cssRules).indexOf(t);e.unshift(n)}return e}(t,[])}function Tc(t,e,n){let r,s;return t?(t.ownerNode?r=e.getId(t.ownerNode):s=n.getId(t),{styleId:s,id:r}):{}}function Cc({mirror:t,stylesheetManager:e},n){let r=null;r="#document"===n.nodeName?t.getId(n):t.getId(n.host);const s="#document"===n.nodeName?gc([n,"access",t=>t.defaultView,"optionalAccess",t=>t.Document]):gc([n,"access",t=>t.ownerDocument,"optionalAccess",t=>t.defaultView,"optionalAccess",t=>t.ShadowRoot]),o=gc([s,"optionalAccess",t=>t.prototype])?Object.getOwnPropertyDescriptor(gc([s,"optionalAccess",t=>t.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&s&&o?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){return gc([o,"access",t=>t.get,"optionalAccess",t=>t.call,"call",t=>t(this)])},set(t){const n=gc([o,"access",t=>t.set,"optionalAccess",t=>t.call,"call",e=>e(this,t)]);if(null!==r&&-1!==r)try{e.adoptStyleSheets(t,r)}catch(t){}return n}}),mc((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))):()=>{}}function Ic(t,e={}){const n=t.doc.defaultView;if(!n)return()=>{};const r=vc(t,t.doc),s=function({mousemoveCb:t,sampling:e,doc:n,mirror:r}){if(!1===e.mousemove)return()=>{};const s="number"==typeof e.mousemove?e.mousemove:50,o="number"==typeof e.mousemoveCallback?e.mousemoveCallback:500;let i,a=[];const c=Aa(mc((e=>{const n=Date.now()-i;t(a.map((t=>(t.timeOffset-=n,t))),e),a=[],i=null})),o),u=mc(Aa(mc((t=>{const e=_c(t),{clientX:n,clientY:s}=za(t)?t.changedTouches[0]:t;i||(i=Pa()),a.push({x:n,y:s,id:r.getId(e),timeOffset:Pa()-i}),c("undefined"!=typeof DragEvent&&t instanceof DragEvent?Qa.Drag:t instanceof MouseEvent?Qa.MouseMove:Qa.TouchMove)})),s,{trailing:!1})),l=[Ra("mousemove",u,n),Ra("touchmove",u,n),Ra("drag",u,n)];return mc((()=>{l.forEach((t=>t()))}))}(t),o=bc(t),i=Sc(t),a=function({viewportResizeCb:t},{win:e}){let n=-1,r=-1;return Ra("resize",mc(Aa(mc((()=>{const e=Fa(),s=Ba();n===e&&r===s||(t({width:Number(s),height:Number(e)}),n=e,r=s)})),200)),e)}(t,{win:n}),c=Ec(t),u=function({mediaInteractionCb:t,blockClass:e,blockSelector:n,unblockSelector:r,mirror:s,sampling:o,doc:i}){const a=mc((i=>Aa(mc((o=>{const a=_c(o);if(!a||ja(a,e,n,r,!0))return;const{currentTime:c,volume:u,muted:l,playbackRate:d}=a;t({type:i,id:s.getId(a),currentTime:c,volume:u,muted:l,playbackRate:d})})),o.media||500))),c=[Ra("play",a(0),i),Ra("pause",a(1),i),Ra("seeked",a(2),i),Ra("volumechange",a(3),i),Ra("ratechange",a(4),i)];return mc((()=>{c.forEach((t=>t()))}))}(t),l=function({styleSheetRuleCb:t,mirror:e,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:mc(((r,s,o)=>{const[i,a]=o,{id:c,styleId:u}=Tc(s,e,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&t({id:c,styleId:u,adds:[{rule:i,index:a}]}),r.apply(s,o)}))});const o=r.CSSStyleSheet.prototype.deleteRule;let i,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:mc(((r,s,o)=>{const[i]=o,{id:a,styleId:c}=Tc(s,e,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&t({id:a,styleId:c,removes:[{index:i}]}),r.apply(s,o)}))}),r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:mc(((r,s,o)=>{const[i]=o,{id:a,styleId:c}=Tc(s,e,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&t({id:a,styleId:c,replace:i}),r.apply(s,o)}))})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:mc(((r,s,o)=>{const[i]=o,{id:a,styleId:c}=Tc(s,e,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&t({id:a,styleId:c,replaceSync:i}),r.apply(s,o)}))}));const c={};Mc("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Mc("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Mc("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Mc("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach((([r,s])=>{u[r]={insertRule:s.prototype.insertRule,deleteRule:s.prototype.deleteRule},s.prototype.insertRule=new Proxy(u[r].insertRule,{apply:mc(((r,s,o)=>{const[i,a]=o,{id:c,styleId:u}=Tc(s.parentStyleSheet,e,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&t({id:c,styleId:u,adds:[{rule:i,index:[...xc(s),a||0]}]}),r.apply(s,o)}))}),s.prototype.deleteRule=new Proxy(u[r].deleteRule,{apply:mc(((r,s,o)=>{const[i]=o,{id:a,styleId:c}=Tc(s.parentStyleSheet,e,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&t({id:a,styleId:c,removes:[{index:[...xc(s),i]}]}),r.apply(s,o)}))})})),mc((()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=o,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([t,e])=>{e.prototype.insertRule=u[t].insertRule,e.prototype.deleteRule=u[t].deleteRule}))}))}(t,{win:n}),d=Cc(t,t.doc),p=function({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const o=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:mc(((s,i,a)=>{const[c,u,l]=a;if(n.has(c))return o.apply(i,[c,u,l]);const{id:d,styleId:p}=Tc(gc([i,"access",t=>t.parentRule,"optionalAccess",t=>t.parentStyleSheet]),e,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&t({id:d,styleId:p,set:{property:c,value:u,priority:l},index:xc(i.parentRule)}),s.apply(i,a)}))});const i=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:mc(((s,o,a)=>{const[c]=a;if(n.has(c))return i.apply(o,[c]);const{id:u,styleId:l}=Tc(gc([o,"access",t=>t.parentRule,"optionalAccess",t=>t.parentStyleSheet]),e,r.styleMirror);return(u&&-1!==u||l&&-1!==l)&&t({id:u,styleId:l,remove:{property:c},index:xc(o.parentRule)}),s.apply(o,a)}))}),mc((()=>{s.CSSStyleDeclaration.prototype.setProperty=o,s.CSSStyleDeclaration.prototype.removeProperty=i}))}(t,{win:n}),h=t.collectFonts?function({fontCb:t,doc:e}){const n=e.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,o=n.FontFace;n.FontFace=function(t,e,n){const r=new o(t,e,n);return s.set(r,{family:t,buffer:"string"!=typeof e,descriptors:n,fontSource:"string"==typeof e?e:JSON.stringify(Array.from(new Uint8Array(e)))}),r};const i=La(e.fonts,"add",(function(e){return function(n){return setTimeout(mc((()=>{const e=s.get(n);e&&(t(e),s.delete(n))})),0),e.apply(this,[n])}}));return r.push((()=>{n.FontFace=o})),r.push(i),mc((()=>{r.forEach((t=>t()))}))}(t):()=>{},f=function(t){const{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,selectionCb:i}=t;let a=!0;const c=mc((()=>{const t=e.getSelection();if(!t||a&&gc([t,"optionalAccess",t=>t.isCollapsed]))return;a=t.isCollapsed||!1;const c=[],u=t.rangeCount||0;for(let e=0;e<u;e++){const i=t.getRangeAt(e),{startContainer:a,startOffset:u,endContainer:l,endOffset:d}=i;ja(a,r,s,o,!0)||ja(l,r,s,o,!0)||c.push({start:n.getId(a),startOffset:u,end:n.getId(l),endOffset:d})}i({ranges:c})}));return c(),Ra("selectionchange",c)}(t),m=function({doc:t,customElementCb:e}){const n=t.defaultView;return n&&n.customElements?La(n.customElements,"define",(function(t){return function(n,r,s){try{e({define:{name:n}})}catch(t){}return t.apply(this,[n,r,s])}})):()=>{}}(t),g=[];for(const e of t.plugins)g.push(e.observer(e.callback,n,e.options));return mc((()=>{yc.forEach((t=>t.reset())),r.disconnect(),s(),o(),i(),a(),c(),u(),l(),d(),p(),h(),f(),m(),g.forEach((t=>t()))}))}function Rc(t){return void 0!==window[t]}function Mc(t){return Boolean(void 0!==window[t]&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class Oc{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,e,n,r){const s=n||this.getIdToRemoteIdMap(t),o=r||this.getRemoteIdToIdMap(t);let i=s.get(e);return i||(i=this.generateIdFn(),s.set(e,i),o.set(i,e)),i}getIds(t,e){const n=this.getIdToRemoteIdMap(t),r=this.getRemoteIdToIdMap(t);return e.map((e=>this.getId(t,e,n,r)))}getRemoteId(t,e,n){const r=n||this.getRemoteIdToIdMap(t);if("number"!=typeof e)return e;const s=r.get(e);return s||-1}getRemoteIds(t,e){const n=this.getRemoteIdToIdMap(t);return e.map((e=>this.getRemoteId(t,e,n)))}reset(t){if(!t)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let e=this.iframeIdToRemoteIdMap.get(t);return e||(e=new Map,this.iframeIdToRemoteIdMap.set(t,e)),e}getRemoteIdToIdMap(t){let e=this.iframeRemoteIdToIdMap.get(t);return e||(e=new Map,this.iframeRemoteIdToIdMap.set(t,e)),e}}function Ac(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],o=t[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=o(n)):"call"!==s&&"optionalCall"!==s||(n=o(((...t)=>n.call(e,...t))),e=void 0)}return n}class Dc{constructor(){this.crossOriginIframeMirror=new Oc(aa),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Lc{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Oc(aa),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Oc(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,e){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:e}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Ac([this,"access",t=>t.loadListener,"optionalCall",e=>e(t)]),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const e=t;if("rrweb"!==e.data.type||e.origin!==e.data.origin)return;if(!t.source)return;const n=this.crossOriginIframeMap.get(t.source);if(!n)return;const r=this.transformCrossOriginEvent(n,e.data.event);r&&this.wrappedEmit(r,e.data.isCheckout)}transformCrossOriginEvent(t,e){switch(e.type){case Za.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(e.data.node,t);const n=e.data.node.id;return this.crossOriginIframeRootIdMap.set(t,n),this.patchRootIdOnNode(e.data.node,n),{timestamp:e.timestamp,type:Za.IncrementalSnapshot,data:{source:Qa.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:e.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Za.Meta:case Za.Load:case Za.DomContentLoaded:return!1;case Za.Plugin:return e;case Za.Custom:return this.replaceIds(e.data.payload,t,["id","parentId","previousId","nextId"]),e;case Za.IncrementalSnapshot:switch(e.data.source){case Qa.Mutation:return e.data.adds.forEach((e=>{this.replaceIds(e,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(e.node,t);const n=this.crossOriginIframeRootIdMap.get(t);n&&this.patchRootIdOnNode(e.node,n)})),e.data.removes.forEach((e=>{this.replaceIds(e,t,["parentId","id"])})),e.data.attributes.forEach((e=>{this.replaceIds(e,t,["id"])})),e.data.texts.forEach((e=>{this.replaceIds(e,t,["id"])})),e;case Qa.Drag:case Qa.TouchMove:case Qa.MouseMove:return e.data.positions.forEach((e=>{this.replaceIds(e,t,["id"])})),e;case Qa.ViewportResize:return!1;case Qa.MediaInteraction:case Qa.MouseInteraction:case Qa.Scroll:case Qa.CanvasMutation:case Qa.Input:return this.replaceIds(e.data,t,["id"]),e;case Qa.StyleSheetRule:case Qa.StyleDeclaration:return this.replaceIds(e.data,t,["id"]),this.replaceStyleIds(e.data,t,["styleId"]),e;case Qa.Font:return e;case Qa.Selection:return e.data.ranges.forEach((e=>{this.replaceIds(e,t,["start","end"])})),e;case Qa.AdoptedStyleSheet:return this.replaceIds(e.data,t,["id"]),this.replaceStyleIds(e.data,t,["styleIds"]),Ac([e,"access",t=>t.data,"access",t=>t.styles,"optionalAccess",t=>t.forEach,"call",e=>e((e=>{this.replaceStyleIds(e,t,["styleId"])}))]),e}}return!1}replace(t,e,n,r){for(const s of r)(Array.isArray(e[s])||"number"==typeof e[s])&&(Array.isArray(e[s])?e[s]=t.getIds(n,e[s]):e[s]=t.getId(n,e[s]));return e}replaceIds(t,e,n){return this.replace(this.crossOriginIframeMirror,t,e,n)}replaceStyleIds(t,e,n){return this.replace(this.crossOriginIframeStyleMirror,t,e,n)}replaceIdOnNode(t,e){this.replaceIds(t,e,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach((t=>{this.replaceIdOnNode(t,e)}))}patchRootIdOnNode(t,e){t.type===Wi.Document||t.rootId||(t.rootId=e),"childNodes"in t&&t.childNodes.forEach((t=>{this.patchRootIdOnNode(t,e)}))}}class Nc{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Pc{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,e){if(!Vi(t))return;if(this.shadowDoms.has(t))return;this.shadowDoms.add(t);const n=vc({...this.bypassOptions,doc:e,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Sc({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),setTimeout((()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Cc({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))}),0)}observeAttachShadow(t){t.contentWindow&&t.contentDocument&&this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,e){const n=this;this.restoreHandlers.push(La(t.prototype,"attachShadow",(function(t){return function(r){const s=t.call(this,r);return this.shadowRoot&&Ja(this)&&n.addShadowRoot(this.shadowRoot,e),s}})))}reset(){this.restoreHandlers.forEach((t=>{try{t()}catch(t){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class $c{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class Fc{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new Va,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,e){"_cssText"in e.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:e.id,attributes:e.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,e){if(0===t.length)return;const n={id:e,styleIds:[]},r=[];for(const e of t){let t;this.styleMirror.has(e)?t=this.styleMirror.getId(e):(t=this.styleMirror.add(e),r.push({styleId:t,rules:Array.from(e.rules||CSSRule,((t,e)=>({rule:Ki(t),index:e})))})),n.styleIds.push(t)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class Bc{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){Xa((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(t,e){const n=this.nodeMap.get(t);return n&&Array.from(n).some((t=>t!==e))}add(t,e){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(e))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function jc(t){const e=t;return e.timestamp=Pa(),e}let Uc;const Hc=new Ji;function zc(t={}){const{emit:e,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:o=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:h=null,inlineStylesheet:f=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,packFn:S,sampling:k={},dataURLOptions:w={},mousemoveWait:E,recordCanvas:x=!1,recordCrossOriginIframes:T=!1,recordAfter:C=("DOMContentLoaded"===t.recordAfter?t.recordAfter:"load"),userTriggeredOnInput:I=!1,collectFonts:R=!1,inlineImages:M=!1,plugins:O,keepIframeSrcFn:A=(()=>!1),ignoreCSSAttributes:D=new Set([]),errorHandler:L,onMutation:N,getCanvasManager:P}=t;hc(L);const $=!T||window.parent===window;let F=!1;if(!$)try{window.parent.document&&(F=!1)}catch(t){F=!0}if($&&!e)throw new Error("emit function is required");void 0!==E&&void 0===k.mousemove&&(k.mousemove=E),Hc.reset();const B=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},j=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};let U;!function(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let e=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1})}();let H=0;const z=t=>{for(const e of O||[])e.eventProcessor&&(t=e.eventProcessor(t));return S&&!F&&(t=S(t)),t},q=(t,s)=>{if(!ri([yc,"access",t=>t[0],"optionalAccess",t=>t.isFrozen,"call",t=>t()])||t.type===Za.FullSnapshot||t.type===Za.IncrementalSnapshot&&t.data.source===Qa.Mutation||yc.forEach((t=>t.unfreeze())),$)ri([e,"optionalCall",e=>e(z(t),s)]);else if(F){const e={type:"rrweb",event:z(t),origin:window.location.origin,isCheckout:s};window.parent.postMessage(e,"*")}if(t.type===Za.FullSnapshot)U=t,H=0;else if(t.type===Za.IncrementalSnapshot){if(t.data.source===Qa.Mutation&&t.data.isAttachIframe)return;H++;const e=r&&H>=r,s=n&&t.timestamp-U.timestamp>n;(e||s)&&Q(!0)}},W=t=>{q(jc({type:Za.IncrementalSnapshot,data:{source:Qa.Mutation,...t}}))},G=t=>q(jc({type:Za.IncrementalSnapshot,data:{source:Qa.Scroll,...t}})),V=t=>q(jc({type:Za.IncrementalSnapshot,data:{source:Qa.CanvasMutation,...t}})),Y=new Fc({mutationCb:W,adoptedStyleSheetCb:t=>q(jc({type:Za.IncrementalSnapshot,data:{source:Qa.AdoptedStyleSheet,...t}}))}),K="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Dc:new Lc({mirror:Hc,mutationCb:W,stylesheetManager:Y,recordCrossOriginIframes:T,wrappedEmit:q});for(const t of O||[])t.getMirror&&t.getMirror({nodeMirror:Hc,crossOriginIframeMirror:K.crossOriginIframeMirror,crossOriginIframeStyleMirror:K.crossOriginIframeStyleMirror});const J=new Bc,X=function(t,e){try{return t?t(e):new $c}catch(t){return console.warn("Unable to initialize CanvasManager"),new $c}}(P,{mirror:Hc,win:window,mutationCb:t=>q(jc({type:Za.IncrementalSnapshot,data:{source:Qa.CanvasMutation,...t}})),recordCanvas:x,blockClass:s,blockSelector:o,unblockSelector:i,sampling:k.canvas,dataURLOptions:w}),Z="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Nc:new Pc({mutationCb:W,scrollCb:G,bypassOptions:{onMutation:N,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskInputOptions:B,dataURLOptions:w,maskAttributeFn:_,maskTextFn:b,maskInputFn:v,recordCanvas:x,inlineImages:M,sampling:k,slimDOMOptions:j,iframeManager:K,stylesheetManager:Y,canvasManager:X,keepIframeSrcFn:A,processedNodeManager:J},mirror:Hc}),Q=(t=!1)=>{q(jc({type:Za.Meta,data:{href:window.location.href,width:Ba(),height:Fa()}}),t),Y.reset(),Z.init(),yc.forEach((t=>t.lock()));const e=function(t,e){const{mirror:n=new Ji,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:o=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:h=!1,maskAllInputs:f=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:_=!1,dataURLOptions:v,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:k,iframeLoadTimeout:w,onStylesheetLoad:E,stylesheetLoadTimeout:x,keepIframeSrcFn:T=(()=>!1)}=e||{};return Ca(t,{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===_,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===_?{}:_,dataURLOptions:v,inlineImages:p,recordCanvas:h,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:k,iframeLoadTimeout:w,onStylesheetLoad:E,stylesheetLoadTimeout:x,keepIframeSrcFn:T,newlyAddedElement:!1})}(document,{mirror:Hc,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskAllInputs:B,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,slimDOM:j,dataURLOptions:w,recordCanvas:x,inlineImages:M,onSerialize:t=>{qa(t,Hc)&&K.addIframe(t),Wa(t,Hc)&&Y.trackLinkElement(t),Ga(t)&&Z.addShadowRoot(t.shadowRoot,document)},onIframeLoad:(t,e)=>{K.attachIframe(t,e),Z.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{Y.attachLinkElement(t,e)},keepIframeSrcFn:A});if(!e)return console.warn("Failed to snapshot the document");q(jc({type:Za.FullSnapshot,data:{node:e,initialOffset:$a(window)}})),yc.forEach((t=>t.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,Hc.getId(document))};Uc=Q;try{const t=[],e=t=>mc(Ic)({onMutation:N,mutationCb:W,mousemoveCb:(t,e)=>q(jc({type:Za.IncrementalSnapshot,data:{source:e,positions:t}})),mouseInteractionCb:t=>q(jc({type:Za.IncrementalSnapshot,data:{source:Qa.MouseInteraction,...t}})),scrollCb:G,viewportResizeCb:t=>q(jc({type:Za.IncrementalSnapshot,data:{source:Qa.ViewportResize,...t}})),inputCb:t=>q(jc({type:Za.IncrementalSnapshot,data:{source:Qa.Input,...t}})),mediaInteractionCb:t=>q(jc({type:Za.IncrementalSnapshot,data:{source:Qa.MediaInteraction,...t}})),styleSheetRuleCb:t=>q(jc({type:Za.IncrementalSnapshot,data:{source:Qa.StyleSheetRule,...t}})),styleDeclarationCb:t=>q(jc({type:Za.IncrementalSnapshot,data:{source:Qa.StyleDeclaration,...t}})),canvasMutationCb:V,fontCb:t=>q(jc({type:Za.IncrementalSnapshot,data:{source:Qa.Font,...t}})),selectionCb:t=>{q(jc({type:Za.IncrementalSnapshot,data:{source:Qa.Selection,...t}}))},customElementCb:t=>{q(jc({type:Za.IncrementalSnapshot,data:{source:Qa.CustomElement,...t}}))},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,maskInputOptions:B,inlineStylesheet:f,sampling:k,recordCanvas:x,inlineImages:M,userTriggeredOnInput:I,collectFonts:R,doc:t,maskAttributeFn:_,maskInputFn:v,maskTextFn:b,keepIframeSrcFn:A,blockSelector:o,unblockSelector:i,slimDOMOptions:j,dataURLOptions:w,mirror:Hc,iframeManager:K,stylesheetManager:Y,shadowDomManager:Z,processedNodeManager:J,canvasManager:X,ignoreCSSAttributes:D,plugins:ri([O,"optionalAccess",t=>t.filter,"call",t=>t((t=>t.observer)),"optionalAccess",t=>t.map,"call",t=>t((t=>({observer:t.observer,options:t.options,callback:e=>q(jc({type:Za.Plugin,data:{plugin:t.name,payload:e}}))})))])||[]},{});K.addLoadListener((n=>{try{t.push(e(n.contentDocument))}catch(t){console.warn(t)}}));const n=()=>{Q(),t.push(e(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(t.push(Ra("DOMContentLoaded",(()=>{q(jc({type:Za.DomContentLoaded,data:{}})),"DOMContentLoaded"===C&&n()}))),t.push(Ra("load",(()=>{q(jc({type:Za.Load,data:{}})),"load"===C&&n()}),window))),()=>{t.forEach((t=>t())),J.destroy(),Uc=void 0,fc()}}catch(t){console.warn(t)}}zc.mirror=Hc,zc.takeFullSnapshot=function(t){if(!Uc)throw new Error("please take full snapshot after start recording");Uc(t)};const qc=3;function Wc(t){return t>9999999999?t:1e3*t}function Gc(t){return t>9999999999?t/1e3:t}function Vc(t,e){"sentry.transaction"!==e.category&&(["ui.click","ui.input"].includes(e.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate((()=>(t.throttledAddEvent({type:Za.Custom,timestamp:1e3*(e.timestamp||0),data:{tag:"breadcrumb",payload:ue(e,10,1e3)}}),"console"===e.category))))}const Yc="button,a";function Kc(t){return t.closest(Yc)||t}function Jc(t){const e=Xc(t);return e&&e instanceof Element?Kc(e):e}function Xc(t){return function(t){return"object"==typeof t&&!!t&&"target"in t}(t)?t.target:t}let Zc;function Qc(t){return Zc||(Zc=[],B(Pi,"open",(function(t){return function(...e){if(Zc)try{Zc.forEach((t=>t()))}catch(t){}return t.apply(Pi,e)}}))),Zc.push(t),()=>{const e=Zc?Zc.indexOf(t):-1;e>-1&&Zc.splice(e,1)}}class tu{constructor(t,e,n=Vc){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=e.timeout/1e3,this._threshold=e.threshold/1e3,this._scollTimeout=e.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=e.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const t=Qc((()=>{this._lastMutation=nu()}));this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,e){if(function(t,e){if(!eu.includes(t.tagName))return!0;if("INPUT"===t.tagName&&!["submit","button"].includes(t.getAttribute("type")||""))return!0;if("A"===t.tagName&&(t.hasAttribute("download")||t.hasAttribute("target")&&"_self"!==t.getAttribute("target")))return!0;if(e&&t.matches(e))return!0;return!1}(e,this._ignoreSelector)||!function(t){return!(!t.data||"number"!=typeof t.data.nodeId||!t.timestamp)}(t))return;const n={timestamp:Gc(t.timestamp),clickBreadcrumb:t,clickCount:0,node:e};this._clicks.some((t=>t.node===n.node&&Math.abs(t.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=Gc(t)}registerScroll(t=Date.now()){this._lastScroll=Gc(t)}registerClick(t){const e=Kc(t);this._handleMultiClick(e)}_handleMultiClick(t){this._getClicks(t).forEach((t=>{t.clickCount++}))}_getClicks(t){return this._clicks.filter((e=>e.node===t))}_checkClicks(){const t=[],e=nu();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=e&&t.push(n)}));for(const e of t){const t=this._clicks.indexOf(e);t>-1&&(this._generateBreadcrumbs(e),this._clicks.splice(t,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const e=this._replay,n=t.scrollAfter&&t.scrollAfter<=this._scollTimeout,r=t.mutationAfter&&t.mutationAfter<=this._threshold,s=!n&&!r,{clickCount:o,clickBreadcrumb:i}=t;if(s){const n=1e3*Math.min(t.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",s={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.slowClickDetected",data:{...i.data,url:Pi.location.href,route:e.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:o||1}};this._addBreadcrumbEvent(e,s)}else if(o>1){const t={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.multiClick",data:{...i.data,url:Pi.location.href,route:e.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(e,t)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const eu=["A","BUTTON","INPUT"];function nu(){return Date.now()/1e3}function ru(t,e){try{if(!function(t){return t.type===qc}(e))return;const{source:n}=e.data;if(n===Qa.Mutation&&t.registerMutation(e.timestamp),n===Qa.Scroll&&t.registerScroll(e.timestamp),function(t){return t.data.source===Qa.MouseInteraction}(e)){const{type:n,id:r}=e.data,s=zc.mirror.getNode(r);s instanceof HTMLElement&&n===tc.Click&&t.registerClick(s)}}catch(t){}}function su(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var ou;!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(ou||(ou={}));const iu=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function au(t){const e={};for(const n in t)if(iu.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),e[r]=t[n]}return e}const cu=t=>e=>{if(!t.isEnabled())return;const n=function(t){const{target:e,message:n}=function(t){const e="click"===t.name;let n,r=null;try{r=e?Jc(t.event):Xc(t.event),n=x(r,{maxStringLength:200})||"<unknown>"}catch(t){n="<unknown>"}return{target:r,message:n}}(t);return su({category:`ui.${t.name}`,...uu(e,n)})}(e);if(!n)return;const r="click"===e.name,s=r?e.event:void 0;!(r&&t.clickDetector&&s&&s.target)||s.altKey||s.metaKey||s.ctrlKey||s.shiftKey||function(t,e,n){t.handleClick(e,n)}(t.clickDetector,n,Jc(e.event)),Vc(t,n)};function uu(t,e){const n=zc.mirror.getId(t),r=n&&zc.mirror.getNode(n),s=r&&zc.mirror.getMeta(r),o=s&&function(t){return t.type===ou.Element}(s)?s:null;return{message:e,data:o?{nodeId:n,node:{id:n,tagName:o.tagName,textContent:Array.from(o.childNodes).map((t=>t.type===ou.Text&&t.textContent)).filter(Boolean).map((t=>t.trim())).join(""),attributes:au(o.attributes)}}:{}}}function lu(t,e){if(!t.isEnabled())return;t.updateUserActivity();const n=function(t){const{metaKey:e,shiftKey:n,ctrlKey:r,altKey:s,key:o,target:i}=t;if(!i||function(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable}(i)||!o)return null;const a=e||r||s,c=1===o.length;if(!a&&c)return null;const u=x(i,{maxStringLength:200})||"<unknown>",l=uu(i,u);return su({category:"ui.keyDown",message:u,data:{...l.data,metaKey:e,shiftKey:n,ctrlKey:r,altKey:s,key:o}})}(e);n&&Vc(t,n)}const du={resource:function(t){const{entryType:e,initiatorType:n,name:r,responseEnd:s,startTime:o,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:u}=t;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${e}.${n}`,start:hu(o),end:hu(s),name:r,data:{size:u,statusCode:c,decodedBodySize:i,encodedBodySize:a}}},paint:function(t){const{duration:e,entryType:n,name:r,startTime:s}=t,o=hu(s);return{type:n,name:r,start:o,end:o+e,data:void 0}},navigation:function(t){const{entryType:e,name:n,decodedBodySize:r,duration:s,domComplete:o,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:p,startTime:h,transferSize:f,type:m}=t;if(0===s)return null;return{type:`${e}.${m}`,start:hu(h),end:hu(o),name:n,data:{size:f,decodedBodySize:r,encodedBodySize:i,duration:s,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:o,redirectCount:p}}}};function pu(t){return du[t.entryType]?du[t.entryType](t):null}function hu(t){return((at||Pi.performance.timeOrigin)+t)/1e3}function fu(t){function e(e){t.performanceEntries.includes(e)||t.performanceEntries.push(e)}function n({entries:t}){t.forEach(e)}const r=[];return["navigation","paint","resource"].forEach((t=>{r.push(Ii(t,n))})),r.push(Ci((({metric:e})=>{t.replayPerformanceEntries.push(function(t){const e=t.entries,n=e[e.length-1],r=n?n.element:void 0,s=t.value,o=hu(s);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:o,end:o,data:{value:s,size:s,nodeId:r?zc.mirror.getId(r):void 0}}}(e))}))),()=>{r.forEach((t=>t()))}}const mu="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,gu='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function yu(t,e){mu&&(L.info(t),e&&vu(t))}function _u(t,e){mu&&(L.info(t),e&&setTimeout((()=>{vu(t)}),0))}function vu(t){be({category:"console",data:{logger:"replay"},level:"info",message:t},{level:"info"})}class bu extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Su{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const e=JSON.stringify(t).length;if(this._totalSize+=e,this._totalSize>Hi)throw new bu;this.events.push(t)}finish(){return new Promise((t=>{const e=this.events;this.clear(),t(JSON.stringify(e))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map((t=>t.timestamp)).sort()[0];return t?Wc(t):null}}class ku{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((t,e)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?t():e()}),{once:!0}),this._worker.addEventListener("error",(t=>{e(t)}),{once:!0})}))),this._ensureReadyPromise}destroy(){yu("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(t,e){const n=this._getAndIncrementId();return new Promise(((r,s)=>{const o=({data:e})=>{const i=e;if(i.method===t&&i.id===n){if(this._worker.removeEventListener("message",o),!i.success)return mu&&L.error("[Replay]",i.response),void s(new Error("Error in compression worker"));r(i.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:n,method:t,arg:e})}))}_getAndIncrementId(){return this._id++}}class wu{constructor(t){this._worker=new ku(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const e=Wc(t.timestamp);(!this._earliestTimestamp||e<this._earliestTimestamp)&&(this._earliestTimestamp=e);const n=JSON.stringify(t);return this._totalSize+=n.length,this._totalSize>Hi?Promise.reject(new bu):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(t=>{mu&&L.warn('[Replay] Sending "clear" message to worker failed',t)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class Eu{constructor(t){this._fallback=new Su,this._compression=new wu(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){return void yu("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:e}=this._fallback,n=[];for(const e of t)n.push(this._compression.addEvent(e));this._compression.hasCheckout=e,this._used=this._compression;try{await Promise.all(n)}catch(t){mu&&L.warn("[Replay] Failed to add events when switching buffers.",t)}}}function xu({useCompression:t,workerUrl:e}){if(t&&window.Worker){const t=function(t){try{const e=t||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const t=new Blob([gu]);return URL.createObjectURL(t)}();return""}();if(!e)return;yu("[Replay] Using compression worker"+(t?` from ${t}`:""));const n=new Worker(e);return new Eu(n)}catch(t){yu("[Replay] Failed to create compression worker")}}(e);if(t)return t}return yu("[Replay] Using simple buffer"),new Su}function Tu(){try{return"sessionStorage"in Pi&&!!Pi.sessionStorage}catch(t){return!1}}function Cu(t){!function(){if(!Tu())return;try{Pi.sessionStorage.removeItem($i)}catch(t){}}(),t.session=void 0}function Iu(t){return void 0!==t&&Math.random()<t}function Ru(t){const e=Date.now();return{id:t.id||J(),started:t.started||e,lastActivity:t.lastActivity||e,segmentId:t.segmentId||0,sampled:t.sampled,previousSessionId:t.previousSessionId}}function Mu(t){if(Tu())try{Pi.sessionStorage.setItem($i,JSON.stringify(t))}catch(t){}}function Ou({sessionSampleRate:t,allowBuffering:e,stickySession:n=!1},{previousSessionId:r}={}){const s=function(t,e){return Iu(t)?"session":!!e&&"buffer"}(t,e),o=Ru({sampled:s,previousSessionId:r});return n&&Mu(o),o}function Au(t,e,n=+new Date){return null===t||void 0===e||e<0||0!==e&&t+e<=n}function Du(t,{maxReplayDuration:e,sessionIdleExpire:n,targetTime:r=Date.now()}){return Au(t.started,e,r)||Au(t.lastActivity,n,r)}function Lu(t,{sessionIdleExpire:e,maxReplayDuration:n}){return!!Du(t,{sessionIdleExpire:e,maxReplayDuration:n})&&("buffer"!==t.sampled||0!==t.segmentId)}function Nu({traceInternals:t,sessionIdleExpire:e,maxReplayDuration:n,previousSessionId:r},s){const o=s.stickySession&&function(t){if(!Tu())return null;try{const e=Pi.sessionStorage.getItem($i);if(!e)return null;const n=JSON.parse(e);return _u("[Replay] Loading existing session",t),Ru(n)}catch(t){return null}}(t);return o?Lu(o,{sessionIdleExpire:e,maxReplayDuration:n})?(_u("[Replay] Session in sessionStorage is expired, creating new one..."),Ou(s,{previousSessionId:o.id})):o:(_u("[Replay] Creating new session",t),Ou(s,{previousSessionId:r}))}function Pu(t,e,n){return!!Fu(t,e)&&($u(t,e,n),!0)}async function $u(t,e,n){if(!t.eventBuffer)return null;try{n&&"buffer"===t.recordingMode&&t.eventBuffer.clear(),n&&(t.eventBuffer.hasCheckout=!0);const r=function(t,e){try{if("function"==typeof e&&function(t){return t.type===Za.Custom}(t))return e(t)}catch(t){return mu&&L.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",t),null}return t}(e,t.getOptions().beforeAddRecordingEvent);if(!r)return;return await t.eventBuffer.addEvent(r)}catch(e){const n=e&&e instanceof bu?"addEventSizeExceeded":"addEvent";mu&&L.error(e),await t.stop({reason:n});const r=De();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function Fu(t,e){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const n=Wc(e.timestamp);return!(n+t.timeouts.sessionIdlePause<Date.now())&&(!(n>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration)||(yu(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,t.getOptions()._experiments.traceInternals),!1))}function Bu(t){return!t.type}function ju(t){return"transaction"===t.type}function Uu(t){return"feedback"===t.type}function Hu(t){const e=function(){const t=De();if(!t)return!1;const e=t.getTransport();if(!e)return!1;return e.send.__sentry__baseTransport__||!1}();return(n,r)=>{if(!t.isEnabled()||!Bu(n)&&!ju(n))return;const s=r&&r.statusCode;e&&(!s||s<200||s>=300)||(ju(n)?function(t,e){const n=t.getContext();e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(e.contexts.trace.trace_id)}(t,n):function(t,e){const n=t.getContext();e.event_id&&n.errorIds.size<100&&n.errorIds.add(e.event_id);if("buffer"!==t.recordingMode||!e.tags||!e.tags.replayId)return;const{beforeErrorSampling:r}=t.getOptions();if("function"==typeof r&&!r(e))return;setTimeout((()=>{t.sendBufferedReplayOrFlush()}))}(t,n))}}function zu(t){return e=>{t.isEnabled()&&Bu(e)&&function(t,e){const n=e.exception&&e.exception.values&&e.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){Vc(t,su({category:"replay.hydrate-error"}))}}(t,e)}}function qu(t,e=!1){const n=e?Hu(t):void 0;return Object.assign(((e,r)=>{if(!t.isEnabled())return e;if(function(t){return"replay_event"===t.type}(e))return delete e.breadcrumbs,e;if(!Bu(e)&&!ju(e)&&!Uu(e))return e;if(!t.checkAndHandleExpiredSession())return e;if(Uu(e))return t.flush(),e.contexts.feedback.replay_id=t.getSessionId(),function(t,e){t.triggerUserActivity(),t.addUpdate((()=>!e.timestamp||(t.throttledAddEvent({type:Za.Custom,timestamp:1e3*e.timestamp,data:{timestamp:e.timestamp,tag:"breadcrumb",payload:{category:"sentry.feedback",data:{feedbackId:e.event_id}}}}),!1)))}(t,e),e;if(function(t,e){return!(t.type||!t.exception||!t.exception.values||!t.exception.values.length||!e.originalException||!e.originalException.__rrweb__)}(e,r)&&!t.getOptions()._experiments.captureExceptions)return mu&&L.log("[Replay] Ignoring error from rrweb internals",e),null;const s=function(t,e){return"buffer"===t.recordingMode&&e.message!==Bi&&!(!e.exception||e.type)&&Iu(t.getOptions().errorSampleRate)}(t,e);return(s||"session"===t.recordingMode)&&(e.tags={...e.tags,replayId:t.getSessionId()}),n&&n(e,{statusCode:200}),e}),{id:"Replay"})}function Wu(t,e){return e.map((({type:e,start:n,end:r,name:s,data:o})=>{const i=t.throttledAddEvent({type:Za.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:e,description:s,startTimestamp:n,endTimestamp:r,data:o}}});return"string"==typeof i?Promise.resolve(null):i}))}function Gu(t){return e=>{if(!t.isEnabled())return;const n=function(t){const{from:e,to:n}=t,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:e}}}(e);null!==n&&(t.getContext().urls.push(n.name),t.triggerUserActivity(),t.addUpdate((()=>(Wu(t,[n]),!1))))}}function Vu(t,e){t.isEnabled()&&null!==e&&(function(t,e){return(!mu||!t.getOptions()._experiments.traceInternals)&&si(e,De())}(t,e.name)||t.addUpdate((()=>(Wu(t,[e]),!0))))}function Yu(t){return e=>{if(!t.isEnabled())return;const n=function(t){const{startTimestamp:e,endTimestamp:n,xhr:r}=t,s=r[ao];if(!e||!n||!s)return null;const{method:o,url:i,status_code:a}=s;return void 0===i?null:{type:"resource.xhr",name:i,start:e/1e3,end:n/1e3,data:{method:o,statusCode:a}}}(e);Vu(t,n)}}function Ku(t,e){if(t)try{if("string"==typeof t)return e.encode(t).length;if(t instanceof URLSearchParams)return e.encode(t.toString()).length;if(t instanceof FormData){const n=rl(t);return e.encode(n).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch(t){}}function Ju(t){if(!t)return;const e=parseInt(t,10);return isNaN(e)?void 0:e}function Xu(t){try{if("string"==typeof t)return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[rl(t)];if(!t)return[void 0]}catch(e){return mu&&L.warn("[Replay] Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return mu&&L.info("[Replay] Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Zu(t,e){if(!t)return{headers:{},size:void 0,_meta:{warnings:[e]}};const n={...t._meta},r=n.warnings||[];return n.warnings=[...r,e],t._meta=n,t}function Qu(t,e){if(!e)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:o,statusCode:i,request:a,response:c}=e;return{type:t,start:n/1e3,end:r/1e3,name:s,data:G({method:o,statusCode:i,request:a,response:c})}}function tl(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function el(t,e,n){if(!e&&0===Object.keys(t).length)return;if(!e)return{headers:t};if(!n)return{headers:t,size:e};const r={headers:t,size:e},{body:s,warnings:o}=function(t){if(!t||"string"!=typeof t)return{body:t};const e=t.length>ji,n=function(t){const e=t[0],n=t[t.length-1];return"["===e&&"]"===n||"{"===e&&"}"===n}(t);if(e){const e=t.slice(0,ji);return n?{body:e,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${e}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(t)}}catch(t){}return{body:t}}(n);return r.body=s,o&&o.length>0&&(r._meta={warnings:o}),r}function nl(t,e){return Object.keys(t).reduce(((n,r)=>{const s=r.toLowerCase();return e.includes(s)&&t[r]&&(n[s]=t[r]),n}),{})}function rl(t){return new URLSearchParams(t).toString()}function sl(t,e){const n=function(t,e=Pi.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(Pi.location.origin))return t;const n=new URL(t,e);if(n.origin!==new URL(e).origin)return t;const r=n.href;if(!t.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(t);return F(n,e)}async function ol(t,e,n){try{const r=await async function(t,e,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r}=e,{url:i,method:a,status_code:c=0,request_body_size:u,response_body_size:l}=t.data,d=sl(i,n.networkDetailAllowUrls)&&!sl(i,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:t,networkRequestHeaders:e},n,r){const s=n?function(t,e){if(1===t.length&&"string"!=typeof t[0])return cl(t[0],e);if(2===t.length)return cl(t[1],e);return{}}(n,e):{};if(!t)return el(s,r,void 0);const o=il(n),[i,a]=Xu(o),c=el(s,r,i);if(a)return Zu(c,a);return c}(n,e.input,u):tl(u),h=await async function(t,{networkCaptureBodies:e,textEncoder:n,networkResponseHeaders:r},s,o){if(!t&&void 0!==o)return tl(o);const i=s?al(s.headers,r):{};if(!s||!e&&void 0!==o)return el(i,o,void 0);const[a,c]=await async function(t){const e=function(t){try{return t.clone()}catch(t){mu&&L.warn("[Replay] Failed to clone response body",t)}}(t);if(!e)return[void 0,"BODY_PARSE_ERROR"];try{const t=await function(t){return new Promise(((e,n)=>{const r=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(t){return await t.text()})(t).then((t=>e(t)),(t=>n(t))).finally((()=>clearTimeout(r)))}))}(e);return[t]}catch(t){return mu&&L.warn("[Replay] Failed to get text body from response",t),[void 0,"BODY_PARSE_ERROR"]}}(s),u=function(t,{networkCaptureBodies:e,textEncoder:n,responseBodySize:r,captureDetails:s,headers:o}){try{const i=t&&t.length&&void 0===r?Ku(t,n):r;return s?el(o,i,e?t:void 0):tl(i)}catch(t){return mu&&L.warn("[Replay] Failed to serialize response body",t),el(o,r,void 0)}}(a,{networkCaptureBodies:e,textEncoder:n,responseBodySize:o,captureDetails:t,headers:i});if(c)return Zu(u,c);return u}(d,n,e.response,l);return{startTimestamp:s,endTimestamp:o,url:i,method:a,statusCode:c,request:p,response:h}}(t,e,n),s=Qu("resource.fetch",r);Vu(n.replay,s)}catch(t){mu&&L.error("[Replay] Failed to capture fetch breadcrumb",t)}}function il(t=[]){if(2===t.length&&"object"==typeof t[1])return t[1].body}function al(t,e){const n={};return e.forEach((e=>{t.get(e)&&(n[e]=t.get(e))})),n}function cl(t,e){if(!t)return{};const n=t.headers;return n?n instanceof Headers?al(n,e):Array.isArray(n)?{}:nl(n,e):{}}async function ul(t,e,n){try{const r=function(t,e,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r,input:i,xhr:a}=e,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:p}=t.data;if(!c)return null;if(!a||!sl(c,n.networkDetailAllowUrls)||sl(c,n.networkDetailDenyUrls)){return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:l,request:tl(d),response:tl(p)}}const h=a[ao],f=h?nl(h.request_headers,n.networkRequestHeaders):{},m=nl(function(t){const e=t.getAllResponseHeaders();if(!e)return{};return e.split("\r\n").reduce(((t,e)=>{const[n,r]=e.split(": ");return t[n.toLowerCase()]=r,t}),{})}(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?Xu(i):[void 0],[_,v]=n.networkCaptureBodies?function(t){const e=[];try{return[t.responseText]}catch(t){e.push(t)}try{return function(t,e){try{if("string"==typeof t)return[t];if(t instanceof Document)return[t.body.outerHTML];if("json"===e&&t&&"object"==typeof t)return[JSON.stringify(t)];if(!t)return[void 0]}catch(e){return mu&&L.warn("[Replay] Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return mu&&L.info("[Replay] Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}(t.response,t.responseType)}catch(t){e.push(t)}return mu&&L.warn("[Replay] Failed to get xhr response body",...e),[void 0]}(a):[void 0],b=el(f,d,g),S=el(m,p,_);return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:l,request:y?Zu(b,y):b,response:v?Zu(S,v):S}}(t,e,n),s=Qu("resource.xhr",r);Vu(n.replay,s)}catch(t){mu&&L.error("[Replay] Failed to capture xhr breadcrumb",t)}}function ll(t,e,n){const{xhr:r,input:s}=e;if(!r)return;const o=Ku(s,n.textEncoder),i=r.getResponseHeader("content-length")?Ju(r.getResponseHeader("content-length")):function(t,e,n){try{return Ku("json"===e&&t&&"object"==typeof t?JSON.stringify(t):t,n)}catch(t){return}}(r.response,r.responseType,n.textEncoder);void 0!==o&&(t.data.request_body_size=o),void 0!==i&&(t.data.response_body_size=i)}function dl(t){const e=De();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:a}=t.getOptions(),c={replay:t,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:a};e&&e.on?e.on("beforeAddBreadcrumb",((t,e)=>function(t,e,n){if(!e.data)return;try{(function(t){return"xhr"===t.category})(e)&&function(t){return t&&t.xhr}(n)&&(ll(e,n,t),ul(e,n,t)),function(t){return"fetch"===t.category}(e)&&function(t){return t&&t.response}(n)&&(!function(t,e,n){const{input:r,response:s}=e,o=Ku(r?il(r):void 0,n.textEncoder),i=s?Ju(s.headers.get("content-length")):void 0;void 0!==o&&(t.data.request_body_size=o),void 0!==i&&(t.data.response_body_size=i)}(e,n,t),ol(e,n,t))}catch(t){mu&&L.warn("Error when enriching network breadcrumb")}}(c,t,e))):(lo(function(t){return e=>{if(!t.isEnabled())return;const n=function(t){const{startTimestamp:e,endTimestamp:n,fetchData:r,response:s}=t;if(!n)return null;const{method:o,url:i}=r;return{type:"resource.fetch",start:e/1e3,end:n/1e3,name:i,data:{method:o,statusCode:s?s.status:void 0}}}(e);Vu(t,n)}}(t)),co(Yu(t)))}catch(t){}}let pl=null;const hl=t=>e=>{if(!t.isEnabled())return;const n=function(t){const e=t.getLastBreadcrumb&&t.getLastBreadcrumb();if(pl===e||!e)return null;if(pl=e,!function(t){return!!t.category}(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui."))return null;if("console"===e.category)return function(t){const e=t.data&&t.data.arguments;if(!Array.isArray(e)||0===e.length)return su(t);let n=!1;const r=e.map((t=>{if(!t)return t;if("string"==typeof t)return t.length>Ui?(n=!0,`${t.slice(0,Ui)}…`):t;if("object"==typeof t)try{const e=ue(t,7);return JSON.stringify(e).length>Ui?(n=!0,`${JSON.stringify(e,null,2).slice(0,Ui)}…`):e}catch(t){}return t}));return su({...t,data:{...t.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(e);return su(e)}(e);n&&Vc(t,n)};function fl(t){return!(!t||!t.on)}function ml(t){const{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}=t,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}}}}function gl(t){let e=!1;return(n,r)=>{if(!t.checkAndHandleExpiredSession())return void(mu&&L.warn("[Replay] Received replay event after session expired."));const s=r||!e;e=!0,t.clickDetector&&ru(t.clickDetector,n),t.addUpdate((()=>{if("buffer"===t.recordingMode&&s&&t.setInitialState(),!Pu(t,n,s))return!0;if(!s)return!1;if(function(t,e){if(!e||!t.session||0!==t.session.segmentId)return;Pu(t,function(t){const e=t.getOptions();return{type:Za.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:t.isRecordingCanvas(),sessionSampleRate:e.sessionSampleRate,errorSampleRate:e.errorSampleRate,useCompressionOption:e.useCompression,blockAllMedia:e.blockAllMedia,maskAllText:e.maskAllText,maskAllInputs:e.maskAllInputs,useCompression:!!t.eventBuffer&&"worker"===t.eventBuffer.type,networkDetailHasUrls:e.networkDetailAllowUrls.length>0,networkCaptureBodies:e.networkCaptureBodies,networkRequestHasHeaders:e.networkRequestHeaders.length>0,networkResponseHasHeaders:e.networkResponseHeaders.length>0}}}}(t),!1)}(t,s),t.session&&t.session.previousSessionId)return!0;if("buffer"===t.recordingMode&&t.session&&t.eventBuffer){const e=t.eventBuffer.getEarliestTimestamp();e&&(yu(`[Replay] Updating session start time to earliest event in buffer to ${new Date(e)}`,t.getOptions()._experiments.traceInternals),t.session.started=e,t.getOptions().stickySession&&Mu(t.session))}return"session"===t.recordingMode&&t.flush(),!0}))}}async function yl({recordingData:t,replayId:e,segmentId:n,eventContext:r,timestamp:s,session:o}){const i=function({recordingData:t,headers:e}){let n;const r=`${JSON.stringify(e)}\n`;if("string"==typeof t)n=`${r}${t}`;else{const e=(new TextEncoder).encode(r);n=new Uint8Array(e.length+t.length),n.set(e),n.set(t,e.length)}return n}({recordingData:t,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=De(),p=Ne(),h=d&&d.getTransport(),f=d&&d.getDsn();if(!(d&&h&&f&&o.sampled))return;const m={type:Fi,replay_start_timestamp:l/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:e,segment_id:n,replay_type:o.sampled},g=await async function({client:t,scope:e,replayId:n,event:r}){const s={event_id:n,integrations:"object"!=typeof t._integrations||null===t._integrations||Array.isArray(t._integrations)?void 0:Object.keys(t._integrations)};t.emit&&t.emit("preprocessEvent",r,s);const o=await pe(t.getOptions(),r,s,e,t,Xt());if(!o)return null;o.platform=o.platform||"javascript";const i=t.getSdkMetadata&&t.getSdkMetadata(),{name:a,version:c}=i&&i.sdk||{};return o.sdk={...o.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},o}({scope:p,client:d,replayId:e,event:m});if(!g)return d.recordDroppedEvent("event_processor","replay",m),void yu("An event processor returned `null`, will not send event.");delete g.sdkProcessingMetadata;const y=function(t,e,n,r){return $n(Gn(t,Wn(t),r,n),[[{type:"replay_event"},t],[{type:"replay_recording",length:"string"==typeof e?(new TextEncoder).encode(e).length:e.length},e]])}(g,i,f,d.getOptions().tunnel);let _;try{_=await h.send(y)}catch(t){const e=new Error(Bi);try{e.cause=t}catch(t){}throw e}if(!_)return _;if("number"==typeof _.statusCode&&(_.statusCode<200||_.statusCode>=300))throw new _l(_.statusCode);const v=_r({},_);if(yr(v,"replay"))throw new vl(v);return _}class _l extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class vl extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function bl(t,e={count:0,interval:5e3}){const{recordingData:n,options:r}=t;if(n.length)try{return await yl(t),!0}catch(n){if(n instanceof _l||n instanceof vl)throw n;if(Se("Replays",{_retryCount:e.count}),mu&&r._experiments&&r._experiments.captureExceptions&&ge(n),e.count>=3){const t=new Error(`${Bi} - max retries exceeded`);try{t.cause=n}catch(t){}throw t}return e.interval*=++e.count,new Promise(((n,r)=>{setTimeout((async()=>{try{await bl(t,e),n(!0)}catch(t){r(t)}}),e.interval)}))}}const Sl="__THROTTLED";function kl(t,e,n){const r=new Map;let s=!1;return(...o)=>{const i=Math.floor(Date.now()/1e3);if((t=>{const e=t-n;r.forEach(((t,n)=>{n<e&&r.delete(n)}))})(i),[...r.values()].reduce(((t,e)=>t+e),0)>=e){const t=s;return s=!0,t?"__SKIPPED":Sl}s=!1;const a=r.get(i)||0;return r.set(i,a+1),t(...o)}}class wl{constructor({options:t,recordingOptions:e}){wl.prototype.__init.call(this),wl.prototype.__init2.call(this),wl.prototype.__init3.call(this),wl.prototype.__init4.call(this),wl.prototype.__init5.call(this),wl.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=e,this._options=t,this._debouncedFlush=function(t,e,n){let r,s,o;const i=n&&n.maxWait?Math.max(n.maxWait,e):0;function a(){return c(),r=t(),r}function c(){void 0!==s&&clearTimeout(s),void 0!==o&&clearTimeout(o),s=o=void 0}function u(){return s&&clearTimeout(s),s=setTimeout(a,e),i&&void 0===o&&(o=setTimeout(a,i)),r}return u.cancel=c,u.flush=function(){return void 0!==s||void 0!==o?a():r},u}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=kl(((t,e)=>function(t,e,n){return Fu(t,e)?$u(t,e,n):Promise.resolve(null)}(this,t,e)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),s=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;s&&(this.clickDetector=new tu(this,s))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(t){const{errorSampleRate:e,sessionSampleRate:n}=this._options;e<=0&&n<=0||(this._initializeSessionForSampling(t),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",_u(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");_u("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const t=Nu({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");_u("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const t=Nu({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=zc({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:gl(this),onMutation:this._onMutationHandler,...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this._handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this._handleException(t),!1}}async stop({forceFlush:t=!1,reason:e}={}){if(this._isEnabled){this._isEnabled=!1;try{yu("[Replay] Stopping Replay"+(e?` triggered by ${e}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Cu(this)}catch(t){this._handleException(t)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),yu("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),yu("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const e=Date.now();yu("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();t&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(e),this._updateSessionActivity(e),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const e=t();"buffer"!==this.recordingMode&&!0!==e&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&Au(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const t=`${Pi.location.pathname}${Pi.location.hash}${Pi.location.search}`,e=`${Pi.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=e,this._context.initialTimestamp=Date.now(),this._context.urls.push(e)}throttledAddEvent(t,e){const n=this._throttledAddEvent(t,e);if(n===Sl){const t=su({category:"replay.throttled"});this.addUpdate((()=>!Pu(this,{type:5,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t,metric:!0}})))}return n}getCurrentRoute(){const t=this.lastTransaction||Ne().getTransaction(),e=(t&&Lt(t).data||{})[Nr];if(t&&e&&["route","custom"].includes(e))return Lt(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=xu({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(t){mu&&L.error("[Replay]",t),mu&&this._options._experiments&&this._options._experiments.captureExceptions&&ge(t)}_initializeSessionForSampling(t){const e=this._options.errorSampleRate>0,n=Nu({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:e});this.session=n}_checkSession(){if(!this.session)return!1;const t=this.session;return!Lu(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(t),!1)}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{Pi.document.addEventListener("visibilitychange",this._handleVisibilityChange),Pi.addEventListener("blur",this._handleWindowBlur),Pi.addEventListener("focus",this._handleWindowFocus),Pi.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(t){const e=Ne(),n=De();e.addScopeListener(hl(t)),ro(cu(t)),Ks(Gu(t)),dl(t);const r=qu(t,!fl(n));n&&n.addEventProcessor?n.addEventProcessor(r):rs(r),fl(n)&&(n.on("beforeSendEvent",zu(t)),n.on("afterSendEvent",Hu(t)),n.on("createDsc",(e=>{const n=t.getSessionId();n&&t.isEnabled()&&"session"===t.recordingMode&&t.checkAndHandleExpiredSession()&&(e.replay_id=n)})),n.on("startTransaction",(e=>{t.lastTransaction=e})),n.on("finishTransaction",(e=>{t.lastTransaction=e})),n.on("beforeSendFeedback",((e,n)=>{const r=t.getSessionId();n&&n.includeReplay&&t.isEnabled()&&r&&(t.flush(),e.contexts&&e.contexts.feedback&&(e.contexts.feedback.replay_id=r))})))}(this),this._hasInitializedCoreListeners=!0)}catch(t){this._handleException(t)}this._performanceCleanupCallback=fu(this)}_removeListeners(){try{Pi.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Pi.removeEventListener("blur",this._handleWindowBlur),Pi.removeEventListener("focus",this._handleWindowFocus),Pi.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this._handleException(t)}}__init(){this._handleVisibilityChange=()=>{"visible"===Pi.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const t=su({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{const t=su({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{lu(this,t)}}_doChangeToBackgroundTasks(t){if(!this.session)return;Du(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;this.checkAndHandleExpiredSession()?t&&this._createCustomBreadcrumb(t):yu("[Replay] Document has become active, but session has expired")}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate((()=>{this.throttledAddEvent({type:Za.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})}))}_addPerformanceEntries(){const t=(e=this.performanceEntries,e.map(pu).filter(Boolean)).concat(this.replayPerformanceEntries);var e;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Wu(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:e}=this;if(!t||!e)return;if(t.segmentId)return;const n=e.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(this.session&&this.eventBuffer&&t){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(t){try{return Promise.all(Wu(t,[ml(Pi.performance.memory)]))}catch(t){return[]}}(this),this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const e=Date.now();if(e-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const s=await this.eventBuffer.finish();await bl({replayId:t,recordingData:s,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:e})}catch(t){this._handleException(t),this.stop({reason:"sendReplay"});const e=De();e&&e.recordDroppedEvent("send_error","replay")}}else mu&&L.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession())return void(mu&&L.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const e=this.session.started,n=Date.now()-e;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,s=n>this._options.maxReplayDuration+5e3;if(r||s)return yu(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const o=this.eventBuffer;if(o&&0===this.session.segmentId&&!o.hasCheckout&&yu("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(t){mu&&L.error(t)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Mu(this.session)}__init6(){this._onMutationHandler=t=>{const e=t.length,n=this._options.mutationLimit,r=n&&e>n;if(e>this._options.mutationBreadcrumbLimit||r){const t=su({category:"replay.mutations",data:{count:e,limit:r}});this._createCustomBreadcrumb(t)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function El(t,e,n,r){const s=[...t,..."string"==typeof r?r.split(","):[],...e];return void 0!==n&&("string"==typeof n&&s.push(`.${n}`),D((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),s.join(",")}const xl='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Tl=["content-length","content-type","accept"];let Cl=!1;const Il=t=>new Rl(t);class Rl{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=5e3,flushMaxDelay:e=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:s=!0,useCompression:o=!0,workerUrl:i,_experiments:a={},sessionSampleRate:c,errorSampleRate:u,maskAllText:l=!0,maskAllInputs:d=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:h=750,mutationLimit:f=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:y=[],networkDetailDenyUrls:_=[],networkCaptureBodies:v=!0,networkRequestHeaders:b=[],networkResponseHeaders:S=[],mask:k=[],maskAttributes:w=["title","placeholder"],unmask:E=[],block:x=[],unblock:T=[],ignore:C=[],maskFn:I,beforeAddRecordingEvent:R,beforeErrorSampling:M,blockClass:O,blockSelector:A,maskInputOptions:D,maskTextClass:L,maskTextSelector:N,ignoreClass:P}={}){this.name=Rl.id;const $=function({mask:t,unmask:e,block:n,unblock:r,ignore:s,blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:c,ignoreClass:u}){const l={maskTextSelector:El(t,[".sentry-mask","[data-sentry-mask]"],a,c),unmaskTextSelector:El(e,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:El(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],o,i),unblockSelector:El(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:El(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],u)};return o instanceof RegExp&&(l.blockClass=o),a instanceof RegExp&&(l.maskTextClass=a),l}({mask:k,unmask:E,block:x,unblock:T,ignore:C,blockClass:O,blockSelector:A,maskTextClass:L,maskTextSelector:N,ignoreClass:P});if(this._recordingOptions={maskAllInputs:d,maskAllText:l,maskInputOptions:{...D||{},password:!0},maskTextFn:I,maskInputFn:I,maskAttributeFn:(t,e,n)=>function({el:t,key:e,maskAttributes:n,maskAllText:r,privacyOptions:s,value:o}){return r?s.unmaskTextSelector&&t.matches(s.unmaskTextSelector)?o:n.includes(e)||"value"===e&&"INPUT"===t.tagName&&["submit","button"].includes(t.getAttribute("type")||"")?o.replace(/[\S]/g,"*"):o:o}({maskAttributes:w,maskAllText:l,privacyOptions:$,key:t,value:e,el:n}),...$,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:t=>{try{t.__rrweb__=!0}catch(t){}}},this._initialOptions={flushMinDelay:t,flushMaxDelay:e,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,zi),stickySession:s,sessionSampleRate:c,errorSampleRate:u,useCompression:o,workerUrl:i,blockAllMedia:p,maskAllInputs:d,maskAllText:l,mutationBreadcrumbLimit:h,mutationLimit:f,slowClickTimeout:m,slowClickIgnoreSelectors:g,networkDetailAllowUrls:y,networkDetailDenyUrls:_,networkCaptureBodies:v,networkRequestHeaders:Ml(b),networkResponseHeaders:Ml(S),beforeAddRecordingEvent:R,beforeErrorSampling:M,_experiments:a},"number"==typeof c&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${c} })`),this._initialOptions.sessionSampleRate=c),"number"==typeof u&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${u} })`),this._initialOptions.errorSampleRate=u),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${xl}`:xl),this._isInitialized&&ai())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Cl}set _isInitialized(t){Cl=t}setupOnce(){ai()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(t){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const t=function(t){const e=De(),n=e&&e.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...G(t)};if(!n)return D((()=>{console.warn("SDK client is not available.")})),r;null==t.sessionSampleRate&&null==t.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&D((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new wl({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const t=De().getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch(t){}}}function Ml(t){return[...Tl,...t.map((t=>t.toLowerCase()))]}var Ol;function Al(t,e,n=1/0,r=0){return t?t.nodeType!==t.ELEMENT_NODE||r>n?-1:e(t)?r:Al(t.parentNode,e,n,r+1):-1}function Dl(t,e){return n=>{const r=n;if(null===r)return!1;try{if(t)if("string"==typeof t){if(r.matches(`.${t}`))return!0}else if(function(t,e){for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}return!1}(r,t))return!0;return!(!e||!r.matches(e))}catch(t){return!1}}}Rl.__initStatic(),function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(Ol||(Ol={}));const Ll="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Nl,Pl={map:{},getId(){return console.error(Ll),-1},getNode(){return console.error(Ll),null},removeNodeFromMap(){console.error(Ll)},has(){return console.error(Ll),!1},reset(){console.error(Ll)}};function $l(t,e,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(t,e);return s.Object.defineProperty(t,e,r?n:{set(t){setTimeout((()=>{n.set.call(this,t)}),0),o&&o.set&&o.set.call(this,t)}}),()=>$l(t,e,o||{},!0)}function Fl(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],s=n(r);return"function"==typeof s&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=s,()=>{t[e]=r}}catch(t){return()=>{}}}function Bl(t,e,n,r,s){if(!t)return!1;const o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(!o)return!1;const i=Dl(e,n);if(!s){const t=r&&o.matches(r);return i(o)&&!t}const a=Al(o,i);let c=-1;return!(a<0)&&(r&&(c=Al(o,Dl(null,r))),a>-1&&c<0||a<c)}function jl(...t){return function(){if(Nl)return Nl;const t=window.document;let e=window.requestAnimationFrame;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const r=n.contentWindow;r&&r.requestAnimationFrame&&(e=r.requestAnimationFrame),t.head.removeChild(n)}catch(t){}return Nl=e.bind(window)}()(...t)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Pl=new Proxy(Pl,{get(t,e,n){return"map"===e&&console.error(Ll),Reflect.get(t,e,n)}})),/[1-9][0-9]{12}/.test(Date.now().toString());var Ul=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(Ul||{});for(var Hl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zl="undefined"==typeof Uint8Array?[]:new Uint8Array(256),ql=0;ql<64;ql++)zl[Hl.charCodeAt(ql)]=ql;const Wl=new Map;const Gl=(t,e,n)=>{if(!t||!Kl(t,e)&&"object"!=typeof t)return;const r=function(t,e){let n=Wl.get(t);return n||(n=new Map,Wl.set(t,n)),n.has(e)||n.set(e,[]),n.get(e)}(n,t.constructor.name);let s=r.indexOf(t);return-1===s&&(s=r.length,r.push(t)),s};function Vl(t,e,n){if(t instanceof Array)return t.map((t=>Vl(t,e,n)));if(null===t)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray){return{rr_type:t.constructor.name,args:[Object.values(t)]}}if(t instanceof ArrayBuffer){const e=t.constructor.name,n=function(t){var e,n=new Uint8Array(t),r=n.length,s="";for(e=0;e<r;e+=3)s+=Hl[n[e]>>2],s+=Hl[(3&n[e])<<4|n[e+1]>>4],s+=Hl[(15&n[e+1])<<2|n[e+2]>>6],s+=Hl[63&n[e+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s}(t);return{rr_type:e,base64:n}}if(t instanceof DataView){return{rr_type:t.constructor.name,args:[Vl(t.buffer,e,n),t.byteOffset,t.byteLength]}}if(t instanceof HTMLImageElement){const e=t.constructor.name,{src:n}=t;return{rr_type:e,src:n}}if(t instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:t.toDataURL()}}if(t instanceof ImageData){return{rr_type:t.constructor.name,args:[Vl(t.data,e,n),t.width,t.height]}}if(Kl(t,e)||"object"==typeof t){return{rr_type:t.constructor.name,index:Gl(t,e,n)}}return t}const Yl=(t,e,n)=>t.map((t=>Vl(t,e,n))),Kl=(t,e)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((t=>"function"==typeof e[t]));return Boolean(n.find((n=>t instanceof e[n])))};function Jl(t,e,n,r,s){const o=[];try{const i=Fl(t.HTMLCanvasElement.prototype,"getContext",(function(t){return function(o,...i){if(!Bl(this,e,n,r,!0)){const t=function(t){return"experimental-webgl"===t?"webgl":t}(o);if("__context"in this||(this.__context=t),s&&["webgl","webgl2"].includes(t))if(i[0]&&"object"==typeof i[0]){const t=i[0];t.preserveDrawingBuffer||(t.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return t.apply(this,[o,...i])}}));o.push(i)}catch(t){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach((t=>t()))}}function Xl(t,e,n,r,s,o,i,a){const c=[],u=Object.getOwnPropertyNames(t);for(const i of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof t[i])continue;const u=Fl(t,i,(function(t){return function(...c){const u=t.apply(this,c);if(Gl(u,a,this),"tagName"in this.canvas&&!Bl(this.canvas,r,s,o,!0)){const t=Yl(c,a,this),r={type:e,property:i,args:t};n(this.canvas,r)}return u}}));c.push(u)}catch(r){const s=$l(t,i,{set(t){n(this.canvas,{type:e,property:i,args:[t],setter:!0})}});c.push(s)}return c}class Zl{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(t,e)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(t)||this.pendingCanvasMutations.set(t,[]),this.pendingCanvasMutations.get(t).push(e)};const{sampling:e="all",win:n,blockClass:r,blockSelector:s,unblockSelector:o,recordCanvas:i,dataURLOptions:a}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,t.enableManualSnapshot||(()=>{i&&"all"===e&&this.initCanvasMutationObserver(n,r,s,o),i&&"number"==typeof e&&this.initCanvasFPSObserver(e,n,r,s,o,{dataURLOptions:a})})()}initCanvasFPSObserver(t,e,n,r,s,o){const i=Jl(e,n,r,s,!0),a=this.takeSnapshot(!1,t,e,n,r,s,o.dataURLOptions);this.resetObservers=()=>{i(),cancelAnimationFrame(a)}}initCanvasMutationObserver(t,e,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const s=Jl(t,e,n,r,!1),o=function(t,e,n,r,s){const o=[],i=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof e.CanvasRenderingContext2D.prototype[a])continue;const i=Fl(e.CanvasRenderingContext2D.prototype,a,(function(o){return function(...i){return Bl(this.canvas,n,r,s,!0)||setTimeout((()=>{const n=Yl(i,e,this);t(this.canvas,{type:Ul["2D"],property:a,args:n})}),0),o.apply(this,i)}}));o.push(i)}catch(n){const r=$l(e.CanvasRenderingContext2D.prototype,a,{set(e){t(this.canvas,{type:Ul["2D"],property:a,args:[e],setter:!0})}});o.push(r)}return()=>{o.forEach((t=>t()))}}(this.processMutation.bind(this),t,e,n,r),i=function(t,e,n,r,s,o){const i=[];return i.push(...Xl(e.WebGLRenderingContext.prototype,Ul.WebGL,t,n,r,s,0,e)),void 0!==e.WebGL2RenderingContext&&i.push(...Xl(e.WebGL2RenderingContext.prototype,Ul.WebGL2,t,n,r,s,0,e)),()=>{i.forEach((t=>t()))}}(this.processMutation.bind(this),t,e,n,r,this.mirror);this.resetObservers=()=>{s(),o(),i()}}snapshot(t){const{options:e}=this,n=this.takeSnapshot(!0,"all"===e.sampling?2:e.sampling||2,e.win,e.blockClass,e.blockSelector,e.unblockSelector,e.dataURLOptions,t);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(t,e,n,r,s,o,i,a){const c=new Map,u=new Worker(function(){const t=new Blob(['for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e="undefined"==typeof Uint8Array?[]:new Uint8Array(256),n=0;n<64;n++)e[t.charCodeAt(n)]=n;var a=function(e){var n,a=new Uint8Array(e),s=a.length,r="";for(n=0;n<s;n+=3)r+=t[a[n]>>2],r+=t[(3&a[n])<<4|a[n+1]>>4],r+=t[(15&a[n+1])<<2|a[n+2]>>6],r+=t[63&a[n+2]];return s%3==2?r=r.substring(0,r.length-1)+"=":s%3==1&&(r=r.substring(0,r.length-2)+"=="),r};const s=new Map,r=new Map;const i=self;i.onmessage=async function(t){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:t.data.id});{const{id:e,bitmap:n,width:o,height:f,dataURLOptions:c}=t.data,g=async function(t,e,n){const s=t+"-"+e;if("OffscreenCanvas"in globalThis){if(r.has(s))return r.get(s);const i=new OffscreenCanvas(t,e);i.getContext("2d");const o=await i.convertToBlob(n),f=await o.arrayBuffer(),c=a(f);return r.set(s,c),c}return""}(o,f,c),d=new OffscreenCanvas(o,f);d.getContext("2d").drawImage(n,0,0),n.close();const u=await d.convertToBlob(c),h=u.type,w=await u.arrayBuffer(),l=a(w);if(!s.has(e)&&await g===l)return s.set(e,l),i.postMessage({id:e});if(s.get(e)===l)return i.postMessage({id:e});i.postMessage({id:e,type:h,base64:l,width:o,height:f}),s.set(e,l)}};']);return URL.createObjectURL(t)}());u.onmessage=t=>{const e=t.data,{id:n}=e;if(c.set(n,!1),!("base64"in e))return;const{base64:r,type:s,width:o,height:i}=e;this.mutationCb({id:n,type:Ul["2D"],commands:[{property:"clearRect",args:[0,0,o,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:s}]},0,0]}]})};const l=1e3/e;let d,p=0;const h=e=>{p&&e-p<l||(p=e,(t=>{if(t)return[t];const e=[];return n.document.querySelectorAll("canvas").forEach((t=>{Bl(t,r,s,o,!0)||e.push(t)})),e})(a).forEach((e=>{const n=this.mirror.getId(e);if(!c.get(n)){if(c.set(n,!0),!t&&["webgl","webgl2"].includes(e.__context)){const t=e.getContext(e.__context);!1===ri([t,"optionalAccess",t=>t.getContextAttributes,"call",t=>t(),"optionalAccess",t=>t.preserveDrawingBuffer])&&t.clear(t.COLOR_BUFFER_BIT)}createImageBitmap(e).then((t=>{u.postMessage({id:n,bitmap:t,width:e.width,height:e.height,dataURLOptions:i},[t])})).catch((t=>{(()=>{throw t})()}))}}))),d=jl(h)};return d=jl(h),d}startPendingCanvasMutationFlusher(){jl((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const t=e=>{this.rafStamps.latestId=e,jl(t)};jl(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((t,e)=>{const n=this.mirror.getId(e);this.flushPendingCanvasMutationFor(e,n)})),jl((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(t,e){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(t);if(!n||-1===e)return;const r=n.map((t=>{const{type:e,...n}=t;return n})),{type:s}=n[0];this.mutationCb({id:e,type:s,commands:r}),this.pendingCanvasMutations.delete(t)}}const Ql={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},td="ReplayCanvas",ed=(t={})=>{const e={quality:t.quality||"medium",enableManualSnapshot:t.enableManualSnapshot};let n;const r=new Promise((t=>n=t));return{name:td,setupOnce(){},getOptions(){const{quality:t,enableManualSnapshot:r}=e;return{enableManualSnapshot:r,recordCanvas:!0,getCanvasManager:t=>{const e=new Zl({...t,enableManualSnapshot:r});return n(e),e},...Ql[t||"medium"]||Ql.medium}},async snapshot(t){(await r).snapshot(t)}}},nd=We(td,ed),rd=b,sd="#ffffff",od="inherit",id="rgba(108, 95, 199, 1)",ad={fontFamily:"'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:sd,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"12px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:id,submitBorder:id,submitOutlineFocus:"#29232f",submitForeground:sd,submitForegroundHover:sd,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:od,inputForeground:od,inputBorder:"var(--border)",inputOutlineFocus:id,formBorderRadius:"20px",formContentBorderRadius:"6px"},cd=ad,ud={...ad,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},ld="widget",dd="api";async function pd({feedback:{message:t,email:e,name:n,source:r,url:s}},{includeReplay:o=!0}={}){const i=De(),a=i&&i.getTransport(),c=i&&i.getDsn();if(!i||!a||!c)return;const u={contexts:{feedback:{contact_email:e,name:n,message:t,url:s,source:r}},type:"feedback"};return Ce((async t=>{t.clearBreadcrumbs(),[dd,ld].includes(String(r))&&t.setLevel("info");const e=await async function({client:t,scope:e,event:n}){const r={};t.emit&&t.emit("preprocessEvent",n,r);const s=await pe(t.getOptions(),n,r,e,t,Xt());return null===s?(t.recordDroppedEvent("event_processor","feedback",n),null):(s.platform=s.platform||"javascript",s)}({scope:t,client:i,event:u});if(!e)return;i.emit&&i.emit("beforeSendFeedback",e,{includeReplay:Boolean(o)});const n=Xr(e,c,i.getOptions()._metadata,i.getOptions().tunnel);let s;try{s=await a.send(n)}catch(t){const e=new Error("Unable to send Feedback");try{e.cause=t}catch(t){}throw e}if(s){if("number"==typeof s.statusCode&&(s.statusCode<200||s.statusCode>=300))throw new Error("Unable to send Feedback");return s}}))}function hd({name:t,email:e,message:n,source:r=dd,url:s=C()},o={}){if(!n)throw new Error("Unable to submit feedback with empty message");return pd({feedback:{name:t,email:e,message:n,url:s,source:r}},o)}const fd="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function md(t,e){return{...t,...e,themeDark:{...t.themeDark,...e.themeDark},themeLight:{...t.themeLight,...e.themeLight}}}function gd(t){return`\n  --background: ${t.background};\n  --background-hover: ${t.backgroundHover};\n  --foreground: ${t.foreground};\n  --error: ${t.error};\n  --success: ${t.success};\n  --border: ${t.border};\n  --border-radius: ${t.borderRadius};\n  --box-shadow: ${t.boxShadow};\n\n  --submit-background: ${t.submitBackground};\n  --submit-background-hover: ${t.submitBackgroundHover};\n  --submit-border: ${t.submitBorder};\n  --submit-outline-focus: ${t.submitOutlineFocus};\n  --submit-foreground: ${t.submitForeground};\n  --submit-foreground-hover: ${t.submitForegroundHover};\n\n  --cancel-background: ${t.cancelBackground};\n  --cancel-background-hover: ${t.cancelBackgroundHover};\n  --cancel-border: ${t.cancelBorder};\n  --cancel-outline-focus: ${t.cancelOutlineFocus};\n  --cancel-foreground: ${t.cancelForeground};\n  --cancel-foreground-hover: ${t.cancelForegroundHover};\n\n  --input-background: ${t.inputBackground};\n  --input-foreground: ${t.inputForeground};\n  --input-border: ${t.inputBorder};\n  --input-outline-focus: ${t.inputOutlineFocus};\n\n  --form-border-radius: ${t.formBorderRadius};\n  --form-content-border-radius: ${t.formContentBorderRadius};\n  `}function yd({id:t,colorScheme:e,themeDark:n,themeLight:r}){try{const s=rd.document,o=s.createElement("div");o.id=t;const i=o.attachShadow({mode:"open"});return i.appendChild(function(t,e,n){const r=t.createElement("style");return r.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${gd("dark"===e?n.dark:n.light)}\n}\n\n${"system"===e?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${gd(n.dark)}\n  }\n}`:""}\n}`,r}(s,e,{dark:n,light:r})),i.appendChild(function(t){const e=t.createElement("style");return e.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  font-family: inherit;\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-size: 14px;\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",e}(s)),{shadow:i,host:o}}catch(t){throw L.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function _d(t,e,n){if(!t)return;t.hideError();try{return await hd({...e,source:ld},n)}catch(e){fd&&L.error(e),t&&t.showError("There was a problem submitting feedback, please wait and try again.")}}function vd(t,e){return Object.entries(e).forEach((([e,n])=>{t.setAttributeNS(null,e,n)})),t}const bd=20,Sd="http://www.w3.org/2000/svg";function kd(t,e,...n){const r=rd.document.createElement(t);e&&Object.entries(e).forEach((([t,e])=>{"className"===t&&"string"==typeof e?r.setAttribute("class",e):"boolean"==typeof e&&e?r.setAttribute(t,""):"string"==typeof e?r.setAttribute(t,e):t.startsWith("on")&&"function"==typeof e&&r.addEventListener(t.substring(2).toLowerCase(),e)}));for(const t of n)wd(r,t);return r}function wd(t,e){const n=rd.document;if(null!=e)if(Array.isArray(e))for(const n of e)wd(t,n);else!1===e||("string"==typeof e?t.appendChild(n.createTextNode(e)):e instanceof Node?t.appendChild(e):t.appendChild(n.createTextNode(String(e))))}function Ed({buttonLabel:t,onClick:e}){const n=kd("button",{type:"button",className:"widget__actor","aria-label":t,"aria-hidden":"false"},function(){const t=t=>rd.document.createElementNS(Sd,t),e=vd(t("svg"),{class:"feedback-icon",width:`${bd}`,height:`${bd}`,viewBox:`0 0 ${bd} ${bd}`,fill:"none"}),n=vd(t("g"),{clipPath:"url(#clip0_57_80)"}),r=vd(t("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});e.appendChild(n).appendChild(r);const s=t("defs"),o=vd(t("clipPath"),{id:"clip0_57_80"}),i=vd(t("rect"),{width:`${bd}`,height:`${bd}`,fill:"white"});return o.appendChild(i),s.appendChild(o),e.appendChild(s).appendChild(o).appendChild(i),{get el(){return e}}}().el,t?kd("span",{className:"widget__actor__text"},t):null);return n.addEventListener("click",(function(t){e&&e(t)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function xd(t,e){const n=t.get(e);return"string"==typeof n?n.trim():""}function Td({nameLabel:t,namePlaceholder:e,emailLabel:n,emailPlaceholder:r,messageLabel:s,messagePlaceholder:o,cancelButtonLabel:i,submitButtonLabel:a,showName:c,showEmail:u,isNameRequired:l,isEmailRequired:d,defaultName:p,defaultEmail:h,onCancel:f,onSubmit:m}){const{el:g}=function({label:t}){return{el:kd("button",{type:"submit",className:"btn btn--primary","aria-label":t},t)}}({label:a});const y=kd("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const _=kd("input",{id:"name",type:c?"text":"hidden","aria-hidden":c?"false":"true",name:"name",required:l,className:"form__input",placeholder:e,value:p}),v=kd("input",{id:"email",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"email",required:d,className:"form__input",placeholder:r,value:h}),b=kd("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:o}),S=kd("button",{type:"button",className:"btn btn--default","aria-label":i,onClick:t=>{f&&f(t)}},i),k=kd("form",{className:"form",onSubmit:function(t){if(t.preventDefault(),t.target instanceof HTMLFormElement)try{if(m){const e=new FormData(t.target),n={name:xd(e,"name"),email:xd(e,"email"),message:xd(e,"message")};m(n)}}catch(t){}}},[y,c&&kd("label",{htmlFor:"name",className:"form__label"},[kd("span",{className:"form__label__text"},t,l&&kd("span",{className:"form__label__text--required"}," (required)")),_]),!c&&_,u&&kd("label",{htmlFor:"email",className:"form__label"},[kd("span",{className:"form__label__text"},n,d&&kd("span",{className:"form__label__text--required"}," (required)")),v]),!u&&v,kd("label",{htmlFor:"message",className:"form__label"},[kd("span",{className:"form__label__text"},s,kd("span",{className:"form__label__text--required"}," (required)")),b]),kd("div",{className:"btn-group"},[g,S])]);return{get el(){return k},showError:function(t){y.textContent=t,y.classList.remove("form__error-container--hidden"),y.setAttribute("aria-hidden","false")},hideError:function(){y.textContent="",y.classList.add("form__error-container--hidden"),y.setAttribute("aria-hidden","true")}}}const Cd="http://www.w3.org/2000/svg";function Id({formTitle:t,showBranding:e,showName:n,showEmail:r,isNameRequired:s,isEmailRequired:o,colorScheme:i,defaultName:a,defaultEmail:c,onClosed:u,onCancel:l,onSubmit:d,...p}){let h=null;function f(){h&&(h.open=!1)}const{el:m,showError:g,hideError:y}=Td({showEmail:r,showName:n,isEmailRequired:o,isNameRequired:s,defaultName:a,defaultEmail:c,onSubmit:d,onCancel:l,...p});return h=kd("dialog",{className:"dialog",open:!0,onClick:function(){f(),u&&u()}},kd("div",{className:"dialog__content",onClick:t=>{t.stopPropagation()}},kd("h2",{className:"dialog__header"},t,e&&kd("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:t}){const e=t=>rd.document.createElementNS(Cd,t),n=vd(e("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=vd(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const s=e("defs"),o=e("style");return"system"===t&&(o.textContent="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),o.textContent=`\n    path {\n      fill: ${"dark"===t?"#fff":"#362d59"};\n    }`,s.append(o),n.append(s),{get el(){return n}}}({colorScheme:i}).el)),m)),{get el(){return h},showError:g,hideError:y,open:function(){h&&(h.open=!0)},close:f,checkIsOpen:function(){return h&&!0===h.open||!1}}}const Rd=16,Md=17,Od="http://www.w3.org/2000/svg";function Ad({message:t,onRemove:e}){function n(){r&&(r.remove(),e&&e())}const r=kd("div",{className:"success-message",onClick:n},function(){const t=t=>rd.document.createElementNS(Od,t),e=vd(t("svg"),{class:"success-icon",width:`${Rd}`,height:`${Md}`,viewBox:`0 0 ${Rd} ${Md}`,fill:"none"}),n=vd(t("g"),{clipPath:"url(#clip0_57_156)"}),r=vd(t("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=vd(t("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});e.appendChild(n).append(s,r);const o=t("defs"),i=vd(t("clipPath"),{id:"clip0_57_156"}),a=vd(t("rect"),{width:`${Rd}`,height:`${Rd}`,fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),o.appendChild(i),e.appendChild(o).appendChild(i).appendChild(a),{get el(){return e}}}().el,t);return{el:r,remove:n}}function Dd({shadow:t,options:{shouldCreateActor:e=!0,...n},attachTo:r}){let s,o,i=!1;async function a(e){if(!o)return;const r=[];if(n.isNameRequired&&!e.name&&r.push(n.nameLabel),n.isEmailRequired&&!e.email&&r.push(n.emailLabel),e.message||r.push(n.messageLabel),r.length>0)return void o.showError(`Please enter in the following required fields: ${r.join(", ")}`);await _d(o,e)?(p(),function(){if(t)try{const e=Ad({message:n.successMessageText,onRemove:()=>{r&&clearTimeout(r),c()}});if(!e.el)throw new Error("Unable to show success message");t.appendChild(e.el);const r=setTimeout((()=>{e&&e.remove()}),5e3)}catch(t){L.error(t)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function c(){s&&s.show()}function u(){s&&s.hide()}function l(){try{if(o)return o.open(),i=!0,void(n.onFormOpen&&n.onFormOpen());const e=n.useSentryUser,r=Ne(),s=r&&r.getUser();if(o=Id({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,defaultName:e&&s&&s[e.name]||"",defaultEmail:e&&s&&s[e.email]||"",onClosed:()=>{c(),i=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{d(),c()},onSubmit:a}),!o.el)throw new Error("Unable to open Feedback dialog");t.appendChild(o.el),u(),n.onFormOpen&&n.onFormOpen()}catch(t){L.error(t)}}function d(){o&&(o.close(),i=!1,n.onFormClose&&n.onFormClose())}function p(){if(o){d();const t=o.el;t&&t.remove(),o=void 0}}function h(){i||l(),u()}return r?r.addEventListener("click",h):e&&(s=Ed({buttonLabel:n.buttonLabel,onClick:h}),s.el&&t.appendChild(s.el)),{get actor(){return s},get dialog(){return o},showActor:c,hideActor:u,removeActor:function(){s&&s.el&&s.el.remove()},openDialog:l,closeDialog:d,removeDialog:p}}const Ld=rd.document,Nd=t=>new Pd(t);class Pd{static __initStatic(){this.id="Feedback"}constructor({id:t="sentry-feedback",showBranding:e=!0,autoInject:n=!0,showEmail:r=!0,showName:s=!0,useSentryUser:o={email:"email",name:"username"},isEmailRequired:i=!1,isNameRequired:a=!1,themeDark:c,themeLight:u,colorScheme:l="system",buttonLabel:d="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:h="Send Bug Report",formTitle:f="Report a Bug",emailPlaceholder:m="your.email@example.org",emailLabel:g="Email",messagePlaceholder:y="What's the bug? What did you expect?",messageLabel:_="Description",namePlaceholder:v="Your Name",nameLabel:b="Name",successMessageText:S="Thank you for your report!",onFormClose:k,onFormOpen:w,onSubmitError:E,onSubmitSuccess:x}={}){this.name=Pd.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={id:t,showBranding:e,autoInject:n,isEmailRequired:i,isNameRequired:a,showEmail:r,showName:s,useSentryUser:o,colorScheme:l,themeDark:{...ud,...c},themeLight:{...cd,...u},buttonLabel:d,cancelButtonLabel:p,submitButtonLabel:h,formTitle:f,emailLabel:g,emailPlaceholder:m,messageLabel:_,messagePlaceholder:y,nameLabel:b,namePlaceholder:v,successMessageText:S,onFormClose:k,onFormOpen:w,onSubmitError:E,onSubmitSuccess:x}}setupOnce(){if(ai())try{this._cleanupWidgetIfExists();const{autoInject:t}=this.options;if(!t)return;this._createWidget(this.options)}catch(t){fd&&L.error(t)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(t,e){try{const n=md(this.options,e||{});return this._ensureShadowHost(n,(({shadow:e})=>{const r="string"==typeof t?Ld.querySelector(t):"function"==typeof t.addEventListener?t:null;if(!r)return fd&&L.error("[Feedback] Unable to attach to target element"),null;const s=Dd({shadow:e,options:n,attachTo:r});return this._widgets.add(s),this._widget||(this._widget=s),s}))}catch(t){return fd&&L.error(t),null}}createWidget(t){try{return this._createWidget(md(this.options,t||{}))}catch(t){return fd&&L.error(t),null}}removeWidget(t){if(!t)return!1;try{if(this._widgets.has(t))return t.removeActor(),t.removeDialog(),this._widgets.delete(t),this._widget===t&&(this._widget=null),!0}catch(t){fd&&L.error(t)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const t=Ld.querySelector(`#${this.options.id}`);t&&t.remove()}_createWidget(t){return this._ensureShadowHost(t,(({shadow:e})=>{const n=Dd({shadow:e,options:t});return!this._hasInsertedActorStyles&&n.actor&&(e.appendChild(function(t){const e=t.createElement("style");return e.textContent="\n.widget__actor {\n  line-height: 25px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 600;\n  padding: 12px 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",e}(Ld)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(t,e){let n=!1;if(!this._shadow||!this._host){const{id:e,colorScheme:r,themeLight:s,themeDark:o}=t,{shadow:i,host:a}=yd({id:e,colorScheme:r,themeLight:s,themeDark:o});this._shadow=i,this._host=a,n=!0}this._host.dataset.sentryFeedbackColorscheme=t.colorScheme;const r=e({shadow:this._shadow,host:this._host});return n&&Ld.body.appendChild(this._host),r}}function $d(){li&&li.document?li.document.addEventListener("visibilitychange",(()=>{const t=Cn();if(li.document.hidden&&t){const e="cancelled",{op:n,status:r}=Lt(t);ci&&L.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),r||t.setStatus(e),t.setTag("visibilitychange","document.hidden"),t.end()}})):ci&&L.warn("[Tracing] Could not set up background tab detection due to lack of global document")}function Fd(t){return"number"==typeof t&&isFinite(t)}function Bd(t,{startTimestamp:e,...n}){return e&&t.startTimestamp>e&&(t.startTimestamp=e),t.startChild({startTimestamp:e,...n})}Pd.__initStatic();const jd=2147483647;function Ud(t){return t/1e3}function Hd(){return li&&li.addEventListener&&li.performance}let zd,qd,Wd=0,Gd={};function Vd(){const t=Hd();if(t&&at){t.mark&&li.performance.mark("sentry-tracing-init");const e=Di("fid",(({metric:t})=>{const e=t.entries[t.entries.length-1];if(!e)return;const n=Ud(at),r=Ud(e.startTime);ci&&L.log("[Measurements] Adding FID"),Gd.fid={value:t.value,unit:"millisecond"},Gd["mark.fid"]={value:n+r,unit:"second"}}),Oi,xi),n=function(t,e=!1){return Di("cls",t,Mi,Ei,e)}((({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(ci&&L.log("[Measurements] Adding CLS"),Gd.cls={value:t.value,unit:""},qd=e)}),!0),r=Ci((({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(ci&&L.log("[Measurements] Adding LCP"),Gd.lcp={value:t.value,unit:"millisecond"},zd=e)}),!0);return()=>{e(),n(),r()}}return()=>{}}function Yd(){Ii("longtask",(({entries:t})=>{for(const e of t){const t=Cn();if(!t)return;const n=Ud(at+e.startTime),r=Ud(e.duration);t.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}}))}function Kd(){Ii("event",(({entries:t})=>{for(const e of t){const t=Cn();if(!t)return;if("click"===e.name){const n=Ud(at+e.startTime),r=Ud(e.duration),s={description:x(e.target),op:`ui.interaction.${e.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},o=R(e.target);o&&(s.attributes={"ui.component_name":o}),t.startChild(s)}}}))}function Jd(t){const e=Hd();if(!e||!li.performance.getEntries||!at)return;ci&&L.log("[Tracing] Adding & adjusting spans using Performance API");const n=Ud(at),r=e.getEntries();let s,o;const{op:i,start_timestamp:a}=Lt(t);if(r.slice(Wd).forEach((e=>{const r=Ud(e.startTime),i=Ud(e.duration);if(!("navigation"===t.op&&a&&n+r<a))switch(e.entryType){case"navigation":!function(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{Xd(t,e,r,n)})),Xd(t,e,"secureConnection",n,"TLS/SSL","connectEnd"),Xd(t,e,"fetch",n,"cache","domainLookupStart"),Xd(t,e,"domainLookup",n,"DNS"),function(t,e,n){e.responseEnd&&(Bd(t,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+Ud(e.requestStart),endTimestamp:n+Ud(e.responseEnd)}),Bd(t,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+Ud(e.responseStart),endTimestamp:n+Ud(e.responseEnd)}))}(t,e,n)}(t,e,n),s=n+Ud(e.responseStart),o=n+Ud(e.requestStart);break;case"mark":case"paint":case"measure":{!function(t,e,n,r,s){const o=s+n,i=o+r;Bd(t,{description:e.name,endTimestamp:i,op:e.entryType,origin:"auto.resource.browser.metrics",startTimestamp:o})}(t,e,r,i,n);const s=_i(),o=e.startTime<s.firstHiddenTime;"first-paint"===e.name&&o&&(ci&&L.log("[Measurements] Adding FP"),Gd.fp={value:e.startTime,unit:"millisecond"}),"first-contentful-paint"===e.name&&o&&(ci&&L.log("[Measurements] Adding FCP"),Gd.fcp={value:e.startTime,unit:"millisecond"});break}case"resource":!function(t,e,n,r,s,o){if("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType)return;const i=yo(n),a={};Zd(a,e,"transferSize","http.response_transfer_size"),Zd(a,e,"encodedBodySize","http.response_content_length"),Zd(a,e,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in e&&(a["resource.render_blocking_status"]=e.renderBlockingStatus);i.protocol&&(a["url.scheme"]=i.protocol.split(":").pop());i.host&&(a["server.address"]=i.host);a["url.same_origin"]=n.includes(li.location.origin);const c=o+r,u=c+s;Bd(t,{description:n.replace(li.location.origin,""),endTimestamp:u,op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:a})}(t,e,e.name,r,i,n)}})),Wd=Math.max(r.length-1,0),function(t){const e=li.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),Fd(n.rtt)&&(Gd["connection.rtt"]={value:n.rtt,unit:"millisecond"}));Fd(e.deviceMemory)&&t.setTag("deviceMemory",`${e.deviceMemory} GB`);Fd(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}(t),"pageload"===i){!function(t,e,n,r){"number"==typeof e&&r&&(ci&&L.log("[Measurements] Adding TTFB"),t.ttfb={value:1e3*Math.max(e-r,0),unit:"millisecond"},"number"==typeof n&&n<=e&&(t["ttfb.requestTime"]={value:1e3*(e-n),unit:"millisecond"}))}(Gd,s,o,a),["fcp","fp","lcp"].forEach((t=>{if(!Gd[t]||!a||n>=a)return;const e=Gd[t].value,r=n+Ud(e),s=Math.abs(1e3*(r-a)),o=s-e;ci&&L.log(`[Measurements] Normalized ${t} from ${e} to ${s} (${o})`),Gd[t].value=s}));const e=Gd["mark.fid"];e&&Gd.fid&&(Bd(t,{description:"first input delay",endTimestamp:e.value+Ud(Gd.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:e.value}),delete Gd["mark.fid"]),"fcp"in Gd||delete Gd.cls,Object.keys(Gd).forEach((t=>{Rn(t,Gd[t].value,Gd[t].unit)})),function(t){zd&&(ci&&L.log("[Measurements] Adding LCP Data"),zd.element&&t.setTag("lcp.element",x(zd.element)),zd.id&&t.setTag("lcp.id",zd.id),zd.url&&t.setTag("lcp.url",zd.url.trim().slice(0,200)),t.setTag("lcp.size",zd.size));qd&&qd.sources&&(ci&&L.log("[Measurements] Adding CLS Data"),qd.sources.forEach(((e,n)=>t.setTag(`cls.source.${n+1}`,x(e.node)))))}(t)}zd=void 0,qd=void 0,Gd={}}function Xd(t,e,n,r,s,o){const i=o?e[o]:e[`${n}End`],a=e[`${n}Start`];a&&i&&Bd(t,{op:"browser",origin:"auto.browser.browser.metrics",description:s||n,startTimestamp:r+Ud(a),endTimestamp:r+Ud(i)})}function Zd(t,e,n,r){const s=e[n];null!=s&&s<jd&&(t[r]=s)}function Qd(t,e,n,r,s="auto.http.browser"){if(!fn()||!t.fetchData)return;const o=e(t.fetchData.url);if(t.endTimestamp&&o){const e=t.fetchData.__span;if(!e)return;const n=r[e];if(n){if(t.response){Tn(n,t.response.status);const e=t.response&&t.response.headers&&t.response.headers.get("content-length");if(e){const t=parseInt(e);t>0&&n.setAttribute("http.response_content_length",t)}}else t.error&&n.setStatus("internal_error");n.end(),delete r[e]}return}const i=Ne(),a=De(),{method:c,url:u}=t.fetchData,l=o?_n({name:`${c} ${u}`,onlyIfParent:!0,attributes:{url:u,type:"fetch","http.method":c,[Fr]:s},op:"http.client"}):void 0;if(l&&(t.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l),n(t.fetchData.url)&&a){const e=t.args[0];t.args[1]=t.args[1]||{};const n=t.args[1];n.headers=function(t,e,n,r,s){const o=s||n.getSpan(),i=Xt(),{traceId:a,spanId:c,sampled:u,dsc:l}={...i.getPropagationContext(),...n.getPropagationContext()},d=o?Ot(o):It(a,c,u),p=wt(l||(o?$t(o):Pt(a,e,n))),h=r.headers||("undefined"!=typeof Request&&y(t,Request)?t.headers:void 0);if(h){if("undefined"!=typeof Headers&&y(h,Headers)){const t=new Headers(h);return t.append("sentry-trace",d),p&&t.append(vt,p),t}if(Array.isArray(h)){const t=[...h,["sentry-trace",d]];return p&&t.push([vt,p]),t}{const t="baggage"in h?h.baggage:void 0,e=[];return Array.isArray(t)?e.push(...t):t&&e.push(t),p&&e.push(p),{...h,"sentry-trace":d,baggage:e.length>0?e.join(","):void 0}}}return{"sentry-trace":d,baggage:p}}(e,a,i,n,l)}return l}const tp=["localhost",/^\/(?!\/)/],ep={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:tp,tracePropagationTargets:tp};function np(t){const{traceFetch:e,traceXHR:n,tracePropagationTargets:r,tracingOrigins:s,shouldCreateSpanForRequest:o,enableHTTPTimings:i}={traceFetch:ep.traceFetch,traceXHR:ep.traceXHR,...t},a="function"==typeof o?o:t=>!0,c=t=>function(t,e){return F(t,e||tp)}(t,r||s),u={};e&&lo((t=>{const e=Qd(t,a,c,u);i&&e&&rp(e)})),n&&co((t=>{const e=function(t,e,n,r){const s=t.xhr,o=s&&s[ao];if(!fn()||!s||s.__sentry_own_request__||!o)return;const i=e(o.url);if(t.endTimestamp&&i){const t=s.__sentry_xhr_span_id__;if(!t)return;const e=r[t];return void(e&&void 0!==o.status_code&&(Tn(e,o.status_code),e.end(),delete r[t]))}const a=Ne(),c=Xt(),u=i?_n({name:`${o.method} ${o.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":o.method,url:o.url,[Fr]:"auto.http.browser"},op:"http.client"}):void 0;u&&(s.__sentry_xhr_span_id__=u.spanContext().spanId,r[s.__sentry_xhr_span_id__]=u);const l=De();if(s.setRequestHeader&&n(o.url)&&l){const{traceId:t,spanId:e,sampled:n,dsc:r}={...c.getPropagationContext(),...a.getPropagationContext()};!function(t,e,n){try{t.setRequestHeader("sentry-trace",e),n&&t.setRequestHeader(vt,n)}catch(t){}}(s,u?Ot(u):It(t,e,n),wt(r||(u?$t(u):Pt(t,l,a))))}return u}(t,a,c,u);i&&e&&rp(e)}))}function rp(t){const{url:e}=Lt(t).data||{};if(!e||"string"!=typeof e)return;const n=Ii("resource",(({entries:r})=>{r.forEach((r=>{if(function(t){return"resource"===t.entryType&&"initiatorType"in t&&"string"==typeof t.nextHopProtocol&&("fetch"===t.initiatorType||"xmlhttprequest"===t.initiatorType)}(r)&&r.name.endsWith(e)){(function(t){const{name:e,version:n}=function(t){let e="unknown",n="unknown",r="";for(const s of t){if("/"===s){[e,n]=t.split("/");break}if(!isNaN(Number(s))){e="h"===r?"http":r,n=t.split(r)[1];break}r+=s}r===t&&(e=r);return{name:e,version:n}}(t.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",e]),!at)return r;return[...r,["http.request.redirect_start",sp(t.redirectStart)],["http.request.fetch_start",sp(t.fetchStart)],["http.request.domain_lookup_start",sp(t.domainLookupStart)],["http.request.domain_lookup_end",sp(t.domainLookupEnd)],["http.request.connect_start",sp(t.connectStart)],["http.request.secure_connection_start",sp(t.secureConnectionStart)],["http.request.connection_end",sp(t.connectEnd)],["http.request.request_start",sp(t.requestStart)],["http.request.response_start",sp(t.responseStart)],["http.request.response_end",sp(t.responseEnd)]]})(r).forEach((e=>t.setAttribute(...e))),setTimeout(n)}}))}))}function sp(t=0){return((at||performance.timeOrigin)+t)/1e3}const op={...Hr,markBackgroundTransactions:!0,routingInstrumentation:function(t,e=!0,n=!0){if(!li||!li.location)return void(ci&&L.warn("Could not initialize routing instrumentation due to invalid location"));let r,s=li.location.href;e&&(r=t({name:li.location.pathname,startTimestamp:at?at/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&Ks((({to:e,from:n})=>{void 0===n&&s&&-1!==s.indexOf(e)?s=void 0:n!==e&&(s=void 0,r&&(ci&&L.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=t({name:li.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...ep};class ip{constructor(t){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,Jr(),ci&&(this._hasSetTracePropagationTargets=!(!t||!t.tracePropagationTargets&&!t.tracingOrigins)),this.options={...op,...t},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),this._collectWebVitals=Vd(),this.options.enableLongTask&&Yd(),this.options._experiments.enableInteractions&&Kd()}setupOnce(t,e){this._getCurrentHub=e;const n=e().getClient(),r=n&&n.getOptions(),{routingInstrumentation:s,startTransactionOnLocationChange:o,startTransactionOnPageLoad:i,markBackgroundTransactions:a,traceFetch:c,traceXHR:u,shouldCreateSpanForRequest:l,enableHTTPTimings:d,_experiments:p}=this.options,h=r&&r.tracePropagationTargets,f=h||this.options.tracePropagationTargets;ci&&this._hasSetTracePropagationTargets&&h&&L.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),s((t=>{const n=this._createRouteTransaction(t);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,t,e),n}),i,o),a&&$d(),p.enableInteractions&&this._registerInteractionListener(),np({traceFetch:c,traceXHR:u,tracePropagationTargets:f,shouldCreateSpanForRequest:l,enableHTTPTimings:d})}_createRouteTransaction(t){if(!this._getCurrentHub)return void(ci&&L.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`));const e=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:s,heartbeatInterval:o}=this.options,i="pageload"===t.op;let a;if(i){const e=i?ap("sentry-trace"):"",n=i?ap("baggage"):void 0,{traceparentData:r,dynamicSamplingContext:s}=Ct(e,n);a={...t,...r,metadata:{...t.metadata,dynamicSamplingContext:r&&!s?{}:s},trimEnd:!0}}else a={...t,trimEnd:!0};const c="function"==typeof n?n(a):a,u=void 0===c?{...a,sampled:!1}:c;u.metadata=u.name!==a.name?{...u.metadata,source:"custom"}:u.metadata,this._latestRouteName=u.name,this._latestRouteSource=function(t){const e=t.attributes&&t.attributes[Nr],n=t.data&&t.data[Nr],r=t.metadata&&t.metadata.source;return e||n||r}(u),!1===u.sampled&&ci&&L.log(`[Tracing] Will not send ${u.op} transaction because of beforeNavigate.`),ci&&L.log(`[Tracing] Starting ${u.op} transaction on scope`);const{location:l}=li,d=Kr(e,u,r,s,!0,{location:l},o,i);return i&&(li.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(li.document.readyState)&&d.sendAutoFinishSignal()})),["interactive","complete"].includes(li.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback((t=>{this._collectWebVitals(),Jd(t)})),d}_registerInteractionListener(){let t;const e=()=>{const{idleTimeout:e,finalTimeout:n,heartbeatInterval:r}=this.options,s="ui.action.click",o=Cn();if(o&&o.op&&["navigation","pageload"].includes(o.op))return void(ci&&L.warn(`[Tracing] Did not create ${s} transaction because a pageload or navigation transaction is in progress.`));if(t&&(t.setFinishReason("interactionInterrupted"),t.end(),t=void 0),!this._getCurrentHub)return void(ci&&L.warn(`[Tracing] Did not create ${s} transaction because _getCurrentHub is invalid.`));if(!this._latestRouteName)return void(ci&&L.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`));const i=this._getCurrentHub(),{location:a}=li,c={name:this._latestRouteName,op:s,trimEnd:!0,data:{[Nr]:this._latestRouteSource||"url"}};t=Kr(i,c,e,n,!0,{location:a},r)};["click"].forEach((t=>{addEventListener(t,e,{once:!1,capture:!0})}))}}function ap(t){const e=I(`meta[name=${t}]`);return e?e.getAttribute("content"):void 0}const cp={...Hr,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,_experiments:{},...ep},up=(t={})=>{const e=!!ci&&!(!t.tracePropagationTargets&&!t.tracingOrigins);Jr(),!t.tracePropagationTargets&&t.tracingOrigins&&(t.tracePropagationTargets=t.tracingOrigins);const n={...cp,...t},r=Vd();let s,o;function i(t){const e=Jt(),{beforeStartSpan:i,idleTimeout:a,finalTimeout:c,heartbeatInterval:u}=n,l="pageload"===t.op;let d;if(l){const e=l?pp("sentry-trace"):"",n=l?pp("baggage"):void 0,{traceparentData:r,dynamicSamplingContext:s}=Ct(e,n);d={...t,...r,metadata:{...t.metadata,dynamicSamplingContext:r&&!s?{}:s},trimEnd:!0}}else d={...t,trimEnd:!0};const p=i?i(d):d;p.metadata=p.name!==d.name?{...p.metadata,source:"custom"}:p.metadata,s=p.name,o=function(t){const e=t.attributes&&t.attributes[Nr],n=t.data&&t.data[Nr],r=t.metadata&&t.metadata.source;return e||n||r}(p),!1===p.sampled&&ci&&L.log(`[Tracing] Will not send ${p.op} transaction because of beforeNavigate.`),ci&&L.log(`[Tracing] Starting ${p.op} transaction on scope`);const{location:h}=li,f=Kr(e,p,a,c,!0,{location:h},u,l);return l&&(li.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(li.document.readyState)&&f.sendAutoFinishSignal()})),["interactive","complete"].includes(li.document.readyState)&&f.sendAutoFinishSignal()),f.registerBeforeFinishCallback((t=>{r(),Jd(t)})),f}return n.enableLongTask&&Yd(),n._experiments.enableInteractions&&Kd(),{name:"BrowserTracing",setupOnce:()=>{},afterAllSetup(t){const r=t.getOptions(),{markBackgroundSpan:a,traceFetch:c,traceXHR:u,shouldCreateSpanForRequest:l,enableHTTPTimings:d,_experiments:p}=n,h=r&&r.tracePropagationTargets,f=h||n.tracePropagationTargets;let m;ci&&e&&h&&L.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let g=li.location.href;if(t.on&&(t.on("startNavigationSpan",(t=>{m&&(ci&&L.log(`[Tracing] Finishing current transaction with op: ${Lt(m).op}`),m.end()),m=i(t)})),t.on("startPageLoadSpan",(t=>{m&&(ci&&L.log(`[Tracing] Finishing current transaction with op: ${Lt(m).op}`),m.end()),m=i(t)}))),n.instrumentPageLoad&&t.emit){const e={name:li.location.pathname,startTimestamp:at?at/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}};lp(t,e)}n.instrumentNavigation&&t.emit&&Ks((({to:e,from:n})=>{if(void 0===n&&g&&-1!==g.indexOf(e))g=void 0;else if(n!==e){g=void 0;const e={name:li.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}};dp(t,e)}})),a&&$d(),p.enableInteractions&&function(t,e,n){let r;const s=()=>{const{idleTimeout:s,finalTimeout:o,heartbeatInterval:i}=t,a="ui.action.click",c=Cn();if(c&&c.op&&["navigation","pageload"].includes(c.op))return void(ci&&L.warn(`[Tracing] Did not create ${a} transaction because a pageload or navigation transaction is in progress.`));if(r&&(r.setFinishReason("interactionInterrupted"),r.end(),r=void 0),!e)return void(ci&&L.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`));const{location:u}=li,l={name:e,op:a,trimEnd:!0,data:{[Nr]:n||"url"}};r=Kr(Jt(),l,s,o,!0,{location:u},i)};["click"].forEach((t=>{addEventListener(t,s,{once:!1,capture:!0})}))}(n,s,o),np({traceFetch:c,traceXHR:u,tracePropagationTargets:f,shouldCreateSpanForRequest:l,enableHTTPTimings:d})},options:n}};function lp(t,e){t.emit&&t.emit("startPageLoadSpan",e)}function dp(t,e){t.emit&&t.emit("startNavigationSpan",e)}function pp(t){const e=I(`meta[name=${t}]`);return e?e.getAttribute("content"):void 0}const hp=100,fp=5e3,mp=36e5;function gp(t,e){K&&L.info(`[Offline]: ${t}`,e)}function yp(t){return e=>{const n=t(e),r=e.createStore?e.createStore(e):void 0;let s,o=fp;function i(t,n,r){return s=["replay_event","replay_recording","client_report"],!Bn(t,((t,e)=>s.includes(e)))&&(!e.shouldStore||e.shouldStore(t,n,r));var s}function a(t){r&&(s&&clearTimeout(s),s=setTimeout((async()=>{s=void 0;const t=await r.pop();t&&(gp("Attempting to send previously queued event"),u(t).catch((t=>{gp("Failed to retry sending",t)})))}),t),"number"!=typeof s&&s.unref&&s.unref())}function c(){s||(a(o),o=Math.min(2*o,mp))}async function u(t){try{const e=await n.send(t);let r=hp;if(e)if(e.headers&&e.headers["retry-after"])r=gr(e.headers["retry-after"]);else if((e.statusCode||0)>=400)return e;return a(r),o=fp,e}catch(e){if(r&&await i(t,e,o))return await r.insert(t),c(),gp("Error sending. Event queued",e),{};throw e}}return e.flushAtStartup&&c(),{send:u,flush:t=>n.flush(t)}}}function _p(t){return new Promise(((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)}))}function vp(t){return _p(t.getAllKeys())}function bp(t){let e;function n(){return null==e&&(e=function(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=_p(n);return t=>r.then((n=>t(n.transaction(e,"readwrite").objectStore(e))))}(t.dbName||"sentry-offline",t.storeName||"queue")),e}return{insert:async e=>{try{const r=await Un(e,t.textEncoder);await function(t,e,n){return t((t=>vp(t).then((r=>{if(!(r.length>=n))return t.put(e,Math.max(...r,0)+1),_p(t.transaction)}))))}(n(),r,t.maxQueueSize||30)}catch(t){}},pop:async()=>{try{const e=await function(t){return t((t=>vp(t).then((e=>{if(0!==e.length)return _p(t.get(e[0])).then((n=>(t.delete(e[0]),_p(t.transaction).then((()=>n)))))}))))}(n());if(e)return function(t,e,n){let r="string"==typeof t?e.encode(t):t;function s(t){const e=r.subarray(0,t);return r=r.subarray(t+1),e}function o(){let t=r.indexOf(10);return t<0&&(t=r.length),JSON.parse(n.decode(s(t)))}const i=o(),a=[];for(;r.length;){const t=o(),e="number"==typeof t.length?t.length:void 0;a.push([t,e?s(e):o()])}return[i,a]}(e,t.textEncoder||new TextEncoder,t.textDecoder||new TextDecoder)}catch(t){}}}}function Sp(t){return function(t){return e=>t({...e,createStore:bp})}(yp(t))}const kp=1e6,wp=String(0),Ep="main";let xp="",Tp="",Cp="",Ip=ss.navigator&&ss.navigator.userAgent||"",Rp="";const Mp=ss.navigator&&ss.navigator.language||ss.navigator&&ss.navigator.languages&&ss.navigator.languages[0]||"";const Op=ss.navigator&&ss.navigator.userAgentData;var Ap;function Dp(t){return function(t){return!("thread_metadata"in t)}(t)?function(t){let e,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[wp]:{name:Ep}}};if(!t.samples.length)return r;const s=t.samples[0].timestamp,o="number"==typeof performance.timeOrigin?performance.timeOrigin:at||0,i=o-(at||o);for(let o=0;o<t.samples.length;o++){const a=t.samples[o];if(void 0===a.stackId){void 0===e&&(e=n,r.stacks[e]=[],n++),r.samples[o]={elapsed_since_start_ns:((a.timestamp+i-s)*kp).toFixed(0),stack_id:e,thread_id:wp};continue}let c=t.stacks[a.stackId];const u=[];for(;c;){u.push(c.frameId);const e=t.frames[c.frameId];void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:e.name,abs_path:"number"==typeof e.resourceId?t.resources[e.resourceId]:void 0,lineno:e.line,colno:e.column}),c=void 0===c.parentId?void 0:t.stacks[c.parentId]}const l={elapsed_since_start_ns:((a.timestamp+i-s)*kp).toFixed(0),stack_id:n,thread_id:wp};r.stacks[n]=u,r.samples[o]=l,n++}return r}(t):t}function Lp(t,e,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=function(t){const e=t&&t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id;return"string"==typeof e&&32!==e.length&&us&&L.log(`[Profiling] Invalid traceId: ${e} on profiled event`),"string"!=typeof e?"":e}(r),o=Dp(n),i=e||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:Date.now()),a="number"==typeof r.timestamp?1e3*r.timestamp:Date.now();return{event_id:t,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||Y,runtime:{name:"javascript",version:ss.navigator.userAgent},os:{name:xp,version:Tp,build_number:Ip},device:{locale:Mp,model:Rp,manufacturer:Ip,architecture:Cp,is_emulator:!1},debug_meta:{images:$p(n.resources)},profile:o,transactions:[{name:r.transaction||"",id:r.event_id||J(),trace_id:s,active_thread_id:wp,relative_start_ns:"0",relative_end_ns:(1e6*(a-i)).toFixed(0)}]}}function Np(t){return"pageload"===t.op}"object"==typeof(Ap=Op)&&null!==Ap&&"getHighEntropyValues"in Ap&&Op.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((t=>{if(xp=t.platform||"",Cp=t.architecture||"",Rp=t.model||"",Tp=t.platformVersion||"",t.fullVersionList&&t.fullVersionList.length>0){const e=t.fullVersionList[t.fullVersionList.length-1];Ip=`${e.brand} ${e.version}`}})).catch((t=>{}));const Pp=new WeakMap;function $p(t){const e=b._sentryDebugIds;if(!e)return[];const n=De(),r=n&&n.getOptions(),s=r&&r.stackParser;if(!s)return[];let o;const i=Pp.get(s);i?o=i:(o=new Map,Pp.set(s,o));const a=Object.keys(e).reduce(((t,n)=>{let r;const i=o.get(n);i?r=i:(r=s(n),o.set(n,r));for(let s=r.length-1;s>=0;s--){const o=r[s],i=o&&o.filename;if(o&&i){t[i]=e[n];break}}return t}),{}),c=[];for(const e of t)e&&a[e]&&c.push({type:"sourcemap",code_file:e,debug_id:a[e]});return c}let Fp=!1;const Bp=3e4;function jp(t){if(Fp)return us&&L.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!t.isRecording())return us&&L.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const e=De(),n=e&&e.getOptions();if(!n)return us&&L.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(s=r)&&"boolean"!=typeof s||"number"==typeof s&&isNaN(s)?(us&&L.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),0):!0===s||!1===s||!(s<0||s>1)||(us&&L.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${s}.`),0)))return us&&L.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var s;if(!r)return us&&L.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(us&&L.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function Up(t,e,n,r){return function(t){return t.samples.length<2?(us&&L.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!t.frames.length||(us&&L.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?Lp(t,e,n,r):null}const Hp=new Map;function zp(t){const e=Hp.get(t);return e&&Hp.delete(t),e}function qp(t){return t?jp(t)?Wp(t):t:(us&&L.log("[Profiling] Transaction is undefined, skipping profiling"),t)}function Wp(t){let e;Np(t)&&(e=1e3*ot());const n=function(){const t=ss.Profiler;if("function"!=typeof t)return void(us&&L.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const e=Math.floor(Bp/10);try{return new t({sampleInterval:10,maxBufferSize:e})}catch(t){us&&(L.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),L.log("[Profiling] Disabling profiling for current user session.")),Fp=!0}}();if(!n)return t;us&&L.log(`[Profiling] started profiling transaction: ${Lt(t).description}`);const r=J();async function s(){return t&&n?n.stop().then((e=>(o&&(ss.clearTimeout(o),o=void 0),us&&L.log(`[Profiling] stopped profiling of transaction: ${Lt(t).description}`),e?(function(t,e){if(Hp.set(t,e),Hp.size>30){const t=Hp.keys().next().value;Hp.delete(t)}}(r,e),null):(us&&L.log(`[Profiling] profiler returned null profile for: ${Lt(t).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((t=>(us&&L.log("[Profiling] error while stopping profiler:",t),null))):null}let o=ss.setTimeout((()=>{us&&L.log("[Profiling] max profile duration elapsed, stopping profiling for:",Lt(t).description),s()}),Bp);const i=t.end.bind(t);return t.end=function(){return t?(s().then((()=>{t.setContext("profile",{profile_id:r,start_timestamp:e}),i()}),(()=>{i()})),t):i()},t}const Gp="BrowserProfiling",Vp=We(Gp,(()=>({name:Gp,setupOnce(){},setup(t){const e=Ne().getTransaction();e&&Np(e)&&jp(e)&&Wp(e),"function"==typeof t.on?(t.on("startTransaction",(t=>{jp(t)&&Wp(t)})),t.on("beforeEnvelope",(t=>{if(!Hp.size)return;const e=function(t){const e=[];return Bn(t,((t,n)=>{if("transaction"===n)for(let n=1;n<t.length;n++){const r=t[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&e.push(t[n])}})),e}(t);if(!e.length)return;const n=[];for(const t of e){const e=t&&t.contexts,r=e&&e.profile&&e.profile.profile_id,s=e&&e.profile&&e.profile.start_timestamp;if("string"!=typeof r){us&&L.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!r){us&&L.log("[Profiling] cannot find profile for a transaction without a profile context");continue}e&&e.profile&&delete e.profile;const o=zp(r);if(!o){us&&L.log(`[Profiling] Could not retrieve profile for transaction: ${r}`);continue}const i=Up(r,s,o,t);i&&n.push(i)}!function(t,e){if(!e.length)return t;for(const n of e)t[1].push([{type:"profile"},n])}(t,n)}))):L.warn("[Profiling] Client does not support hooks, profiling will be disabled")}})));let Yp={};ss.Sentry&&ss.Sentry.Integrations&&(Yp=ss.Sentry.Integrations);const Kp={...Yp,...pn,...s}},661:function(t,e,n){function r(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function s(){return"npm"}n.d(e,{S:function(){return s},n:function(){return r}})},305:function(t,e,n){n.d(e,{KV:function(){return s}});var r=n(661);function s(){return!(0,r.n)()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}t=n.hmd(t)}}]);