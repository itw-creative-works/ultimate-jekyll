/*! For license information please see chunk.189.3506ca57fe3bf3062079.js.LICENSE.txt */
"use strict";(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[189],{189:function(e,t,r){r.r(t);var n=r(925),o=r(537),i=r(463),a=r(994),s=r(555);const c=new Map,h={activated:!1,tokenObservers:[]},l={initialized:!1,enabled:!1};function p(e){return c.get(e)||Object.assign({},h)}function u(){return l}const d="https://content-firebaseappcheck.googleapis.com/v1",f="exchangeDebugToken",g={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class k{constructor(e,t,r,n,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=n,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=n,n>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((()=>{}))}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new a.BH,await(t=this.getNextRun(e),new Promise((e=>{setTimeout(e,t)}))),this.pending.resolve(),await this.pending.promise,this.pending=new a.BH,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch((()=>{}))}catch(e){this.retryPolicy(e)?this.process(!1).catch((()=>{})):this.stop()}var t}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const w={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},v=new a.LL("appCheck","AppCheck",w);function m(e=!1){var t;return e?null===(t=self.grecaptcha)||void 0===t?void 0:t.enterprise:self.grecaptcha}function b(e){if(!p(e).activated)throw v.create("use-before-activation",{appName:e.name})}function T(e){const t=Math.round(e/1e3),r=Math.floor(t/86400),n=Math.floor((t-3600*r*24)/3600),o=Math.floor((t-3600*r*24-3600*n)/60),i=t-3600*r*24-3600*n-60*o;let a="";return r&&(a+=E(r)+"d:"),n&&(a+=E(n)+"h:"),a+=E(o)+"m:"+E(i)+"s",a}function E(e){return 0===e?"00":e>=10?e.toString():"0"+e}async function _({url:e,body:t},r){const n={"Content-Type":"application/json"},o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&(n["X-Firebase-Client"]=e)}const i={method:"POST",body:JSON.stringify(t),headers:n};let a,s;try{a=await fetch(e,i)}catch(e){throw v.create("fetch-network-error",{originalErrorMessage:null==e?void 0:e.message})}if(200!==a.status)throw v.create("fetch-status-error",{httpStatus:a.status});try{s=await a.json()}catch(e){throw v.create("fetch-parse-error",{originalErrorMessage:null==e?void 0:e.message})}const c=s.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw v.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${s.ttl}`});const h=1e3*Number(c[1]),l=Date.now();return{token:s.token,expireTimeMillis:l+h,issuedAtTimeMillis:l}}function A(e,t){const{projectId:r,appId:n,apiKey:o}=e.options;return{url:`${d}/projects/${r}/apps/${n}:${f}?key=${o}`,body:{debug_token:t}}}const y="firebase-app-check-database",P=1,C="firebase-app-check-store",R="debug-token";let I=null;function S(){return I||(I=new Promise(((e,t)=>{try{const r=indexedDB.open(y,P);r.onsuccess=t=>{e(t.target.result)},r.onerror=e=>{var r;t(v.create("storage-open",{originalErrorMessage:null===(r=e.target.error)||void 0===r?void 0:r.message}))},r.onupgradeneeded=e=>{const t=e.target.result;if(0===e.oldVersion)t.createObjectStore(C,{keyPath:"compositeKey"})}}catch(e){t(v.create("storage-open",{originalErrorMessage:null==e?void 0:e.message}))}})),I)}async function D(e,t){const r=(await S()).transaction(C,"readwrite"),n=r.objectStore(C).put({compositeKey:e,value:t});return new Promise(((e,t)=>{n.onsuccess=t=>{e()},r.onerror=e=>{var r;t(v.create("storage-set",{originalErrorMessage:null===(r=e.target.error)||void 0===r?void 0:r.message}))}}))}async function x(e){const t=(await S()).transaction(C,"readonly"),r=t.objectStore(C).get(e);return new Promise(((e,n)=>{r.onsuccess=t=>{const r=t.target.result;e(r?r.value:void 0)},t.onerror=e=>{var t;n(v.create("storage-get",{originalErrorMessage:null===(t=e.target.error)||void 0===t?void 0:t.message}))}}))}function N(e){return`${e.options.appId}-${e.name}`}const O=new s.Yd("@firebase/app-check");async function $(e){if((0,a.hl)()){let t;try{t=await function(e){return x(N(e))}(e)}catch(e){O.warn(`Failed to read token from IndexedDB. Error: ${e}`)}return t}}function M(e,t){return(0,a.hl)()?function(e,t){return D(N(e),t)}(e,t).catch((e=>{O.warn(`Failed to write token to IndexedDB. Error: ${e}`)})):Promise.resolve()}async function B(){let e;try{e=await x(R)}catch(e){}if(e)return e;{const e=(0,a.k$)();return(t=e,D(R,t)).catch((e=>O.warn(`Failed to persist debug token to IndexedDB. Error: ${e}`))),e}var t}function H(){return u().enabled}async function j(){const e=u();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}const K={error:"UNKNOWN_ERROR"};async function L(e,t=!1){const r=e.app;b(r);const n=p(r);let o,i=n.token;if(i&&!X(i)&&(n.token=void 0,i=void 0),!i){const e=await n.cachedTokenPromise;e&&(X(e)?i=e:await M(r,void 0))}if(!t&&i&&X(i))return{token:i.token};let a,s=!1;if(H()){n.exchangeTokenPromise||(n.exchangeTokenPromise=_(A(r,await j()),e.heartbeatServiceProvider).finally((()=>{n.exchangeTokenPromise=void 0})),s=!0);const t=await n.exchangeTokenPromise;return await M(r,t),n.token=t,{token:t.token}}try{n.exchangeTokenPromise||(n.exchangeTokenPromise=n.provider.getToken().finally((()=>{n.exchangeTokenPromise=void 0})),s=!0),i=await p(r).exchangeTokenPromise}catch(e){"appCheck/throttled"===e.code?O.warn(e.message):O.error(e),o=e}return i?o?a=X(i)?{token:i.token,internalError:o}:V(o):(a={token:i.token},n.token=i,await M(r,i)):a=V(o),s&&U(r,a),a}async function z(e){const t=e.app;b(t);const{provider:r}=p(t);if(H()){const r=await j(),{token:n}=await _(A(t,r),e.heartbeatServiceProvider);return{token:n}}{const{token:e}=await r.getToken();return{token:e}}}function F(e,t,r,n){const{app:o}=e,i=p(o),a={next:r,error:n,type:t};if(i.tokenObservers=[...i.tokenObservers,a],i.token&&X(i.token)){const t=i.token;Promise.resolve().then((()=>{r({token:t.token}),q(e)})).catch((()=>{}))}i.cachedTokenPromise.then((()=>q(e)))}function W(e,t){const r=p(e),n=r.tokenObservers.filter((e=>e.next!==t));0===n.length&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),r.tokenObservers=n}function q(e){const{app:t}=e,r=p(t);let n=r.tokenRefresher;n||(n=function(e){const{app:t}=e;return new k((async()=>{let r;if(r=p(t).token?await L(e,!0):await L(e),r.error)throw r.error;if(r.internalError)throw r.internalError}),(()=>!0),(()=>{const e=p(t);if(e.token){let t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;const r=e.token.expireTimeMillis-3e5;return t=Math.min(t,r),Math.max(0,t-Date.now())}return 0}),g.RETRIAL_MIN_WAIT,g.RETRIAL_MAX_WAIT)}(e),r.tokenRefresher=n),!n.isRunning()&&r.isTokenAutoRefreshEnabled&&n.start()}function U(e,t){const r=p(e).tokenObservers;for(const e of r)try{"EXTERNAL"===e.type&&null!=t.error?e.error(t.error):e.next(t)}catch(e){}}function X(e){return e.expireTimeMillis-Date.now()>0}function V(e){return{token:(t=K,a.US.encodeString(JSON.stringify(t),!1)),error:e};var t}class G{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=p(this.app);for(const t of e)W(this.app,t.next);return Promise.resolve()}}const Y="https://www.google.com/recaptcha/api.js",J="https://www.google.com/recaptcha/enterprise.js";function Z(e,t){const r=new a.BH;p(e).reCAPTCHAState={initialized:r};const n=te(e),o=m(!1);return o?ee(e,t,o,n,r):function(e){const t=document.createElement("script");t.src=Y,t.onload=e,document.head.appendChild(t)}((()=>{const o=m(!1);if(!o)throw new Error("no recaptcha");ee(e,t,o,n,r)})),r.promise}function Q(e,t){const r=new a.BH;p(e).reCAPTCHAState={initialized:r};const n=te(e),o=m(!0);return o?ee(e,t,o,n,r):function(e){const t=document.createElement("script");t.src=J,t.onload=e,document.head.appendChild(t)}((()=>{const o=m(!0);if(!o)throw new Error("no recaptcha");ee(e,t,o,n,r)})),r.promise}function ee(e,t,r,n,o){r.ready((()=>{!function(e,t,r,n){const o=r.render(n,{sitekey:t,size:"invisible",callback:()=>{p(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{p(e).reCAPTCHAState.succeeded=!1}}),i=p(e);i.reCAPTCHAState=Object.assign(Object.assign({},i.reCAPTCHAState),{widgetId:o})}(e,t,r,n),o.resolve(r)}))}function te(e){const t=`fire_app_check_${e.name}`,r=document.createElement("div");return r.id=t,r.style.display="none",document.body.appendChild(r),t}async function re(e){b(e);const t=p(e).reCAPTCHAState,r=await t.initialized.promise;return new Promise(((t,n)=>{const o=p(e).reCAPTCHAState;r.ready((()=>{t(r.execute(o.widgetId,{action:"fire_app_check"}))}))}))}class ne{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,t,r;se(this._throttleData);const n=await re(this._app).catch((e=>{throw v.create("recaptcha-error")}));if(!(null===(e=p(this._app).reCAPTCHAState)||void 0===e?void 0:e.succeeded))throw v.create("recaptcha-error");let o;try{o=await _(function(e,t){const{projectId:r,appId:n,apiKey:o}=e.options;return{url:`${d}/projects/${r}/apps/${n}:exchangeRecaptchaV3Token?key=${o}`,body:{recaptcha_v3_token:t}}}(this._app,n),this._heartbeatServiceProvider)}catch(e){throw(null===(t=e.code)||void 0===t?void 0:t.includes("fetch-status-error"))?(this._throttleData=ae(Number(null===(r=e.customData)||void 0===r?void 0:r.httpStatus),this._throttleData),v.create("throttled",{time:T(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):e}return this._throttleData=null,o}initialize(e){this._app=e,this._heartbeatServiceProvider=(0,i._getProvider)(e,"heartbeat"),Z(e,this._siteKey).catch((()=>{}))}isEqual(e){return e instanceof ne&&this._siteKey===e._siteKey}}class oe{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,t,r;se(this._throttleData);const n=await re(this._app).catch((e=>{throw v.create("recaptcha-error")}));if(!(null===(e=p(this._app).reCAPTCHAState)||void 0===e?void 0:e.succeeded))throw v.create("recaptcha-error");let o;try{o=await _(function(e,t){const{projectId:r,appId:n,apiKey:o}=e.options;return{url:`${d}/projects/${r}/apps/${n}:exchangeRecaptchaEnterpriseToken?key=${o}`,body:{recaptcha_enterprise_token:t}}}(this._app,n),this._heartbeatServiceProvider)}catch(e){throw(null===(t=e.code)||void 0===t?void 0:t.includes("fetch-status-error"))?(this._throttleData=ae(Number(null===(r=e.customData)||void 0===r?void 0:r.httpStatus),this._throttleData),v.create("throttled",{time:T(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):e}return this._throttleData=null,o}initialize(e){this._app=e,this._heartbeatServiceProvider=(0,i._getProvider)(e,"heartbeat"),Q(e,this._siteKey).catch((()=>{}))}isEqual(e){return e instanceof oe&&this._siteKey===e._siteKey}}class ie{constructor(e){this._customProviderOptions=e}async getToken(){const e=await this._customProviderOptions.getToken(),t=(0,a.DO)(e.token),r=null!==t&&t<Date.now()&&t>0?1e3*t:Date.now();return Object.assign(Object.assign({},e),{issuedAtTimeMillis:r})}initialize(e){this._app=e}isEqual(e){return e instanceof ie&&this._customProviderOptions.getToken.toString()===e._customProviderOptions.getToken.toString()}}function ae(e,t){if(404===e||403===e)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:e};{const r=t?t.backoffCount:0,n=(0,a.$s)(r,1e3,2);return{backoffCount:r+1,allowRequestsAfter:Date.now()+n,httpStatus:e}}}function se(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw v.create("throttled",{time:T(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}function ce(e=(0,i.getApp)(),t){e=(0,a.m9)(e);const r=(0,i._getProvider)(e,"app-check");if(u().initialized||function(){const e=(0,a.Rd)(),t=u();if(t.initialized=!0,"string"!=typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==e.FIREBASE_APPCHECK_DEBUG_TOKEN)return;t.enabled=!0;const r=new a.BH;t.token=r,"string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?r.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):r.resolve(B())}(),H()&&j().then((e=>console.log(`App Check debug token: ${e}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`))),r.isInitialized()){const n=r.getImmediate(),o=r.getOptions();if(o.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&o.provider.isEqual(t.provider))return n;throw v.create("already-initialized",{appName:e.name})}const n=r.initialize({options:t});return function(e,t,r){const n=function(e,t){return c.set(e,t),c.get(e)}(e,Object.assign({},h));n.activated=!0,n.provider=t,n.cachedTokenPromise=$(e).then((t=>(t&&X(t)&&(n.token=t,U(e,{token:t.token})),t))),n.isTokenAutoRefreshEnabled=void 0===r?e.automaticDataCollectionEnabled:r,n.provider.initialize(e)}(e,t.provider,t.isTokenAutoRefreshEnabled),p(e).isTokenAutoRefreshEnabled&&F(n,"INTERNAL",(()=>{})),n}const he="app-check-internal";(0,i._registerComponent)(new o.wA("app-check",(e=>function(e,t){return new G(e,t)}(e.getProvider("app").getImmediate(),e.getProvider("heartbeat"))),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,r)=>{e.getProvider(he).initialize()}))),(0,i._registerComponent)(new o.wA(he,(e=>function(e){return{getToken:t=>L(e,t),getLimitedUseToken:()=>z(e),addTokenListener:t=>F(e,"INTERNAL",t),removeTokenListener:t=>W(e.app,t)}}(e.getProvider("app-check").getImmediate())),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,i.registerVersion)("@firebase/app-check","0.8.0");const le={"use-before-activation":"App Check is being used before activate() is called for FirebaseApp {$appName}. Call activate() before instantiating other Firebase services."},pe=new a.LL("appCheck","AppCheck",le);class ue{constructor(e){this.app=e}activate(e,t){let r;r="string"==typeof e?new ne(e):e instanceof oe||e instanceof ne||e instanceof ie?e:new ie({getToken:e.getToken}),this._delegate=ce(this.app,{provider:r,isTokenAutoRefreshEnabled:t})}setTokenAutoRefreshEnabled(e){if(!this._delegate)throw pe.create("use-before-activation",{appName:this.app.name});!function(e,t){const r=p(e.app);r.tokenRefresher&&(!0===t?r.tokenRefresher.start():r.tokenRefresher.stop()),r.isTokenAutoRefreshEnabled=t}(this._delegate,e)}getToken(e){if(!this._delegate)throw pe.create("use-before-activation",{appName:this.app.name});return async function(e,t){const r=await L(e,t);if(r.error)throw r.error;return{token:r.token}}(this._delegate,e)}onTokenChanged(e,t,r){if(!this._delegate)throw pe.create("use-before-activation",{appName:this.app.name});return function(e,t,r,n){let o=()=>{},i=()=>{};return o=null!=t.next?t.next.bind(t):t,null!=t.error?i=t.error.bind(t):r&&(i=r),F(e,"EXTERNAL",o,i),()=>W(e.app,o)}(this._delegate,e,t)}}const de=e=>{const t=e.getProvider("app-compat").getImmediate();return new ue(t)};n.Z.INTERNAL.registerComponent(new o.wA("appCheck-compat",de,"PUBLIC").setServiceProps({ReCaptchaEnterpriseProvider:oe,ReCaptchaV3Provider:ne,CustomProvider:ie})),n.Z.registerVersion("@firebase/app-check-compat","0.3.7")}}]);